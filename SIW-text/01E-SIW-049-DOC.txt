Germany/USA Transatlantic Distributed Simulation ProjectKurt LessmannAmtec Corporation, 500 Wynn Drive, Suite 314Huntsville, Alabama256.722.7200klessmann@amtec-corp.comUwe KrostaHorst WeberpalsGE Federal Armed Forces Technical Centre for Communications and ElectronicsWehrtechnische Dienststelle für Fernmeldewesen und Elektronik (WTD 81),Kalvarienberg, D-91171 GredingUweKrosta@bwb.orgMike KrauseFlight Test BranchRedstone Technical Test CenterRedstone Arsenal, Alabama 35898256.876.3873Mike.Krause@rttc.army.milDarrell E. BenchUS Army Developmental Test Command314 Longs Corner RoadAberdeen Proving Ground, Maryland 21005410.278.1065benchd@dtc.army.milKeywords:Distributed Simulation, High Level Architecture, Hardware in the Loop.ABSTRACT: A  joint German/USA Transatlantic Distributed Simulation Project was initiated to develop and prove the capability to conduct live, interactive simulations to support testing in a multinational, geographically distributed environment.  The first exercise includes a German anti-aircraft tank (Gepard) in a hardware-in-the-loop facility in Greding, Germany (WTD-81) stimulated by virtual targets generated real time at Redstone Technical Test Center (RTTC) in Huntsville, Alabama.  High Level Architecture (HLA) and the Run Time Infrastructure (RTI) developed by DMSO were implemented in this test.	This transatlantic HLA exercise can be considered a classic sensor, shooter, and target scenario consisting of two federates, digitized terrain of the WTD test range and a live Gepard air defense system.  The Gepard engages, in real time, a constructive target generated at RTTC.    This target federate provides target aircraft state data to the Gepard federate which then injects this information through the hardware-in-the-loop facility into the radar system on-board the Gepard.  This stimulates the on-board fire control system so that the gunner can engage the target.  Data  are gathered to evaluate the system performance to detect, track and engage the constructive aircraft target as if it were flying a test mission at WTD 81.For this type of long-haul exercise, the challenges lie not so much with federate development, but with the synchronization and latency issues when dealing with a "real-time" trans-Atlantic HLA distributed test.  This paper will discuss the configuration, results and lessons learned in hopes of providing the reader insight into this challenging exercise.1. The PartnershipThe U.S. Army Developmental Test Command (DTC) and the German Army Wehrtechnische Dienststelle fuer Fernmeldewesen und Elektronik (WTD-81) have joined together to develop and prove the ability to conduct live, distributed, and real-time interactive simulations to support joint testing between our countries.   As all nations seem to be experiencing reductions in resources for their military, the opportunity to cooperate in the development of weapon systems and the supporting test programs become more and more important. NATO has adopted High Level Architecture (HLA) within their Modeling and Simulation Master Plan, which helps to cooperate in distributed simulation efforts.  One example of an ongoing cooperative effort is the development of an international distributed simulation capability.  This joint German/US effort is examining the issues and potential solutions to enable simulation based testing in future joint test programs.  The U.S. Army has been developing a simulation based test capability under the auspices of the Virtual Proving Ground (VPG) program. Germany has also begun to develop a similar VPG capability within the German Ministry of Defense (MOD).  Like the US, Germany is developing their HLA simulation capability.The initial exercise between DTC and WTD-81 involves the Redstone Technical Test Center (RTTC) in Huntsville, Alabama and WTD-81 in Greding, Germany.  This exercise developed an HLA Federation to link a fixed-wing aircraft simulation at RTTC and a Gepard Antiaircraft Tank in a Hardware In the Loop (HIL) facility at WTD-81. The aircraft simulation federate provides the Gepard system federate a virtual target by injecting the aircraft state data into the fire control system.  The Gepard system then reacts to the virtual target as if it were a “live” target on range. This concept reduces test expense by eliminating a live aircraft while allowing more flexible and repeatable testing via real-time distributed simulation.2. Exercise BackgroundRecently, WTD-81 has been migrating weapon system Developmental and Operational Testing (DT/OT) from cost-prohibitive live fire testing towards the utilization of Modeling and Simulations (M&S) HIL techniques.  In support of this concept, WTD-81 is currently testing the Gepard Air Defense System within the confines of the test area WTD 81 near Greding, Germany.The following paragraphs describe the background and the essentials of an HLA-based transatlantic test between the RTTC in Huntsville, Alabama and the WTD-81 near Greding, Germany.  This distributed test was designed to support this type of air defense weapon system testing.  2.1 German Gepard Weapon SystemThe Gepard is a heavily armored, autonomous and mobile air defense system based on the chassis of the Leopard main battle tank.  Figure 1.0 Gepard Weapon SystemThe vehicle is fitted with a fire control system, all-weather tracking and acquisition sensors and powerful automatic guns. Its role within NATO is to protect key installations, combat units and troops on the move as well as on the battlefield. The Gepard is fitted with a two-man electric power operated turret armed with twin Oerlikon KDA 35mm guns. The rate of fire provided by the two barrels is 1100 rounds/minute. Each 35-mm gun has 320 rounds of ready to fire anti-air ammunition and 20 rounds of anti-ground target ammunition. The guns are capable of firing a range of standardized 35-mm ammunition including the new Frangible Armor Piercing Discarding Sabot (FAPDS) rounds. The FAPDS rounds have a muzzle velocity greater than 1400 m/sec. The Gepard anti-aircraft tank is manufactured by Krauss-Maffei Wegmann (KMW), based in Munich, Germany and is operational with the armed forces of Belgium, Germany and the Netherlands.2.2 Gepard Weapon System TestingTesting of this system has traditionally utilized a live aircraft towing a target drone while flying several pre-determined flight profiles over the Gepard.  The Gepard would track the “target” drone with the on-board fire control radar and automatically engage the target based on the radar tracking information.  In addition, the gunner could track the target via on-board optics, and fire upon the target at his discretion.As previously mentioned, WTD-81 has been developing test capabilities aimed at moving testing from the traditional Open Air Ranges (OAR) towards more M&S-specific testing.  In support of this concept, a HIL test facility has been developed to conduct Gepard system-level testing without the use of live aircraft or ammunition.  Figure 2.0 Depicts this configuration.Figure 2.0 Gepard HIL Test Facility at WTD 81This test asset consists of a HIL facility that provides the Gepard fire control system target track information and a Data Acquisition System (DAS) to monitor Gepard system reactions. The majority of the communication occurs at the radar and fire control system interface.  The HIL injects state data (position, velocity, etc.) from a database containing pre-planned flight profiles into the fire control system.  This data is identical to that “seen“ by the fire control system if the actual radar was providing the state data of an actual track.  This data injection provides the input capability required when testing the Gepard weapon system with a simulated target in place of a live target aircraftBecause live targets are no longer being utilized to test the fire control system, live ammunition was not required to test.  However, if no munitions were fired at the target aircraft, no overall performance evaluation of the systems ability to destroy the target aircraft existed.  To support this requirement, a kill probability simulation was developed from previously recorded live-fire testing results.  The HIL DAS monitors the Gepard system to collect data such as vehicle orientation, gun barrel orientation, trigger pull events, tracking status, and radar activity.   This data is used to provide input to the kill probability simulation and to the Computer Image Generator (CIG).  The kill probability simulation provides a Circular Error Probability (CEP) results based on several Gepard and target parameters.  The CIG utilizes state data of the Gepard and target aircraft to generate a 3D real-time visualization.  This real time 3D imagery provided the gunner to view the test scenario and allow manual control of the firing mechanism.  Figure 3.0 depicts this configuration.Figure 3.0 Gepard HIL Configuration3.0 Distributed Test ConceptThe aforementioned Gepard HIL test capability has proven to be a very effective means to conduct system-level testing with the Gepard weapon system.  To further enhance this capability, it was decided that this system could be utilized to develop a distributed test capability.  Because this HIL facility only requires input from a single outside source, the target state data, this data source was the logical component to distribute.  Therefore, an HLA-based distributed test scenario consisting of two federates was developed.  The first federate designated was the Gepard.  This federate would interface to the Gepard HIL system and would subscribe to the target state data. The second federate was the flight profile generator.  This federate would read target state data from a database and publish it to the Gepard federate.   It was decided that the flight profile generator, or target federate, was the easiest to distribute, and therefore should be developed and executed by RTTC. The Gepard federate, was developed by WTD-81 to interface with the Gepard through the HIL facility.  Figure 4.0 depicts the test scenario concept.To develop this distributed test, a three step process was developed.  The first step was to develop the two federates, the second step was to integrate the two federates on a LAN-based federation at WTD 81 in Germany and the third step was to establish a transatlantic network and conduct a Wide Area Network (WAN)/ISDN-based federation execution.Figure 4.0 Gepard HLA Distributed Test Configuration3.1 Federate DevelopmentThe Gepard federate was designed to subscribe to the target aircraft state data being supplied by the target federate.  The Gepard federate then injected this data , via the HIL, into the actual Gepard weapon system at the fire control system and radar interface. Injecting the data at this point, tests the fire-control system as if the virtual target was actually being tracked by the on-board radar system. This federate is the interface between the Gepard HIL and the “outside world”.The Gepard federate publishes several Gepard system parameters such as target lock, Gepard Orientation and the gun turret system articulation and relative orientation data.As previously mentioned, the various Gepard system parameters from the Gepard fire control system and provides this data to the CIG system.  The CIG then generates a 3D visualization that is projected to the gunner via a monitor covering the on-board optical system.  See Figure 5.0 for the German test configuration.Figure 5.0 German Test ConfigurationThe target federate was designed as a two-phase approach.   The first phase was to develop an HLA “reader” that read in the “canned” flight profile state data from a database. The second phase was designed to replace this “reader” application with a full 6 Degree of Freedom (6DOF) simulation that a “pilot” could control via a simple input device like a joystick.  Because the state data described a target aircraft, and not the source of the data, the SOM did not change to support the 6DOF integration.  See Figure 6.0 for US configuration.Figure 6.0 US Test ConfigurationThe target federate publishes the target state data that was subscribed to by the Gepard federate.  The target federate subscribes to the Gepard system data to be used in the second phase.  During the second phase, this Gepard system data will be used to provide input to the 6DOF controller as to the status of the Gepard system.  This data will then be used by the 6DOF “pilot” to engage in diversionary maneuvers to try to “break lock” from the Gepard. Although both federates were developed in parallel, each federate developer took a unique approach.  The WTD 81 personnel utilized pSISA to develop an HLA wrapper for the Gepard HIL system, whereas the RTTC support contractor personnel at Amtec Corporation utilized a native HLA solution.  Please refer to Paper 00S-SIW-026 or 01E-SIW-065 for more pSISA data.3.2 LAN Federation ExecutionDuring the week of November 13th, 2000, WTD 81 and RTTC personnel began integration efforts at the Gepard test facility in Germany.  The plan was to create a federation execution with the Gepard and target federates running over a LAN at the Gepard HIL test site.There were two major requirements for this initial integration test. The first requirement was to demonstrate the federation working over a LAN in a mode without the Gepard system running.  The second requirement was to conduct a LAN-based federation execution with the Gepard system running.  In addition, this mode had to achieve a consistent 20ms update rate from the Gepard federate to the actual Gepard weapon system.  This requirement was to support the system update rate between the radar and fire control system.Within 2 days, the team had the federation execution running and conducted an initial test with the Gepard system active and responding.  Initially there were inconsistent latencies while using the DMSO RTI-NG to pass data between the Linux-based federates.  However, with basic extrapolation techniques, this problem was solved and thus allowed the Gepard system to receive data at exactly 20ms spacing as required. With all criteria successfully met, the stage was set to continue on to the next, and most challenging phase of this effort, the WAN federation execution.3.3 WAN Federation ExecutionInitially, three options for the test team were available to pursue a WAN development, a pure Internet option, a Virtual Private Network (VPN) running over the Internet, or an ISDN connection.  Other possibilities were considered, but all were ultimately rejected for reasons such as cost and complexity.For all WAN configurations, all initial network and federation testing was performed at the contractor facility in Huntsville, Alabama.  This was initiated to use this facility as a “path-finder” location to work the issues out of each configuration before a transition to RTTC for final check-out.In addition, all federation executions were configured to run RELIABLE transport instead BEST EFFORT transport.  This decision was based on the limitations of the routers not being able to manage multicast.  The HLA help desk “How do you use the RTI over a WAN” provided all the required HLA-based configuration instructions.The first WAN establishment between organizations was a standard connection to the Internet. The federation configuration was implemented based on the previously mentioned article from the HLA help desk. Because WTD 81 was originally utilizing IP masquerading, the HLA “HelloWorld” test was successful only when the federation execution was started at the contractor site.   Once the Internet connection was established, the next step was to use a VPN over the Internet to add a layer of security.The second WAN establishment between organizations was a VPN solution over the Internet. After testing several different VPN software solutions, we chose Linux as the OS of choice for each end of the VPN. Linux was chosen for the OS because of the ease of use and availability of VPN software.  The VPN software package chosen was Tunnel Vision because of its professed increased efficiency.  Tunnel Vision required the installation and use of OpenSSL and IP forwarding. After some preliminary testing, the VPN option performed similar to the internet option by providing a 32 byte ping packet with a latency of approximately 200ms. This configuration was the most secure way of connecting and running our HLA code between the States and Germany to date.   However, due to security concerns at RTTC and a strong experience base of ISDN at WTD 81, the decision was made to continue on to the ISDN-based WAN connection.The current, WAN configuration consists of an ISDN connection between WTD 81 and the contractor facility in Huntsville Alabama. The configuration consists of a router/LAN modem combination at both the WTD 81 and Huntsville locations.  The WTD router is a Cisco 761 ISDN Router  whereas the Huntsville router is an Office Connect ISDN LAN modem made by 3COM.  The ISDN connection is currently a single B channel passing a maximum of 64 Kbit/sec. With the single B Channel configuration, the RTI-NG 1.3v3.2 was able to run HelloWorld between WTD 81 and Huntsville.  However, once the Gepard federation was established, the Gepard federate received an error message from the RTI stating that an interrupt was received during an RTI function.  This error occurs during the federation execution between RTTC and WTD 81 and during ISDN-based federation executions local to Germany. Because of this, the team decided to implement the RTI 1.3v7.  Although this modification stopped the error from occurring, this problem will be analyzed further as time permits.The federation, however, was able to execute properly utilizing the RTI 1.3v7 and the single B Channel ISDN connection.  The maximum update rate achieved was approximately 10 Hz.  Although lower than the expected 20 ms, this proved sufficient once data extrapolation algorithms were employed within the Gepard federate.Activities are currently underway, however, to establish a bonded ISDN connection.  When completed, this would double the bandwidth to 128 Kbit/sec. Due to the distributed nature of this phase, the RTTC support contractor was asked to develop a 3D visualization HLA federate capable of being configured to display the various entities of the exercise from a user-defined viewpoint.  This real-time display will be provided to both WTD 81 and RTTC personnel for exercise visualization. 3. ConclusionsThis exercise has proven that a transatlantic ISDN network is capable of supporting an HLA federation execution in support of real-time weapon system testing.   Early in the concept development of this exercise, it was noted that data throughput latencies could be the critical issue of this test.  Experiences proved that data throughput repeatability with deterministic latencies became the driving factor.  In this example, the subscribing federate could handle the latencies, if the data arrived at the same update rate.  If there was a large variance in the update rates, then this exercise could have been more problematic to execute.With the success of this exercise to-date, the team is excited about the future possibilities to test this transatlantic test configuration.  The planned activities include, the addition of the Man-In-the-Loop (MIL) target aircraft 6DOF simulation, incorporation of the second channel of the ISDN line, and an RTI-version evaluation.  As this exercise continues, the team will provide updates to the distributed test community.Author BiographiesMr. KURT LESSMANN is the Deputy Director of the Modeling and Simulation Department at Amtec Corporation.  His background includes strategic and tactical missile simulation development.  In addition, he has supported several Army weapon systems programs in distributed simulations utilizing DIS, and HLA.  He is currently the Secretary for the SISO SIW T&E PRP and is supporting Foundation Initiative 2010 in the development of the Test and training Enabling Architecture (TENA) software and Object Modeling. Mr. Lessmann has an Aerospace Engineering degree from Auburn University. Mr. UWE KROSTA is an engineer at the SID of WTD 81 since 1998 and is presently involved in the development of interfaces for simulations based on the HLA. He holds a masters degree in communication technology from the Federal Armed Forces University in Hamburg. After his military service he joined the Federal Office for Defense Technology and Procurement BWB in 1996 and participated there in a trainee program.Mr. MICHAEL T. KRAUSE, U.S. Army Redstone Technical Test Center, Huntsville, Alabama, USA, is the Lead Instrumentation Engineer for the Flight Test Branch. He is also the Lead Project Engineer for an RTTC initiative to incorporate Virtual Proving Ground technologies into open air range test capabilities and processes.  He is also a member of the Virtual Proving Ground’s Tools Focus Group. Mr. Krause has an Electrical Engineering degree from Tennessee Technological University and is currently pursuing his Master’s Degree in Engineering Management from the Florida Institute of Technology. Mr. DARRELL BENCH, US Army Developmental Test Command, Aberdeen Proving Ground, Maryland, USA, is the Program Manager for the Virtual Proving Ground developing simulation capability to support developmental testing for the US Army’s full range of weapons systems.  He has over 29 years experience working for the US Army in various positions, and has worked with his current organization for 15 years.  He is a graduate of the University of Utah and has a Master of Science degree in Computer Science from Central Texas University.