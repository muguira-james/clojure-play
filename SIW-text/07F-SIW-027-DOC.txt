The fidelity of a Real Time Forest Machine Simulator Lic. Tech. Björn LöfgrenThe Forestry Research Institute of SwedenUppsala Science ParkS-751 83 Uppsala, SwedenProfessor Kjell OhlssonHMI,IKPLinköping UniversityS-581 83 Linköping, SwedenProfessor Jan WikanderMechatronics lab, Department of Machine Design,Royal Institute of TechnologyS-100 44 Stockholm, SwedenKeywords:Fidelity, forestry machine simulator, real time simulator. ABSTRACT: It is essential to reduce the mental and physical stress on forest machine operators. The operator in a harvester cuts down one tree each 47 second, makes 12 decisions per tree and uses on average 24 functions per tree. In Sweden, we are using the Cut To Length (CTL) method, which means that the tree is cut in pieces out in the stand. This is done 1000 times a day. The solutions that come into our mind, to help the operators, are full or semi automation and other ways to improve the Human Machine Interaction (HMI). It is not practical or cost effective to initially develop automation or HMI ideas on real machines. Instead, a better solution is to use simulators. Normally, the existing forest machine simulators are used in teaching future forest machine operators. In our case, we use the simulator as a research tool. To rely on the result coming from tests with the simulator we performed a fidelity test. We conducted a time study, where a harvester operator have cut down approximately 500 trees and we have also measured data from the stand such as tree diameter, height, position, height to first live branch and tree type. We have also measured the terrain. The same stand and terrain data was implemented into the simulator and the same operator performed the same work again. The results demonstrated that there is a good fidelity between a real forest machine and the simulator. The time difference between the reality and the simulator is just ± 5 % for different work operations. Qualitatively, the results were on par. Several aspects on simulator fidelity will be discussed in the paper.1. IntroductionThe use of forest machine simulators have increased in the education of new forest machine operators and the question have been raised if it is possible to use the simulators as a research tool. The next question is if the simulators are reproducing the reality good enough to achieve reliable results. Are the fidelity and validity of a forest machine simulator good enough? More than a decade ago SISO was started for the information exchange between different companies and research organizations working with simulations and also for the reason that there was a need of standardization in the increased use of simulators. Within SISO a group called Fidelity Implementation Study Group (ISG) tried to standardize the nomenclature within simulation. Among other things they have defined what is meant by fidelity and validity [4]. Following description has been suggested:  Fidelity – The degree to which a model or simulation reproduces the state and behavior of a real world object or the perception of a real world object, feature, condition, or chosen standard in a measurable or perceivable manner; a measure of the realism of a model or simulation; faithfulness.Validity – The quality of being inferred deduced or calculated correctly enough to suit a specific application, with particular application to a model or simulations representational capability. The logical truth of a derivation or statement, based on a given set of propositions.The discussion about what fidelity and validity in conjunction with simulation have been frequently discussed during the last 15 – 20 years and an exact established definition does not exist, since there are many parameters that influence a simulation. 1.1 FidelityThe concept of fidelity relates to what extent the simulators characteristics meets the features of a real vehicle. There are no simple description of a simulator’s fidelity. There exist over twenty different definitions in the literature on different types of fidelity. Some examples of fidelity are, the equipment fidelity, the surrounding fidelity, psychological fidelity, the fidelity of the task, functional fidelity [3]. Each type of fidelity can be applicable for a specific situation, which means that it can be used in general for all types of simulations. However, together they will give, at least in two dimensions, a difference between the simulators of today and a real vehicle. These two dimensions divide the simulators into two groups depending on what kinds of cues the simulators give.- The equipment cues refer to the experienced compatibility between special features in the simulator and the real vehicle..._ The surrounding cues consists of how well the surrounding environment and movements in the surrounding is mimicked in the simulator. The fidelity is the  function of how well the equipment and the surrounding cues are describing a real vehicle. There is a distinction between real cues, measured objectivity and the cues that operator experience, which lead into to following definitions of two types of fidelity:Objective fidelity.Experienced fidelity.To be able to give a judgment of how well the forest machine simulator reproduces a real situation to a harvester operator we need to know which factors that can influence the obtained results. There are several factors concerning the human beings ability to interpret the surrounding world, perception in a virtual environment, and also the physical requirements of the simulator itself.     1.2 ValidityA simulator must emulate the real world to be able to use for evaluation of human-machine-interaction (HMI) and for new futuristic solutions. There are two levels of validity for a simulator. The first level is about how well the simulator emulates the behavior  of the operator. This is called behavior validity. The second level is about the physical data, layout and dynamic characteristics of the simulator. This is called physical validity and is in general labeling the fidelity of the simulator.Behavior validity Behavior validity is very important to take into consideration whether the research take place in a simulator or in the reality. If a simulator is used for tests it is very important that the decisions made in the simulator agrees with decisions in the reality. For a forest machine, it is important to reproduce the response that occur in the natural forest environment. There are several methods to evaluate the validity of a simulator. The best method is when you compare a simulator and a machine when they perform the same task under the same conditions.  If the numerical  values are identical on the two systems you have absolute validity. Another method, which is called relative validity, is to compare the performance between the two systems. Of course, it is possible to combine these two methods. If the simulator should be useful for research relative validity is a must, but absolute validity is not necessary [4]. This is due to the fact that research questions normally relates to the effect of independent variables rather than to  numerical values. Physical validity  The more a simulator reproduces the reality regarding use, how the response from input is presented on the screen and how it reacts on physical input, the higher grade of fidelity it has. For this reason, a simulator   which has a moving platform is said to have a  higher grade of fidelity. This does not mean that a more sophisticated simulator automatically has a higher fidelity when it comes to behavior validity than a less sophisticated simulator.  This paper presents a study of a forest machine simulator of a harvester type compared to a real forest harvester. 2. The Forest Machine SimulatorThe simulator is a real time forest machine simulator,, which means that all movements is based on the input from an operator and not on any preimplemented sequences as in a game.  All movements on the forest machine is based on physical data such as weight, length, with, friction, moment of inertia and other dynamic qualities.The simulator has 3 screens, where each screen is 2 x 1,5 m with 1400x1050 pixels on each screen (see Figure 1). The frame rate is 40 frames/s.  SHAPE  \* MERGEFORMAT Figure 1. The forest machine simulator. 3. Field testsTo be able to compare the results from the final felling operation with the simulator we needed to cut down the same stand. Beside the stand we even measured the ground structure and obstacles such as stones. To receive a better  understanding of how the operator used different functions, such as buttons and joysticks, on the harvester in his work we also measured all machine functions. We also performed a conventional time study. 3.1 Data CollectionIn total, 483 trees were measured. Each tree received a specific number, one on the diameter at the breast height, used for the time study, and a number at the buttress, used for positioning of the tree.Following parameters were measured for each tree:- Type of tree; spruce, pine or birch- The diameter at breast height- Tree height - Height to first live branch- Fault on the stem form To be able to recreate the stand in the simulator the position of each tree was measured with differential GPS with an accuracy of ± 2 cm in x-, y- and z-direction. The positions of the trees were measured after the final cutting. We also measured the position, the number of trees, assortment, diameter and length of each log in each pile. The GPS data was put into a GIS software and a coordinate was created so that the data could be transmitted into the simulator. The CAN bus (Computer Area Network) was used to measure all the functions the operator used (see Figure 2). A special program was developed to listen on the CAN bus, which is the link between the distributed computers on the machine.  The information on the CAN bus was registered 10 times each second.    SHAPE  \* MERGEFORMAT Figure 2. The computer network on the harvester Valmet 921. 3.2 Time studiesThe operator was instructed to cut down the trees according to normal routines. The operator choosed to use single side felling which means:- the machine was driving along the outer side of the stand- the trees was put down diagonally forward or into the stand- the logs were put into piles on the outer side of the machine- the trees were cut down in a 13 – 14 m wide band.3.3 Machine and operatorThe harvester machine was a Valmet 921 that was 3 years old. The operator had 15 years of experience of managing single grip harvesters.4. ResultsIn this part the results from data collection and time studies are presented.4.1 PositioningFrom the GPS data we could see where the machine had been driving, and also the position of each tree (see Figure 3, 4, 5 and 6).Figure 3.  We could also get information where the machine had been standing still when the trees were cut. The size of the round dot represented the diameter and a color represented what kind of tree it was.Figure 4. Enlarged stand with different dot size and what kind of tree each dot represented. Figure 5. The actual stand.Figure 6. View from the cab with numbers on each tree.4.2 Button and joystick functions  The buttons and the joysticks where measured in the field and in the simulator. Two measurements were performed one in the morning with 81 480 registrations and one in the afternoon with 97 952 registrations. A more detailed analysis of the registrations is presented in [1].Due to problems to listen to the CAN bus in the simulator an interval of 15 minutes was selected which represents 21 trees. The same trees in the field and in the simulator were used to make comparisons. Each working cycle starts when the harvester head is grasping around the tree just before you starts to cut.In Figure 7. one can see how different buttons where used under 21 working cycles. Figure 7. The use of buttons.As can bee seen from Figure 7, there are some large differences when working with the harvester head. One example is the use of reverse of the feeding rollers, which was used 3 times in the simulator and 17 times in the field. In the simulator the limbing and the feeding are perfect. There are no problems with slip or big branches.The top of the trees, had to be cut manually in the simulator and thereby the big difference compared to the field studies.It is harder to directly compare, as for the buttons, the use of joysticks and there deflection between the field and the simulator since the variation of deflection and time. To receive as good fit as possible between the machine and the simulator the operator set all the joystick functions in the simulator as equal as possible, such as ramps, dead band etcetera. Even though the function of the joysticks where close as in the machine you still have differences. The hydraulic system is a dynamic system in the machine and it is ideal in the simulator. You have not total conformity between the simulator and the machine. Examples how it could look like concerning one joystick function are depicted in Figure 8 and 9.  SHAPE  \* MERGEFORMAT Figure 8. Joystick function for the lifting arm in the simulator. SHAPE  \* MERGEFORMAT Figure 9. Joystick function for the lifting arm in the machine.4.3 Time studies  The same observer was used in both time studies shown in Table 1 divided into different actions.Table 1Time consumption in cmin/treeField studySimulatorDifferenceBoom out11.7110.8692.8Felling-intake15.2216.01105.1Delimbing-cutting42.1643.88104Moving the machine8.645.3262Other5.592.3442Total84.1278.4193Boom outBoom out was faster in the simulator, probably due to a lack of low vegetation or obstacles such as stones or stumps. The operator was also more careful in the field than in the simulator in order to avoid damages on the sword or the harvester head. Felling-intakeThe action felling and intake of the harvester head has been put together due to that it is hard to decide when the action intake starts. In the simulator, the time study observer can see when the operator moves the joysticks and that is the time that is registered. In the field the time study observer stands outside the machine and it is easier to separate the two actions. It took longer time in the simulator. A probably cause is that the operator made longer intakes in the simulator, since he is less sensitive in the placement of the machine. The boom was also stronger in the simulator, which means that he had been standing still a longer time at the same place. The same phenomena have been noticed in the comparison between a small and a big harvester, where the bigger harvester has a stronger boom. This also affects the time consumption for moving the machine.Delimbing-cuttingThere is a good agreement between the simulator study and the field study.Moving the machineThe time difference is strongly connected to the intake. Since the operator is standing still more frequently there are less movements of the machine. The number of movements are 13 % smaller in the simulator. The  big difference in time is connected to that it will take longer time to move the machine in the field than in the simulator, since the terrain affects the driving in the field.OtherOther refers to all other time that is needed to fulfill the work such as problems when delimbing, when drop a tree, forked stem or put stems in order. Since the delimbing has no problem and there are no fork stem or radius of crook on the stems in the simulator explains the big difference in time consumption. 4.4 Stem profiles When cutting the stand the mean stem volume, according to bucking computer in the machine, was 507 m3sub and in the simulator, according to the bucking computer in the simulator, was 710 m3sub. This big difference in volume (40 %) led to a deeper analyze why the difference occurred.The measuring accuracy of the machine To analyze the measuring accuracy of the machine, data from 46 trees in another stand was collected. The mean values from the stems are presented in Table 2. Table 2. Arithmetic mean value for test trees.Pine SpruceNumber of stems2224Height (m)24.121.3Callipered breast height diameter 32.623.7Machine measured breast height diameter 31.323.5 Manual measuring of diameters and length was conducted with a caliper and a measuring tape. The results from these measures  is shown in table 3. Table 3. Difference between manual and machineMean differenceStandard deviation Number of observationsDiameter, mm1.869.1574Length, cm-0.091.534Volume, %-0.352.668The machine measured on average the diameter, length and volume with satisfactory precision.Analyze of simulator stemsTo make an comparison on the calculation of the stem volume with different methods 50 new trees was generated with the actual stem volume method in the simulator. These trees were cut down and the volume was measured in the simulator. The result concerning the mean stem volume is presented in Table 4, figure 10 and figure 11.Table 4. Mean stem volume. In the parentheses is the difference according to the simulator.Harvester measured Brandel volume function (1990)Edgren-Nylinder volume function (1957)SimulatorPine 823 (56%)829 (56%)851 (58%)1475Spruce429    (59%)453 (62%)441 (61%)728 Figure 10. Comparison of stem volume between the machine and the simulator (pine).Figure 11. Comparison of stem volume between the machine and the simulator (spruce).A more detailed analysis of the diameter vector   (a diameter registered per dm module) for each stem along the stem revealed a systematic difference. This is illustrated for two of the stems in Figure 12 and Figure 13. These trees have been subjectively chosen to  demonstrate how the data looks like.  There are large individual differences. It is clear that all the stem profiles from the simulator have a minimum diameter of 75 mm. Figure 12. Comparison of the taper for stem 54, Scots pine, (diameter vector) measured in the simulator and machine and calculated according the Edgren-Nylinder function.Figure 13. Comparison of the taper for stem 56, Norway spruce, (diameter vector) measured in the simulator and machine and calculated according the Edgren-Nylinder function.The results from the volume calculations show the volume functions in the simulator were wrongly calculated.5. Discussion5.1 Time studiesFrom the time studies we can see that there is a good fidelity between the simulator and the machine concerning performance and time consumption. We have a difference of about ±5 % when using the boom and the harvester head. The largest time difference occurs when you are moving the harvester between two working places in the stand. This is due to that the crane is stronger in the simulator than on the machine, which means lesser movements, and you can drive the machine faster in the simulator than in reality.5.2 Buttons and joystick functionsWhen it comes to buttons we have larger differences. The differences arise above all at the delimbing of the tree. In the simulator we have ideal conditions, i.e. we have no problems with branches and there is enough feeding force.The joystick movements are rather similar in the simulator compared to the real machine. The differences that appears is that joystick movements are larger in the machine. For the telescope function and the rotator function the differences are smaller and for the swing function and the lifting function they are larger. Other differences are that the joystick movements are more jerky in the machine and the reason for that is that there are vibrations in the machine. In the simulator there are no vibrations, because there is no moving platform.5.3 Stem profilesThe analysis of the stem profiles gave a relative large difference from measured values, and a big variance due to large individual variations. In order to estimate the differences, the Edgren-Nylinder function was  implemented.6. ConclusionThe results shows that there is a good fidelity between the forest machine simulator compared to a real forest machine and that you can rely on the results that will come out from different forthcoming studies in the simulator.   7. References[1] Brander M. &  Eriksson D. 2004. Delautomatisering av kranfunktioner på engreppsskördare. Skogforsk Arbetsrapport 562. 2004.	[2]Gross, D. C. Report from the Fidelity Implementation Study Group. 99S-SIW-167. 1999.[3] Rehman, A.J. A handbook of Flight Simulation Fidelity Requirements for  Human Factors Research. National Technical Information Service, Springfield Virginia. 1995. [4] Törnros, J. (1995). Effect of driving speed on reaction time during motorway driving. Accident Analysis & Prevention, 27(4), 435-442.Author BiographiesBJÖRN LÖFGREN, who is a researcher have been working with measurement, control engineering and simulation of forest machines. He is also responsible for technology of tomorrow at The Forestry research Institute of Sweden.KJELL OHLSSON, who is a professor of Human Machince Interaction at Linköping University have been working with behavioral studies as well as design issues in all kind of simulators. He is also a research director of the Swedish Human Factors Network. JAN WIKANDER is professor in Mechatronics at the Royal Institute of Technology in Stockholm where he is also heading the Department of Machine Design. His research interest include control of mechatronic systems, integrated and holistic design methods for mechatronics and also simulation of mechatronic systems, e.g. simulation of surgical procedures including mechatronic devices.    ECUVMU 512CAN2 250KbCAN1 250KbMXUVMU 512HTUPrinter BoomHarvester  headPCU or MPU CAN 3 250KbAvslutaValmetMHCJoystick 878787VCUVCUVMU 512ERICSSONmöhlögjhkldfgklhjsklfghlkfgklhjdfghjkldjklhdjklhdkljhljdklfghkldjgflkhjdklgjhkldjRS 232VBUMJUSample120010008006004002000250200150100500Lifting arm - simulatorSample120010008006004002000250200150100500Lifting arm - machine