An Analysis of the Effects of Digitized Terrain Errors on Geometric PairingBradley C. SchrickerAT&T Government Solutions, Inc.11301 Corporate Blvd.Suite 110Orlando, FL 32817407-658-6908 HYPERLINK "mailto:bschricker@att.com" bschricker@att.comLouis FordIcon Systems, Inc.3505 Lake Lynda Dr.Suite 119Orlando, FL  32817407-658-4999 HYPERLINK "mailto:lford@iconsystems.net" lford@iconsystems.netKeywords:OneTESS, geometric pairing, geo-pairing, digitized terrain, terrain, DTED®Abstract: The One Tactical Engagement Simulation System (OneTESS) is the U.S. Army’s vision for the next generation tactical engagement simulation system (TESS), capable of supporting Force-on-Force (FOF) and Force-on-Target (FOT) training and testing for all levels brigade and below at homestation, combat training centers (CTCs), and deployed sites.  Current TESS has relied upon the Multiple Integrated Laser Engagement System (MILES) for a number of years, using a laser to pair the shooter to the potential target(s).  OneTESS will use a pairing method called geometric pairing (geo-pairing), which uses a set of information about both the shooter and target, such as locations, weapon orientations, velocities, and weapon projectile velocities, to resolve an engagement.  A previous paper [1] introduces various potential sources of error for a geo-pairing solution.  This paper goes into greater depth regarding the impact of errors that originate within digitized terrain representations, beginning with a short introduction into the OneTESS.  The next section will explain the characteristics of digital terrain expected to be used by OneTESS followed by a mathematical analysis of the impacts of that representation.  A summary and conclusion containing recommendations will close this paper.                            IntroductionLegacy tactical engagement simulation systems (TESS) have typically used lasers to pair a shooter and target during a simulated engagement.  While proven to augment training through the decades of its use, the laser has numerous weaknesses for this application.  As such, attempts have been made – and are ongoing – to provide the Army with an improved system that does not rely solely upon lasers to resolve tactical engagements.  This paper, as part of an ongoing series of analysis papers, addresses the issues involved with geometric pairing with regards to terrain representation.The following section begins with a detailed description of the OneTESS program.  OneTESS has implemented geo-pairing for demonstrations that took place in July of 2005, December of 2005 at the Interservice/Industry Training, Simulation & Education Conference, and February of 2006 on Capitol Hill in Washington, DC, and thus, provides a perfect context for the subject matter presented herein.The next section provides an explanation of terrain representations, particularly those that come from Digital Terrain Elevation Data (DTED®).  That is followed by an analysis of how errors in the DTED® data can negatively affect the outcome of a geo-pairing algorithm.  The conclusion provides a summary of the paper, and interpretation of the analysis, and suggestions for overcoming the potential sources of error stemming from terrain representations when implementing geo-pairing.OneTESSOneTESS is the Army’s program for the next-generation of TESS.  For greater context, consider that live training for military purposes dates back millennia [2].  Hand-to-hand combat drills under highly constrained conditions and target practice likely have histories as long as that of warfare, itself.  With the introduction of the Multiple Integrated Laser Engagement System (MILES) in the 1970s, live, tactical training took a quantum leap forward.  For the first time, soldiers could conduct force-on-force training under safe and, at the same time, relatively unconstrained conditions, closely reflecting the conditions experienced during actual warfare.  The application of what was then state-of-the-art laser technology enabled this advance, but this technology now faces two significant disadvantages: Lasers cannot represent indirect fire, or Non-Line-of-Sight/Beyond-Line-of-Sight (NLOS/BLOS) engagements without additional support (such as what is provided by Simulated Area Weapon Effects – Radio Frequency (SAWE-RF)Opaque and translucent obscurants that do not stop bullets, such as foliage and fog, can block laser beamsAs such, OneTESS will support Force-on-Force (FOF) and Force-on-Target (FOT) training exercises at the Brigade level and below in all Battlefield Operating Systems at Homestation, maneuver Combat Training Centers, and deployed sites using technologies other than just lasers to pair shooters to the potential targets.  As part of these goals, OneTESS will simulate a multitude of different engagements, proper doctrines, and weapon capabilities as well as stimulate detectors, sensors, monitors and countermeasures [3].  As mentioned previously, in legacy TESS, the most common method of pairing the shooter to potential targets is with the use of infrared laser beams.  However, this paper has already identified weaknesses of this approach.  Thus, OneTESS will use a pairing method called geometric pairing (geo-pairing).  Geo-pairing uses a collection of data about the shooter, the target, and the terrain.  That data includes:Location of the shooterLocation of the targetTime of the trigger pullCharacteristics of the weapon and its ammunitionOrientation vector of the weaponAtmospheric conditionsTerrain dataTerrain representations, or rather the accuracy of such, greatly impact the accuracy with which a geo-pairing algorithm can pair a shooter to its targets.  The following section describes typical terrain representations that likely would be used with TESS in general and OneTESS, specifically.Terrain RepresentationsAny geo-pairing solution requires the use of digital terrain data.  While the elevation of any individual player could be obtained from other sources – such as Global Positioning Systems (GPS) or altimeters – a digital representation of the terrain features is required for comparison with the fly-out models of munitions to determine the point of impact for a shot.Terrain representations for M&S have a long history, dating back to the 1950’s for early flight simulations.  Those systems used terrain boards, or model boards, as the source of terrain representation.  These boards were highly detailed physical models of a specific terrain with a video camera affixed above or beside.  As the training pilots would travel through their synthetic environment, the camera would move along the terrain board in a corresponding fashion, giving the illusion that the pilot was actually flying above the terrain.  An example of such a system is shown in Figure 1 below. SHAPE  \* MERGEFORMAT Terrain representation has evolved many steps since that time, now using digital representations of continuous terrains.  Among the most commonly used representations – and perfectly suitable for the topic of this paper – is called Digital Terrain Elevation Data (DTED®).  In support of military applications, the National Geospatial-Intelligence Agency (NGA) has developed standard digital datasets, which is a uniform grid of terrain elevation posts which provides basic quantitative data for systems and applications that require terrain information.  SHAPE  \* MERGEFORMAT Figure 1.  Terrain board for a flight simulator [4]DTED® Level 0 elevation post spacing is 30 arc second, which is nominally one kilometer.  DTED® Level 0 was derived from NIMA DTED® Level 1 to support a federal agency requirement. DTED® Level 0 may be of value to scientific, technical, and other communities for and applications that require terrain elevation, slope, and/or surface roughness information. It allows a gross representation of the Earth's surface for both general modeling and assessment activities. Such reduced resolution data is not intended for automated flight guidance or other precision activity involving the safety of the public. DTED® Level I is the basic medium resolution elevation data source for all military activities and systems that require landform, slope, elevation, and/or gross terrain roughness in a digital format.  DTED® Level 1 posts have a uniform spacing of 3 arc seconds, which is approximately 100 meters.  The information content is approximately equivalent to the contour information represented on a 1:250,000 scale map. DTED® Level 2 is the basic high resolution elevation data source for all military activities and systems.  DTED® Level 2 is a uniform matrix of terrain elevation values with post spacing of one arc second, which is about 30 meters.  Due to extremely sparse area coverage there is no catalog listing for DTED2. The information content is equivalent to the contour information represented on a 1: 50,000 scale map. Distribution of DTED® and the Digital Data Products catalog is authorized to the Department of Defense, United States Department of Defense (DoD) contractors, and to U.S. Government agencies that support DoD functions, by authority of the Director, National Imagery and Mapping Agency, 30 May, 1990 [5]. Figures 2 and 3 below show how much detail can be achieved by using DTED® Level 5.  Figure 2 shows a photograph of Mt. Fuji in Japan while Figure 3 shows the terrain representation of the same area at DTED® Level 5.Figure 2.  Photograph of Mt. Fuji [6]Figure 3.  DTED® 5 image of Mt. Fuji [7]The following section provides an analysis of how errors in the terrain representation can affect the outcome of a geo-pairing algorithm.Mathematical AnalysisAbsolute vertical accuracy becomes an issue when the elevation of shooters and targets is determined through sensors – such as, GPS or altimeter – while the elevation of terrain features is determined by the database.  In this scenario, the action taken as the result of an absolute vertical error is to shift the terrain up or down relative to the target so that the target does not seem to hover above the ground or reside buried beneath it.  Instead, when considering where a round intersects the terrain, the calculation will be as if the shooter were suspended some distance in the air or buried some distance underground, as shown in Figures 4 and 5 on the following page.  In the former case, the round may clear terrain features that would not have been cleared in actuality.  In the latter case, the terrain intersection algorithm itself may not fly out the round at all if it begins with an elevation that is below ground level.  The former case is a fairly low probability and the latter case can be accommodated with some common-sense error checking in the terrain intersection algorithm.The issue of absolute vertical accuracy also affects the range of a shot, but in a different manner.  In this case, the question arises whether a particular shot “cleared” an object in the terrain database.  Consider the case of an artillery weapon shooting just over the top of a large hill or mountain.  The shot could incorrectly be calculated to hit the obstacle if the digital terrain presents the height as greater than actual.  Conversely, the shot could incorrectly be calculated to clear the obstacle if the digital terrain presents the height as less than actual.  Since very few shots attempt to clear large obstacles by less than 16m, this error source is not considered a major contributor to the overall reliability of the geo-pairing process.The more important issue with regard to OneTESS operations is that of relative vertical accuracy.  This concerns the consistency of the database with itself, or the consistency with which the database records elevations from one data point to the next.  Relative vertical accuracy errors can produce the same sorts of effects as absolute vertical accuracy errors – that is, the round clearing or hitting a terrain feature that it should not clear or hit.  Errors in relative vertical accuracy can produce other, more damaging effects as well.  If the shooter is erroneously taken as being at a higher point than it actually is, the correct aiming solution for the soldier will result in the round traveling further than it should, potentially missing the target.  And, of course, if the shooter is erroneously taken as being at a lower point, the round will be shorter than the real-world shot, and again the target could be missed.  False hits are also possible, but the greater concern is the false misses, since they will contribute to negative training. EMBED PowerPoint.Slide.8  Figure 4.  Shooter hovering above ground EMBED PowerPoint.Slide.8  Figure 5.  Shooter buried beneath groundFor a weapon like the M203 grenade launcher, a 300m shot could be affected by relative vertical accuracy errors as follows.Reconsider the information presented in the previous section regarding how DTED® represents terrain in digital media.  Elevation posts spaced at specific intervals show the elevation above sea level of the terrain at that location.  However, no data exists for the terrain areas located between the posts.  This missing data, for lack of a better term, is chiefly responsible for the problems that a geo-pairing solution encounters.As mentioned in the previous section, DTED® Level 5 data is the densest of the above mentioned data, but it is questionable whether even this very dense data is sufficient for MOUT operations. EMBED PowerPoint.Slide.8  Figure 6.  Red line shows terrain representation EMBED PowerPoint.Slide.8  Figure 7.  Red line shows terrain with double elevation postsWith 30m posts (as in DTED® Level 2), highly localized terrain features could be completely omitted from the terrain database.  Figure 6 above clearly illustrates this phenomenon, as the red line shows the terrain representation delimited by the dotted-line elevation posts.  However, Figure 7 demonstrates how much more detail is gained by doubling the number of elevation posts.  Note how much more closely the red line follows the contour of the terrain in Figure 7.  Even more telling is the detail illustrated in Figure 8 below.  Again doubling the number of posts has a significant impact upon the concurrence between the terrain representation shown by the red line and the actual terrain.  Ultimately, there exists a resolution for terrain representation that is adequate for most locations at which the Army would train.   EMBED PowerPoint.Slide.8  Figure 8.  Doubling the number of elevation posts, againConsider the possibility of a 2m-tall berm located between 2 posts.  For shots with a high angle of attack – or, angle of incidence – the berm is not a factor.  But a shot traveling between these posts, starting at an altitude of 4m and heading toward the ground at an angle of 7.6 degrees – that is, a shot that would clip the top of the berm as it is headed for a point of impact at the next data point – will be incorrectly calculated to impact at that post point rather than at the berm.  The impact point will be 15m too long.  For all direct fire weapons, missing elements of this sort will have the effect of artificially increasing the lethality of the weapon to some degree.  Some indirect fire weapons that are frequently used for low angle-of-attack fire – such as, the Mk19 GM – would also be affected.In addition, if we imagine our hypothetical berm moving closer to one of the posts (data points), as it moves closer it effects steeper angles of attack.  At 2m from the posts the berm effects incoming fire with angles of attack of 45 degrees or less (the height of the berm = the distance to the point, so tan-1(1) = 45 degrees).The effect of decreasing the post spacing, while increasing the potential fidelity of the adjudication process and eliminating some of the errors as described above, creates the difficulties of storage and processing on the player unit.  With regard to storage, assuming the same precision – or bit depth – the required space to store a database increases as the square of the number of points per linear measure.  So, a database with 1m posts will require 302 or 900 times as much space on the player unit as the same area digitized on 30m posts.  The increase in lookup time and cycles depends on the search and retrieval method. All basic operations on binary trees (including searching, our operation of interest here) require O(log2(n)) time.  Consider two terrain representations, the first with a 30m resolution and the second with a 1m resolution.   If the first terrain has 1600 elevation posts, then the second terrain would have:	1600 • 900 = 1,440,000 postsThe complexity of the first terrain would be bound as:	O1 (log2 n),	O1 (log2 1600),	O1 (≈10.64)However, the complexity of the second terrain would be calculated as:	O2 (log2 1,440,000),	O2 (≈20.46)To determine the difference in complexity in terms of a factor, divide the second complexity bound by the first:	O2 / O1,	20.46 / 10.64,	≈1.92Thus, a 1m database will take, on average, about twice as long to do terrain intersection algorithms.  Since a terrain intersection algorithm may need to run thousands to perhaps tens of thousands of times for a single shot, doubling the latency for every lookup could multiply into a huge latency over the course of the entire engagement.This analysis clearly demonstrates the tradeoff involved when using a terrain representation that has a higher resolution.  While accuracy is gained in the ability to model the terrain at a larger number of elevation posts, the time required to execute the intersection algorithms necessary to determine munition impact points increases dramatically.Summary and ConclusionIn conclusion, it is obvious how detrimental errors in the terrain representation can be to a geometric pairing solution for resolving simulated tactical engagements.  The effectiveness of a geo-pairing algorithm depends on the algorithm’s ability to accurately determine the impact point of a munition upon a terrain representation.  If that terrain representation is not accurately defined, then the algorithms will calculate those impact points incorrectly.  This will clearly result in engagements that are not correctly resolved.Most important to the geo-pairing algorithm is the elevation of the terrain.  This is the value that is largely responsible for determining where on the terrain an impact took place.  Figure 4 plainly shows how, depending on the spacing of the elevation posts, the representation of a terrain can either be well above or well below the actual terrain that it represents.  Errors such as this would often result in erroneous hits or misses, strapping the system of its dependability.A potential solution to this is to use terrain data that has a much higher resolution.  That is, the elevation posts are spaced at much closer intervals.  Figures 5 and 6 illustrate how greatly the doubling of elevations posts improves the resolution of the terrain representation.  By simply doubling the posts, the representation follows the terrain in a much truer manner.  This added resolution would help a geo-pairing algorithm by not only accounting for a greater number of known data points, but by also minimizing the error between the data points in all but the most extreme cases.Unfortunately, this increase in resolution comes at a demonstrated price – the computing resources necessary to work with such highly detailed terrain representations.  The added complexity imposed upon an algorithm by increasing the DTED® level could cause the portions of the algorithm that pertain to the terrain representation to take vastly longer to execute.  When considering a simulation system where timing tolerances could be measured in milliseconds, this difference could not only have an effect upon the results, but that effect could be profound.Thus, it is likely that an optimal solution will have to be determined through many vigorous trials that will strive to find the balance between terrain resolution and algorithm complexity under most circumstances.  Some locations with have terrain characteristics that present unavoidable problems with resolution that no DTED® level will be able to practically address.  But, under most terrain conditions that the Army is likely to encounter during training, some optimized solution should be achievable.  A balancing act such as this may require some sort of optimizing technique as a genetic algorithm or similar approach.  However, a truly acceptable solution from all different angles should not be out of our reach.References[1]	Ford, Louis, and B. Schricker, “Engagement Resolution via Geo-Pairing:  An Identification and Analysis of Potential Error Sources,” Proceedings of the 2005 Fall Simulation Interoperability Workshop, Orlando, FL, September 2005.[2] 	Appian, “The Civil Wars”[3]	“One Tactical Engagement Simulation System (OneTESS),  HYPERLINK "http://www.peostri.army.mil/PRODUCTS/ONETESS/" http://www.peostri.army.mil/PRODUCTS/ONETESS/.[4]	“Section 13 – Flight Simulation,”  HYPERLINK "http://accad.osu.edu/~waynec/history/lesson13.html" http://accad.osu.edu/~waynec/history/lesson13.html, October 14, 2005.[5]	“Digital Terrain Elevation Data [DTED],” Federation of American Scientists,  HYPERLINK "http://www.fas.org/irp/program/core/dted.htm" http://www.fas.org/irp/program/core/dted.htm, October 14, 2005.[6]	“DTED Image,”  HYPERLINK "http://www.kac.jp" http://www.kac.jp, October 14, 2005.[7]	“Google Earth (application),” found at  HYPERLINK "http://www.google.com" http://www.google.com.Author BiographiesBradley Schricker is a Software Engineer with AT&T Government Solutions, Inc., currently serving as the Requirements Lead on the One Tactical Engagement Simulation System (OneTESS) project.  He has nearly eight years of experience in Modeling and Simulation, focusing his efforts in the areas of distributed simulation, discrete event simulation, virtual environments, and behavior representation.  Mr. Schricker received his Bachelor of Science degree in Computer Science with a minor in Mathematics from Florida State University in 1998 and is currently pursuing a Master of Science degree in Modeling and Simulation from the University of Central Florida.Louis Ford is a Project Engineer for Icon Systems, Inc., working on modeling and simulation technologies in the live domain.  He has worked on numerous simulation, space, and missile programs and is currently working on the OneTESS program.  Mr. Ford received his Bachelor of Science degree in Industrial Engineering from the University of Central Florida in 1985 and a Master of Arts degree in Religion from Liberty Baptist Theological Seminary in 2000.  He is currently working towards a Master of Science degree in Computer Science from Rennselaer Polytechnic Institute, expecting to graduate in the Fall of 2006.