SEIT: A Mixed Network Architecture to Support Distributed TestingMichael J O'ConnorITT Industries6767 Old Madison Pike, Suite 160Huntsville, AL 35806256.964.1470 HYPERLINK "mailto:michael.oconnor@itt.com" michael.oconnor@itt.comTim ClardyUS Army Redstone Technical Test CenterCSTE-DTC-RT-E-SARedstone Arsenal, AL  35898256-876-5555 HYPERLINK "mailto:tclardy@rttc.army.mil" tclardy@rttc.army.milKeywords:DIS HLA DREN Gateways Network TestingAbstract: The Virtual Proving Ground (VPG) is US Army Developmental Test Command’s program to link the capabilities of the individual test centers.  As part of the VPG the Synthetic Environments working group created the Synthetic Environment Integration Testbed.  This program has conducted three test events.  Creating a simulation network to support the SEIT objects was a challenge.  SEIT uses a mix of DIS and HLA based Federates.  SEIT links seven test centers together.  The test centers are connected via the High Performance Computing Modernization Program’s (HPCMP) Defense Research and Engineering Network (DREN).  A key decision for the program was weather to send DIS and HLA traffic over the network or just HLA.  The paper describes the program requirements and rational for choosing HLA only.  The paper also describes the components and configuration required to set up the network including specific RTI parameters.  A number of lessons where learned in the creation and execution of the SEIT network.  1. IntroductionThe key to success of any distributed test is the network linking the simulations.  The network for the US Army Developmental Test Command’s Virtual Proving Ground (VPG) Synthetic Environment Integrated Testbed (SEIT) initiative linked seven test centers.  SEIT presented several challenges to creating a distributed simulation network including a mix of simulations using DIS and HLA.  This paper will describe SEIT, the network requirements, options, and solution.  Additionally we will address specific problems in setting up and using the network.1.1 SEIT backgroundThe United States Army Test and Evaluation Command (ATEC) through the US Army Developmental Test Command (DTC) is sponsoring the development and application of a Synthetic Environment capability operating in a distributed test framework to support the testing of technologically advanced and complex Army systems that support today’s Warfighter.  Current and Future Forces are being challenged to operate in increasingly dynamic and challenging Battlefield environments, while facing opposition forces employing asymmetric threats.  To face this challenge, DTC is engaged in a program to tie the Command’s geographically dispersed Test Centers together to benefit from the resultant synergies realized from multiple commodity specific test capabilities functioning in a an integrated and interactive framework.  The distributed test capability is supported by live, virtual and constructive test tools developed through DTC investment in instrumentation and the Virtual Proving Ground (VPG), while leveraging program funds to create program-specific test capabilities.  Many of these synthetic environments and test capabilities are integrated into a standardized and interactive Synthetic Environment Integrated Testbed (SEIT).SEIT integrates environmental components currently in use at DTC test centers supporting commodity specific testing and provides standard and optimized terrain and meteorological effects.  High resolution environmental representations include the relevant Radio Frequency (RF) environment for testing Army communications gear, an Infrared (IR) environment for testing IR-based targeting sensors and Chemical and Biological (CB) Threat environment for testing CB agent sensors.  Also integrated into the SEIT is a mobility server for determining platform mobility effects due to terrain, a robotics intelligence model to emulate the actions of an autonomous Unmanned Ground Vehicle (UGV) and an engineering-level parachute simulation that enables the prediction of an air dropped logistics payload relative to actual or simulated environmental inputs.  These high resolution test components are immersed and interact with a relatively low resolution constructive semi-automated forces (SAF) model.  The SAFs used in SEIT, One SAF Testbed Baseline (OTB) and Janus, provide an overarching environment that provides blue and red force structures and doctrinally correct tactical scenarios as well as low fidelity tactical platforms to associate virtual or live test systems.1.2 SEIT BuildsThe SEIT program began in early 2003.  The SEIT initiative conducted three builds in 2003.  These where named Initial Operating Capability (IOC) 1, 2, and 3.  IOC 1 was run over a LAN at Redstone Technical Test Center on Redstone Arsenal in Huntsville, AL.  This allowed the participants to integrate with out the issues related to distributed sites.  IOC 2 was the first SEIT build distributed across multiple test centers.1.3 ParticipantsThe SEIT network linked seven DTC test centers together.  The test centers where located in 5 states.  The sites participating where Aberdeen Test Center (ATC), Redstone Technical Test Center (RTTC), Aviation Technical Test Center (ATTC), White Sands Missile Range (WSMR), Electronic Proving Grounds (EPG) at Ft. Huachuca. Yuma Proving Grounds (YPG), and West Desert Test Center at Dugway Proving Grounds (DPG).  Each test center provides unique testing facilities. 2. Network RequirementsSEIT uses existing capabilities of the DTC test centers.  This simulations are a mix of DIS and HLA compliant federates.  The network selected for SEIT would have to support both protocols.  The LANs at each test center had to have both DIS and HLA traffic.All traffic had to use the HPC Defense Research and Engineering Network (DREN).  The DREN is a high speed high capacity network linking DoD research and engineering sites.  The DREN configuration is different at each site.  At some sites the DREN connection was co-located with the simulations.  At other test centers the DREN was reach through the post LAN.  The network designed for SEIT would have to deal with the large number of routers between sites.3. Network optionsThe network configuration for the SEIT IOC 3 seeks to minimize configuration of network devices and minimize traffic across the WAN.  The RTI used for SEIT IOC 1 was the MäK RTI.  The MäK RTI has also been selected for IOC 3.  All discussion here is based on the operation of the MäK RTI and associated products.  The base Federation Object Model (FOM) for SEIT IOC 3 is the Real-time Platform Reference (RPR) FOM.  Gateways exist to convert between he HLA RPR FOM and DIS.  There are two options for distributing the simulation data.  The first is to run both protocol messages across the WAN with a single DIS/RPR gateway.  This approach has several disadvantages:Data is sent across the WAN twice, once as DIS and once as HLA,Data sent from a DIS federate on a LAN has to cross the WAN to the site the DIS/RPR gateway resides and back across the WAN to reach a HLA federate on the same LAN doubling the latency,DIS uses broadcast traffic which is generally blocked by routers and would require advanced configuration changes at first access routersThe second approach is to only run HLA across the WAN.  This addresses the disadvantages of running both protocols across the WAN:Data is only sent across the WAN once,Data on the same LAN has the same latency regardless of the protocol, no data has to make more than one hop,HLA multicast traffic is easier to route.The primary disadvantage to using only HLA across the LAN is the additional licenses required to support the exercise.  Each site that is using DIS must have a DIS/RPR gateway.4. Network usedFor SEIT IOC 3 the decision was made to only send HLA traffic across the WAN.  This is accomplished by having a DIS/RPR gateway at each site.To reduce WAN traffic, sites with multiple HLA Federates will use the UDP Forwarder.  The UDP Forwarders make it possible for the multi-cast traffic to be sent across the WAN once for each site.  Figure 1 shows an example of how the multi-cast traffic is sent.  The data goes to each federate on the LAN normally to each federate.  Instead of sending the multicast traffic to all federates across the WAN, the federated sends the data to the UDP Forwarder on the distance LAN.  The UDP forwarder then sends the data to all the federates on its LAN.  The default behavior is to use a single multi-cast address for all best-effort traffic.  It is possible to assign each class (object or interaction) to a separate multi-cast group.  This does not affect bandwidth, but does potentially reduce the traffic received by a federate.  For SEIT IOC 3 only DPG will have multiple HLA Federates and therefore will be the only site to run a UDP Forwarder. EMBED PowerPoint.Show.8  Figure 4-1: Multi-cast ExampleFigure 3.5.1-2 shows how DIS traffic would be sent.  All local DIS federates revive the data via broadcast.  The local DIS gateway translates the DIS PDUs into RPR FOM objects or interactions and then sends them via HLA.  Local HLA federates receive the messages via multi-cast.  The data is also sent to the UDP Forwarders on each distant LAN.  The UDP forwarders then republish on the local multi-cast address.  The local DIS/RPR gateways will receive the objects and interactions and republish as DIS PDUs using broadcast. EMBED PowerPoint.Show.8  Figure 4-2 : DIS ExampleThe previous discussion focused on HLA objects and interactions sent best-effort.  This is very similar to DIS which uses broadcast.  HLA also supports reliable transport.  If reliable transport is select for an object attribute or interaction parameter it is sent from the sending federate to the receiving federate.  The message will be sent as many times as there are federates plus one.  The sending federate sends the message to the TCP Forwarder in the RTI Exec.  The TCP forwarder then sends the message via TCP to all federates.  Figure 3 is an example of reliable transport.  Reliable transport should only be selected in limited cases because of its impact on bandwidth.  Selecting reliable transport does not have any impact on the way the DIS traffic is sent.  In the example in Figure 3, the same data is sent across the WAN nine times.  It is possible to remove the TCP Forwarder from the RTI Exec and replicate it at each site similar to the configuration of UDP Forwarders.  This would reduce the number of times the message was sent across the WAN.  Separating the TCP Forwarder from the RTI Exec would require some development. EMBED PowerPoint.Show.8  Figure 4-3 : Reliable Example5. Network performanceAs previously mentioned, the interconnecting medium between the sites utilized the DREN which is a high capacity network managed by the High Performance Computing Modernization Office (HPCMO) with service being provided on MCI’s vBNS backbone network.  The table provided below list the sites that participated in the demonstration, their location and the DREN Service Delivery Point (SDP) at that location.  SITELOCATIONDREN SDPAberdeen Test Center (ATC)Aberdeen Proving Ground, MDOC-12 (622 Mbps)Aviation Technical Test Center (ATTC)Fort Rucker, ALDS-3 (45 Mbps)West Desert Test Center (WDTC)Dugway Proving Ground, UTDS-3 (45 Mbps)Electronic Proving Ground (EPG)Fort Huachuca, AZDS-3 (45 Mbps)Redstone Technical Test Center (RTTC)Redstone Arsenal, ALOC-3 (155 Mbps)White Sands Test Center (WSTR)White Sands Missile Range, NMOC-3 (155 Mbps)Yuma Test Center (YTC)Yuma Proving Ground, AZDS-3 (45 Mbps)It is important to understand that the service listed at the DREN SDP is a “shared community connection” and only a percentage was used for the demonstration.  The DREN SDP also supports independent operations both within the current organization and at external organizations thereby requiring additional coordination when allocating DREN service.The overall network performance for SEIT IOC 2 and 3 met expectations.  The bandwidth required to support both IOCs was easily meet by the DREN.  Most of the networking problems encountered where the result of test center specific router and network configurations.  Bottle necks at the gateways are a potential problem for networks using this type of architecture.  All of these problems where resolved.5.1 Network ThroughputThe network throughput included the transmission of voice, video and data integrated across the WAN communication links and aggregating at the Inter-Range Control Center (IRCC) at White Sands Test Center.  This aggregation of communication links at the IRCC from the remaining six participating sites resulted in a network utilization of approximately 20 Mbps.5.2 Network IssuesThe network issues and lessons learned encountered during these demonstrations are grouped into the following three areas:  WAN Connectivity, Network Infrastructure, and Simulation Interoperability.  WAN connectivity addresses how the network service path traverses external Organization’s autonomous systems and reaches the edge of the participating organization.  Network Infrastructure relates to the point where the network service enters the organization and eventually arrives at the participating site’s location.  Simulation Interoperability pertains to the communication and access method deployed for exchanging information between the sites during the demonstration.  Also, with any distributed demonstration of this magnitude, coordination among all the participants with differing time zones and locations as well as with external organizations is always a difficult endeavor.For WAN Connectivity, a network path examination was conducted to determine how the information flowed across the network and identify existing security measures implemented for safeguarding information.   At all participating sites, the DREN SDP was not located on-site and required the use of an intermediary organization’s network infrastructure to provide access to the DREN SDP.  The network elements in the intermediary network infrastructure consisting of routers, access-control lists (ACLs), switches, network intrusion devices (NIDs), etc. required both coordination and configuration changes to support the demonstrations.  There were occurrences where uncoordinated configuration changes were performed in the intermediary network infrastructure resulting in sub-optimal routing paths or complete loss of service.In Network Infrastructure, each participating site had a different method, topology, access technologies and vendor equipment for moving packets across their network.  These differences in the network increased the complexity when configuring network devices, predicting traffic flow and troubleshooting network anomalies.Once the WAN Connectivity and Network Infrastructure were established, Simulation Interoperability activities were conducted to allow M&S applications at the sites to communicate.  The simulation gateways at the sites exchanged unicast traffic across the backbone and providing both multicast and broadcast on the Local Area Networks (LANs) that were participating in the demonstrations.5.3 Gateway PerformanceA key tool for the SEIT network is the MäK DIS to RPR FOM gateway.  The SEIT network architecture described in section 4 showed a DIS to RPR gateway at each test center.  These gateways had the potential to be network bottlenecks as all simulation traffic had to pass through them twice.  Because the DIS and HLA traffic where on the same physical network, the computers running the gateway had a single network interface card (NIC).  The large volume of DIS and HLA traffic caused the computer to drop DIS packets.  When the gateway times out a DIS entity it deletes the corresponding HLA object.To prevent the HLA objects from being deleted, the DIS timeout for the Gateway was set to 75 seconds.  The time threshold for DIS entities was set for 15 seconds for SEIT.  The 75 second timeout for the Gateway prevented the HLA objects from being deleted.  A faster computer may have reduced the number of dropped packets.  Another solution would be to segregate the DIS and HLA traffic on two physically separate LANs.  This would also require that the computer running the gateway have two NICs.6. Future workThe SEIT initiative continues to support distributed testing at the US Army DTC test centers.  Distributed Test Event 4 is scheduled for mid 2004.  For the initial SEIT capabilities a 1.3 specification RTI was used.  SEIT is considering moving to a 1516 specification RTI.  SEIT will also be adding more test centers and federates.7. ConclusionsThe SEIT distributed network was developed with a relatively low cost and accelerated schedule to meet the pressing requirement for FCS testing.  Development and implementation costs were controlled by leveraging mature capabilities and high quality expertise throughout DTC.  SEIT has provided an avenue for demonstrating the usefulness of distributed M&S-based test technologies developed through the DTC VPG and has greatly advanced ATEC distributed testing.  Additionally, the resulting capability has a much broader application to joint service research and development, test and evaluation, and training applications and systems.Author BiographiesMichael J. O’Connor is a Principal Simulation Architect with ITT Industries Advanced Engineering & Sciences Division.  He received a bachelor of computer engineering from Auburn University in 1987 and a masters in computer science from the University of Alabama in Huntsville in 1991.  Mr. O’Connor has been involved in the distributed simulation community for over ten years.  In that time he as served as the Editor of the Real-time Platform Reference Federation Object Model (RPR FOM), Chair of the SISO Standards Activity Committee, and currently serves as the SISO Executive Committee Vice Chair.  Mr. O’Connor is currently applying the standards developed by SISO in his role as simulation integration lead for the US Army Test and Evaluation Command’s Virtual Proving Ground Synthetic Environment Integrated Testbed (SEIT) initiative.TIM CLARDY is a Senior Electronics Engineer at the US Army Redstone Technical Test Center, Redstone Arsenal, AL.  He is the Co-Chair of the Developmental Test Command’s (DTC) Synthetic Environments Focus Group (SEFG), Co-Lead of the Synthetic Environment Integrated Test bed (SEIT) demonstration project, and Technical Lead for the Signature’s Core Area.  Mr. Clardy has over 10 years experience in modeling and simulation, distributed testing, computing technologies and electro-optic sensors and missile systems.  Mr. Clardy is also a Cisco Certified Network Professional (CCNP) and Cisco Certified Design Professional (CCDP).