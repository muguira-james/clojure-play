WEAPONS DESIGN ANALYSIS USING 1-METER TERRAIN RESOLUTION BATTLEFIELD SIMULATORSWolfgang Baer Bard Mansager William G. KempleNaval Postgraduate School,Monterey, CA 93943 HYPERLINK "mailto:baer@cs.nps.navy.mil" baer@cs.nps.navy.mil HYPERLINK "mailto:bkmansag@nps.navy.mil" bkmansag@nps.navy.mil HYPERLINK "mailto:kemple@nps.navy.mil" kemple@nps.navy.milMaj Jim Ilingsworth Major James IllingworthNaval Postgraduate School TRAC_MTRY TRADOC Analysis Center - MontereyMonterey, CA 93943 HYPERLINK "mailto:illingwj@trac.nps.navy.mil" illingwj@trac.nps.navy.milKeywords:High Resolution Terrain, Real-time Simulation, Line-of-Sight, Weapon DesignABSTRACT:  Simulation of battlefield systems in operational scenarios require the calculation of the probability of detection from the presented target area to properly evaluate their performance and effectiveness on the battlefield.  In the past so called “high resolution” simulations such as JANUS and the Combined Arms and Support Task Force Evaluation Model (CASTFOREM) typically performed such calculations using geometric line-of-sight (GLOS) on 25-meter terrain resolution and model micro-terrain effects statistically.  Results provided by such simulations do not account for the individual soldier’s ability to take advantage of local cover and concealment in an individual engagement while carrying out tactical missions.	New 1- meter terrain analysis tools developed by personnel at the Naval Postgraduate School (NPS), the U.S. Army TRADOCTraining and Doctrine Command (TRADOC), and independent contractors have allowed substantial improvement in our ability to simulate individual engagements and assess the effects of micro terrain features on tactical mission success. .  This paper introduces the architecture and fast ray-tracing algorithms capable of calculating realistic 1- meter terrain perspective views in real-time on PC based platforms.  We then describe how this algorithm is extended to perform view- based line-of-sight calculations (VLOS) and replace the old GLOS approach.  This new technique calculates a small perspective view for each simulation player pair of interest.  The perspective view is then analyzed.  Partial player visibility, sensor location, major obscurant, and background contrast information are now all available and can be used to perform deterministically modeled detectability detections and engagement effectiveness calculations. 	We conclude the paper with case studies conducted to analyze the effectiveness of various system designs utilizing the 1- meter terrain tools now available. We describe the ability to select routes, modify tactics, and analyze engagement opportunities when accounting for high- resolution terrain featuresed for.  Sample analysis results are presented to show the effects of design alternatives on mission performance.1. IntroductionThe objective of this paper is to describe the use of a high- resolution terrain simulation to conduct analysis of tactical operations and battlefield system characteristics.  In specific we review a study conducted to determine the impact of a mast-mounted sight on a scout vehicle with respect to target acquisition opportunities and susceptibility to detection.Research efforts supported by TRAC-Mtry Monterey and NPS faculty have developed a micro terrain visualization engine and line-of-sight generator known as PVNT.  This system shows promise in providing simulated analysis of new battlefield systems in tactically realistic scenarios in order to assess the value of design features to tactical wartime operations.  Using this tool, we conducted several tactical scenario experiments consisting of defining enemy defending positions and scout vehicle paths using a 1:50,000 scale topographic map as a decision aid.  These routes are compared  and comparing these with  with routes selected after knowledge of micro-terrain using the PVNT simulation knowledge of micro-terrain as a decision aid. Results indicate positions typically changed by 200 to 400 meters while line-of-sight times for scenarios change by 20% to 30% when micro terrain features are added to the scenario generation decision process.  This reflects the more accurate use of cover and concealment by defending troops as well as better selection of  view- points from which scout vehicles could survey the terrain.Positions and routes selected interactively with PVNT were automatically densified to 1- second troop movement files using the calculation mobility capabilities of a modified Janus model.  Such troop movement scenarios were then used to calculate second by second line-of-sight  results at each second between all    opposing force entities.  For simulations lasting on the order of a halftwo hours of real-time resulted in over 14,000 position updates and millions 720,000of LOS calculations. These were statistically analyzed to quantify the effect of system design features and their use in realistic terrain.Key to the success of these simulations was the ability to calculate LOS in a simulation environment that allowed effects such as the partial concealment of vehicles and soldiers by the micro-terrain features including trees, bushes and, rocks and the like. 2. PVNT High Resolution Simulation BackgroundThe US Army test facility at Fort. Hunter- Liggett, CA (FHL) had a high fidelity battlefield replication system known as Pegasus.  This system provides the capability to generate a 1- meter terrain database and a one centimeter target view database for use in weapon substitution, command and control applications, and after action test review.  The system has been relocated for operation at other sites such as Fort. Hood, TX.  Terrain databases have been generated for use in operations at locations and has been used to generate new databases to operate at these non-Ft. Hunter Liggett Locations such as Yuma, AZz.  Perspective view and line-of-sight capabilities represented by the Fort. Hunter-Liggett legacy systems have been migrated to low cost PC NT computers by students and researchers at NPS and is now being maintained by Nascent Systems Inc.  The code is called PVNT. Several years ago investigation of porting costs, performance, and platform cost analysis had shown that both the cost and maintenance of future systems would greatly benefit from the utilization of low cost PC hardware and standard software. A combination of NPS students and research efforts has now successfully ported the perspective view generation and line-of site software to a PC NT platform. The availability of high speed low cost PC based workstations at substantially lower prices than those currently employed to host the software has greatly enhanced the cost effectiveness of 1- meter and higher resolution terrain databases.PVNT is now operating on symmetric multi-processor platforms under NT, and Windows.  The code is demonstrable, reasonably stable, and a specialized version has been perfected to the point at which it is an operational component of the Rotary Pilots Associate test being conducted by US Army Test and Experimentation Center (TEXCOM) TEXCOM at Yuma during the Summer of 1999. Sample copies of executables along with sample  1-meter terrain data are available on CDROM from Dr. Baer at NPS. The general code however is undocumented, without operations manuals, and shows instabilities, especially when run aon arbitrary PC platforms encountered at average distribution sites.2.1 PVNT Program DescriptionThe PVNT program primary function is to generate video realistic perspective views in real time from 1- meter terrain databases.  In order to achieve sufficient coverage for large areas, the 1- meter terrain database [1] using a 32 bit integer to describe each one meter post in a 2.5D vVoxel format.  Elevation is stored in the top 11 bits and represents the top of the visible feature. This is referred to as “bottom of the sky” elevation. A 10x10 sq. Km area requires 400 megabytes (MB) of data.  This is still beyond the capacity of most machines.  Typically 64 MB of memory are reserved for Tterrain, however, a 512 MB memory model has been used on big large memory machines.   Hence a hierarchical range dependent data structure is used to dynamically load 1, 4, 16, and 64 meter data pixels surrounding the instantaneous view- point. As the view- point moves, this data is updated. Several options exist in the program for loading alternative data volumes, rates, and patterns each one suitable for different applications. These option include:Cone Load – loads 1- meter data along a view cone instead of a cylindrically symmetric area Update Rate Control – limits the amount of data loaded per view calculaltionLOS High Resolution Update - Places 1- meter data around viewer, targets, and major ground obscurants between the twotarget pairings.Though memory in modern machines is continuing to to drop in cost less and less, the data volume is a primary technical obstacle. The 2.5D Voxel format requires 1/10’thone tenth the storage capacity of vector formats because no polygon outline is requiredIn polygon databases such volumes are usually reduced by increasing the size of a polygon to cover many square meters.  In order to achieve the same storage capacity using polygons requires increasing the size of a single polygon to cover several elevation postings to reduce the polygonal database size.  We have found that the compaction by combining adjacent meter posts with identical element can reduce the data volume by 40% to 60%, however beyond that data loss or statistical substitution of textures is required.The speed of the PVNT is based upon a unique all integer inverse ray trace algorithm [4]. Rays are projected from the viewer’s eye point by incrementing the ray tip length by one meter and testing if the ground has been hit. When hit,  the terrain elements, coordinates, and view distances are stored in an array the same pixel dimension as the perspective view. If the ground has not been hit the ray is incremented once more. For a 1024x1024 view, which can scan to 20 Km, the inner loop would execute approximately 20 Billion times per picture. To allow real-time operation on PC machines several tricks are employed.  These include:Aall integer ray increment in the inner loop;Pprocess in vertical columns;Eelevation calculations in shifted integers to match the terrain data format; andAadjust the ray increment to match the terrain resolution With these optimizations a 1024x1024 view executes at approximately 2 frames per second (fps) on a 400 Megahertz (Mhz) Pentium machine and can process an equivalent 50 million polygons per second.  This number is subject to interpretation since polygons are not used, (90 degree field of view from a 100 meter helicopter over a one meter polygon density is assumed).  It should also be noted that the inverse ray trace algorithm automatically performs the painter’s algorithm for hidden surface removal and avoids a Z-buffer.  A Z-buffer is only used for target template insertion described below.Besides extremely fast image processing speeds, the PVNT implementation also provides a capability to perform real time surface rendering.  Stripping the elevation pixels from the terrain element and running the remainder through a rendering look-up table accomplishes this task.  The look- up table is segmented for target to viewer angle.  The rendering look-up table is 4 MB and can be calculated off line. This allows material surface property maps to be translated to radiometric emission values on the fly.  Hence, shadowing, time of day, view angle, and some weather effects can be handled in real time.The availability of a fast perspective view generation engine on a generic PC platform is the key to route planning and improved line-of-sight algorithms discussed below.2.2 PVNT Route PlanningRoute planning and defensive position selection proceeds as follows.  The subject matter expert selects an approximate set of way- points and enters these on a PVNT map view.  Once entered, he sequentially visits each point and uses the perspective view capability to examine the terrain as it looks from the position.  The route is then adjusted to account for local obscurants, elevation variations, and mission objectives.	Figure 2.1 shows a screen capture of a map with route points (dashed line) and a perspective view seen by the operator.  Note that a view cone is outlineds as a white triangle while tree sides seen on the map are colored red and seen as dark spots in the perspective view. 	Figure 2.1 – Route Planning2.3. PVNT LOS AlgorithmThe line-of-sight calculation is performed as follows:Eenter parameters defining a target template aspect as seen from the viewer;Eenter view and target position;PVNT generates a perspective view from the viewer to the target;PVNT inserts the target template into the perspective view using a Z-buffer algorithm; andPVNT processes the target view  and performs a pixel count of the target.Figure 2.2 below shows the perspective view with a vehicle template of a scout vehicle.  Note that the target, colored red in the white circle, is partially obscured by the bushes and only the left side of the body is shown along with the mast and the sensor pod on top of it. The ability to generate full perspective views rapidly allows PVNT to perform snuch more sophisticated LOS calculations then those using a direct geometric line paring approach. Advantages of this method are:Partial visibility handled;Viewer can be hidden and only the sensor exposed; andForeground background contrast available for detection calculationsIn our study the primary output of this calculation was the fractional visibility of a target and its slant range. If a target had a fractional visibility of 50%, half of the possible pixels were exposed to the viewer.Figure 2.2 – LOS View with Vehicle Template3. TRACER/FSCSScout Vehicle Case StudyThe objective of the TRACER/FSCS study was to determine the impact of a mast-mounted sensor on a battlefield system with respect to target acquisition opportunities and susceptibility to detection.  The measures of performance are, given a tactical scout mission, which vehicle type has more inter-visibility to the enemy while remaining less exposed to those enemy targets.   The tactical scout mission required each vehicle to move through a suspected enemy position.  LOS result comparisons between the vehicle-target pairings regarding the presented area of the target were done.  This included both presented area of the enemy targets and presented area of the friendly vehicles The measure of cost effective is, given the mission to scout an enemy deployment, which vehicle would detect more of the enemy while being detected by fewer of the enemy was better. while moving through the terrain.Several methodologies are available for analysis.  The generation of weapons effectiveness potential [3] generates terrain maps from stationary players. Routes can be drawn on these maps and compared for effectiveness.  This novel method shows great promise in that a single map can provide significant insight into the effectiveness of a weapon over a large geographic region.  More traditionally, this simulation generates a large number of , in our case, LOS data, which are is then analyzed for results.  We employed this methodology  to generate and analyze scout different vehicle scenarios in high-resolution terrain.  Details of the methodologyIt are described in the next section.3.1 MeathodologyStep 1: A subject matter expert using high-resolution terrain knowledge from PVNT interactively chooses defensive positions for the enemy, which maximized visibility and minimized exposure.Step 2: A second subject matter expert selects route waypoints for two scout vehicles also using PVNT.  The vehicles were named Blue1 and Blue2 to define which route they were assigned.  The routes include travel points and observation points at which sensing takes place.  The routes are chosen with only suspected knowledge of the opposing player positions.  Observation positions were selected based on the type of scout vehicle used for the mission.Figure 3.1 shows a diagram of the player positions and two planned routes. Numbers indicate observation points.  Scout Vehicle 1 had selected an 18.2 km. rRoute defined by 310 points and 7 halt points. Scout 2 Vehicle 2 had selected a 17.2 km route defined by 283 points and 6 halt points.Step 3: The player positions and route waypoints are formatted by a Data Analysis Tool (DAT) and sent to JANUS.  JANUS densifies the route using its mobility model by inserting time stamps and PVNT LOS generation commands.  A 56 MB file containing over 7000 route waypoints for each vehicle is created.  This is for a mission lasting two hours and five minutes in real time.Figure 3.1 – Planned Vehicle RoutesStep 4: The scenario command file was sent to PVNT, which performed over 749,000 PVNT commands to include position updates and LOS calculations using a 64x64 pixel view template. Run time was 5.5 hours and 778,000 lines of ASCII output were generated.  Each output line indicated the red and blue player pair for which LOS was calculated as well as the range, target size, and fractional visibility of the target.Step 5: The Data Analysis Tool converted The PVNT output file with the LOS results into a Microsoft ACCESS database.  Using Structured Query Language (SQL) statements on the database, performance measures were evaluated and graphs were generated through automation.3.2 Study ResultsTwo vignettes were defined and run through the methodology described in the last section. The first, called the Infiltration vignette, involved two blue vehicles on routes attempting to minimize exposure.  The second, called Zone Reconnaissance, included two vehicles attempting to maximize their knowledge of enemy force locations.  Two different vehicle types were given the same mission.  Yet, through the use of the Subject Matter Expert, each vehicle was employed using it’s capabilities.On the whole, the difference between the vehicle with the mast and the vehicle without the mast visibility during travel was insignificant.  This was expected since both vehicles were of similar size and moving along similar routes at the same speed. At observation points (see Figures 3.2 and 3.3) however in the zone recon vignette, the mast mounted vehicles had a total of 67 Inter-visibility (IV) segments (both Blue 1 and Blue 2) versus the 52 IV achieved by the non-mast mounted vehicle type.  The most significant differences occurred at Observation Point 2 (OP2) (Blue 1), OP5 (Blue 1), and OP4 (Blue 2).  The mast mounted vehicle type had inter-visibility to enemy targets at OP2 and 5 (Blue 1) while the non-mast mounted vehicle types had no IV segments.   At OP4 (Blue 2), Vehicle Type 1 had LOS to 6 more targets than Vehicle Type 2.  Figures 3.2 and 3.3 show a comparison of a vehicle with a mast-mounted sensor versus a vehicle without a mast-mounted sensor at the observation points.Figure 3.2 – Zone Recon – Blue1 to targetsIn the infiltration vignette, there was no significant difference in the number of enemy IV segments to the vehicles at the observation points.  Enemy targets had a total of 92 IV segments to the mast mounted vehicle type versus 96 IV segments to the non-mast mounted vehicle type.Figure 3.3 – Zone Recon – Blue2 IV to targetsFrom the results of the study, it is unclear whether one vehicle provides a distinct advantage over the other.  In both vignettes, the mast mounted vehicle type shows improvement over the non-mast mounted vehicle with respect to the percent of enemy targets to which it achieves line-of-sight (LOS) and the total number of IV segments at the OPs.  In both vignettes, the mast mounted vehicle types has more IV segments at greater ranges than the non-mast mounted vehicles.  For this paper, however, the methodology is much more significant than the individual results. A few comments are therefore in order. In high-resolution terrain using partial target inter-visibility calculations, the LOS is not reciprocal. Some red players could see the blue player when the reverse was not true. This is contrary to our experience with geometric line- of-sight results. We examined several such differences and found for example, a stationary player could be hidden behind a bush, but able to see over the top. Such phenomena make the LOS calculations more realistic although accuracy checks developed with older technologies are not always applicable.In addition to LOS calculation results, the high- resolution simulator proved to be an effective tool for operational route planning. PVNT visualization allowed the Armor SME to “see” the terrain. The panoramic view from the perspective of the scout observer greatly enhanced route planning and line-of-sight clearance. PVNT “playback” of routes allowed a basic ability to review the tactical movement of the scout 4. ConclusionThe use of high-resolution terrain simulators has been shown to be a significant aid in analyzing tactical importance of weapon design features, which depend on concealment, cover, and camouflage. In addition to LOS calculations, the impact of mission planning utilizing knowledge of micro terrain features has been demonstrated. Future work will concentrate on the improvement of a user-friendly interface, automation of data paths to other simulators and the expansion of 1-meter databases to cover more areas of the world.  5. References[1] 	Baer, Wolfgang and J. R. Akin:  “An Approach for Real-Time Terrain Database Creation from Aerial Imagery”, SPIE Proceedings Vol. 1943-17  OE/Aerospace and Remote Sensing Conference, 12-16 April 1993.[2]	Baer, Wolfgang and C. Reed:  “Global Terrain Database Design for Realistic Imaging Sensor Simulation”, Proceedings 13th DIS Workshop on Standards for Interoperability of Distributed Simulations, Vol. I, p. 19, Sep 18-22 1995[3]	Kemple, W.G. and H. J Larson:  “Computer Visualization of Battlefield Tenets”, Mathematical Computer Modeling, Vol. 23, No. ½ (1996): pp. 25-37 [4]	P. Welch et al:  “ Implementation of a Perspective View Generator”, Transputing ’91, Vol. 2 pp. 643-656, ISOPRESS Amsterdam, 1991.Author BiographiesWolfgang Baer is a Research Assistant Professor of Computer Science at the Naval Postgraduate School specializing in data capture, high-speed algorithms, and parallel computers for real-time battlefield application.Major James Illingworth is an Operations Research Analyst at the TRADOC Analysis Center in the Monterey, CA office.  His interests are in terrain generation, relational databases, and simulation modeling.  He specializes in integrating relational databases into simulations, statistical analysis of data, and virtual modeling of military weapon systems.BARD MANSAGER is a Senior Lecturer of Mathematics at the Naval Postgraduate School, specializing  in combat modeling, systems engineering, and  antitank missile analysis.WILLIAM G KEMPLE is the Associate Director of the Institute for Joint Warfare Analysis. His research concentrates on combat weapons effectiveness models and display methodologies.Way points along routePerspective View Window87654321 EMBED Word.Picture.8   EMBED Word.Picture.8  