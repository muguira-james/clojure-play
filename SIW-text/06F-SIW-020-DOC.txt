CALIPSO: Integration of Actors of the Urban Zone in a Legacy Simulation by Means of HLA FederatesJean-Yves Donnart, PhDTHALES Services, SAS1, rue du Général de Gaulle95523 Cergy-Pontoise Cedex+33 1 34 22 80 03 HYPERLINK "mailto:jean-yves.donnart@thalesgroup.com" jean-yves.donnart@thalesgroup.comKeywords:Simulation, CGF, JANUS, Urban Zone, Peace Keeping Operations, Automated AgentsABSTRACT:  The French Army has a vast experience in the application of the JANUS simulation system for tactical instruction and training at the battlegroup and company levels. All along its operational lifetime, JANUS has been progressively modified by the CDEF/DSRO, in order to adapt it to the vehicles, weapon systems, and operational doctrines of the French Army.More than a year ago, the CDEF / DSRO began an important effort in order to adapt JANUS to conflict conditions, including Urban Zone fighting and Peace Support Operations (PSO). In order to start introducing these capabilities into JANUS, the French DGA/SPOTI has initiated a specific study in the CALIPSO program.The present paper describes this task, namely the study of how to supplement the JANUS Simulation with the capabilities required for animating non-military actors in urban zones.The solution adopted by THALES Services is based on the construction of an HLA Federation that includes both the "classic" version of JANUS and a “new generation” simulation (VirtualLab-CGF) specifically dedicated to the modeling and the automatic animation of the non-military actors (civilians, refugees, militias, terrorists).  Beyond demonstrating the feasibility of automating the behavior of these actors, which will allow their management by a single operator, this study shows that the use of interoperability techniques is a powerful means to improve and update legacy simulations such as JANUS, and thus to prolong their operational lifetimes.The CALIPSO ProgramCALIPSO (acronym for "Concepts avancés pour la connexion de la simulation avec les SIO") is a multi year French MoD R&T program launched by the French "Délégation Générale pour l'Armement" (DGA/SPOTI), and awarded jointly to THALES Communications (consortium leader) and to THALES Services.This R&T program aims to analyze Army user needs for C4ISR-M&S (Modeling and Simulation) coupling and to provide advanced solutions to solve existing issues. This program is also focusing on the development and experimentation of new M&S techniques for training and operational planning.The overall goal of the CALIPSO program is to produce a consistent set of recommendations for the effective and practical application of simulation interoperability techniques.  Its scope covers both the interoperability between different CGF systems and their respective interactions with Command and Control systems.Two main areas of research have been identified:CGF/CGF interoperability, aiming at:The practical and effective reuse of legacy simulations within larger simulation systems.The progressive development of a standard FOM.Integration of the CGF with Command and Control systems, aiming at:Saving time and effort in the development of new applications.Promoting a common data model.The CALIPSO program has been divided by DGA/SPOTI into the study, design, and development of 6 demonstrators: 3 demonstrators for operational planning issues and 3 demonstrators for training issues.One paper was presented last year on the “operational planning” issues [1]. The present paper covers the study and development of the demonstrator called "CALIPSO Training V1", which has been developed by THALES Services.  The specific goal of the CALIPSO Training V1 demonstrator is the incorporation into the well-known JANUS system of the capabilities required for animating non-military actors, especially in urban zones.The CALIPSO Training V1 StudyIntroductionUnder present geo-political conditions, urban areas are rapidly becoming very important as the potential theater of military operations.  These urban situations are much more complex than traditional open-field operations, as the terrain is much more intricate, there are many different actors (civilians, refugees, militias, terrorists, etc.), and reaction times need to be much shorter.  The upgrade of traditional systems of Computer Simulation in order to cover these new threats is recognized as a necessary but also a very difficult task.The JANUS SystemJANUS is a very well-known simulation, used in many countries.  It was initially developed by the Training Command Analysis Center (TRAC) of the US Army. The French Army has been applying JANUS for a long time, particularly for carrying out tactical formation in the French Weapon Schools and training at the battlegroup level. All along the operational lifetime of the French version, JANUS has been progressively modified and upgraded by the Simulation and Operational Research Division (CDEF / DSRO), in order to adapt it to the vehicles, weapon systems, and operational doctrines of the French army.The DSRO began since more than one year a important effort in order to adapt JANUS to the new conflictness including the representation of Urban environment and the modeling of Peace Support Operations (PSO), such as Peace Keeping Operation (PKO), Peace Enforcement Operations (PEO), etc. In order to start introducing these capabilities into JANUS, the French DGA/SPOTI has initiated the CALIPSO program.  As mentioned above, the present paper describes one of the tasks of the CALIPSO study, namely the study of the incorporation into JANUS of the capabilities required for animating non-military actors in urban zones.A Combined Solution:  JANUS-SETHITHALES Services proposed a solution based on the construction of an HLA Federation that would combine 2 components: The "classic" version of JANUS.A new-generation simulation – VirtualLab-CGF –  specifically dedicated to the modeling and the automatic animation of the non-military actors.  The VirtualLab-CGF SystemVirtualLab-CGF is a new-generation Computer Generated Forces (CGF) system developed by THALES Services.Several successive versions of VirtualLab-CGF (with the name of SETHI) were developed since the 1980's and have been implemented in many training simulators (aircraft, helicopters, land vehicles), in order to supply a complete synthetic tactical environment. Figure 1:  The CGF: SETHI V6The current VirtualLab-CGF version (SETHI v6) has been redesigned from scratch in order to support, besides training simulators, also Simulation Based Acquisition (SBA) systems. SETHI-v6 is at present being implemented by THALES Services in the French Army SBA development projects called SimEC3 and Suzon.Design and Development TasksThe design phase of the CALIPSO Training V1 study was carried out in the following successive steps:The collection and analysis of the operational needs for CGF simulation in urban zones.The definition of the demonstrator's overall architecture. The definition of the demonstrator's operational functions.The definition of the demonstrator's technical functions.These tasks are described in greater detail in the following sections below.The development phase consisted mainly of the following tasks:Extension of the VirtualLab-CGF with new types of simulated entities.Adaptation of the JANUS Core System and GUI.Definition of a CALIPSO FOM (close to the standardized RPR-FOM) and implementation of the interoperability layer. Design and Development ScheduleThe CALIPSO Training V1 Study started in January 2005.  The demonstrator will be delivered in September 2006, in order to carry out the activities of the testing and validation phase, as described in section  REF _Ref139963893 \r \h  \* MERGEFORMAT 7. below.Collection/Analysis of Operational NeedsThe first task of the study, which was carried out in cooperation with operational advisors, identified the major points that the simulation should cover, as follows:The simulation should cover an urban zone ranging from a small town (about 300 inhabitants) to a medium-sized city such as Montpellier in France (200 to 300 thousand inhabitants).Several different types of non-military personnel must be simulated:  civilians, refugees, militias, terrorists, etc.A large variety of interactive situations should be represented, covering the entire range from peace keeping operations to outright coercion, for instance: check-points, barricades, terrorist attacks, humanitarian operations and associated logistics, etc.The newly simulated actors must be "intelligent agents", i.e., their autonomous behavior capabilities must be such that they can be managed by only one JANUS operator.  At the same time, the operator must still retain the capability to intervene and directly control any actor if necessary.CALIPSO's Overall ArchitectureAs mentioned above, the solution proposed by THALES Services, and validated by DGA/SPOTI, has the following main characteristics:The JANUS simulation (core and GUI) has been altered to incorporate it in the HLA federation and to take advantage of the new functions introduced in CALIPSO.The animation of the non-military personnel is carried out by VirtualLab-CGF (SETHI v6);The JANUS and the SETHI simulations are integrated into a common HLA federation. Thus, the solution implemented by CALIPSO "delegates" the task of simulating the new actors to a specific federate, which can be used either independently or jointly with JANUS or, as a matter of fact, with any other simulation system.The following diagram shows the basic architecture adopted for the CALIPSO demonstrator. EMBED Word.Picture.8  Figure 2:  CALIPSO ArchitectureThe HLA link between CALIPSO and JANUS relies upon DMSO RTI 1.3NG and a FOM that is close to the standardized RPR-FOM. Note that the CALIPSO federation has been designed to be an extension of SETHI, which is already a federation of specific components (Core, GUI, DataLogger, Stealth).CALIPSO's Operational FunctionsIntroduction of new categories of agentsThe animation capabilities already provided by the VirtualLab-CGF were extended in order to take into account new agent categories, as follows:A ZUB agent is a generic SETHI actor, whose individual instances may be characterized in order to represent civilians, refugees, militias, and terrorists.  Its parameters may be adapted in order to define detailed features, for instance:Sex and age:  man/woman, adult/child.Health condition:  healthy, wounded, ill.Social condition:  city dweller/peasant, foreigner/local.Group membership:  military, political, ethnical, religious, etc.Clothing:  civilian, paramilitary, military.Weaponry:  unarmed, non-lethal weapon, handgun, rifle, bomb.A ZUB populated zone is a mobile geographic zone that occupies a certain area and contains an aggregate of ZUB agents, whose average characteristics can be defined by means of percentages. The following figure shows schematically the movement of a ZUB populated zone on the simulated terrain.Figure 3:  Schematic example of a                            ZUB populated zoneA ZUB aggregate consists of several CALIPSO agents, aggregated in the JANUS sense (graphical aggregation):A ZUB aggregate can contain ZUB agents, ZUB populated zones, or other ZUB aggregates.  The operator can control it in exactly the same manner as a single agent. The aggregate control automaton manages the mission of each individual aggregate component.The following figure shows an example of a ZUB aggregate representing a complex crowd.Figure 4:  Schematic example of a                            ZUB aggregateTanks to the three category of unit, CALIPSO introduces two further innovations in urban zone modeling:Multi-level interaction:  CALIPSO can simulate interactions between a single actor, such as a terrorist, and an aggregate actor, for instance the entire population of a certain area.  As an example, a ZUB agent, such a terrorist, is able to mount into a populated zone in order not to be detected.Complex crowd animation:  CALIPSO can simulate a heterogeneous crowd, defined as a large ZUB aggregate.  As an example, such a crowd can contain ZUB zones (representing, e.g., civilians and militias) plus ZUB agents representing terrorists.CALIPSO's Behavior Modeling These three categories of agents (ZUB agents, ZUB populated agents and aggregate agents) possess the following capabilities:They can execute a mission, as defined by:The mission goals; A set of operational rules; The mission scenario.They can display autonomous behavior, so that they can react to unforeseen events in a fully automatic manner, without any need for operator intervention.They are defined by a set of variables that defines their internal state at each step of the simulation:The ZUB agent parameters (as defined above);Rules of Engagement;Human Factors, etc. The following table shows examples of behavior that can be exhibited by such “intelligent agents”.AgentsBehaviorsCiviliansDaily lifeDemonstrationsHostile crowdsRefugeesManagement of the refugeesStream of populationRiotsMilitiasFight of low intensityHarassingExcitement of the crowdTerroristsBomb attemptsHostage takingTable 1:  Example of agent’s behaviors                          in CALIPSOWith such a modeling, the ZUB animation operator may be able to control each in individual agent separately (ZUB agent or ZUB populated zones) or to control them at an aggregate level (ZUB aggregate). In the latter case, the individual behaviors are automatically assigned to each individual. Furthermore, the ZUB animation operator may also let each agent react by itself to each planned circumstances, thanks to the behavioral engine integrated into SETHI.CALIPSO's Technical FunctionsThe CALIPSO demonstrator possesses of course all the standard capabilities enabling it to be employed in a flexible manner for many operational applications, such as:Performance of generic administration tasks.Selection and definition of the simulated terrain.Creation, edition, and selection of the simulated entities:  ZUB agents.ZUB populated zones.ZUB aggregates.Creation and edition of:Force systems.Order of battle.Mission scenarios.Performing an exercise, i.e., running the simulation software in either real-time, accelerated time, or slow-motion, via the following elementary functions:Start-up / Shutdown.Pause (freeze-unfreeze) / Restart.Playback.Follow-up, management, and "animation" of the simulation by Instructors or Operators, via graphical user interfaces (GUIs).Exercise Replay.Exercise analysis by means of the JANUS tools.CALIPSO Test & ValidationGeneralThe CALIPSO Training V1 demonstrator, as such, will not be required to fulfill real operational requirements.  For this reason, the test & validation activities will be carried out mainly from a technical point of view, i.e., the correct implementation of its technical functions (as described in the previous section) will be thoroughly checked.However, the future operational use of the demonstrator, at least for educational purposes, is not altogether excluded, so that its operational capabilities will also be tested and verified.  In order to carry out this operational validation, THALES Services received the cooperation of the different JANUS users in France, in order to:Identify their specific needs.Define interesting and realistic (albeit simplified) test scenarios.This collective work resulted in the definition of the elements that the users considered most relevant for future development, such as:Elementary events and situations.More complex test cases and validation scenarios.  Some examples are given in the following sections.Elementary Events and SituationsThe following elementary cases of field operations are representative examples:Transport/Escort of civilians.Protection of civilian enclaves, establishment of safety zones.Evacuations, direction of population flows.Separation of hostile groups.Peacekeeping within an urban zone.Neutralize sharpshooters.Force a passage across bridges, disperse hostile groups, dismantle barricades, etc.Create checkpoints.Validation ScenarioThe validation scenario concerns a battlegroup consisting of at least two squadrons or companies. The actions have been defined on the basis of two consecutive phases:The battlegroup is to enter and control a city initially occupied by hostile local forces, possibly including militias and individual terrorists.Thereafter, the battlegroup stabilizes the city conditions and transfers its control to friendly local forces.Practical Experimentation The final experimentation phase of the CALIPSO Training V1 demonstrator took place in July 2006 at the Armor Vehicles School (EAABC) at Saumur.Four CALIPSO computers were connected to the 40-computer JANUS network of the Saumur School. The experiment operated an armored battlegroup in a scenario involving non-military actors in an urban zone and PSO missions.The scenario contains two consecutive phases:Takeover of a city against enemy forces: the battlegroup has for objective to take the control of the city of Troyes by making a raid by its north accesses (contacting the enemy) before investing and controlling the administrative center.Stabilization of the situation in the city: once the city is under its control, the battlegroup must protect the population and maintain order by fighting armed groups organized in militias and groups of extremists capable of carrying out terrorist actions.The battlegroup is modeled in JANUS by 551 units. The enemy’s company adds 68 units. Finally, CALIPSO simulates 57 ZUB individuals (ZUB agents or populated zones) controlled by the ZUB animation operator via to 8 aggregates.The following figure describes the map of the north side of the city of Troyes, which is the terrain of the scenario. Figure 5:  Map of the scenarioAt the beginning of the scenario, the battlegroup progresses along two axes in the direction of Troyes. The number on the map represents the successive steps of the scenario as follows:Contacting the enemy: The battlegroup has to force barriers established by the enemy squadron;Neutralization of isolated marksmen: The enemy placed marksmen in buildings to slow down the progress of the battlegroup;Dispersal of demonstrators: The demonstrators are unarmed, but they are incited by enemy partisans;Treatment of the refugees: The refugees ask to leave the city under the protection of the battlegroup;Check-point: The battlegroup has to prevent the infiltration of a militia group in the city;Establishment of a safety perimeter: The objective is the interception of enemy militia or terrorists;Protection of the presidential palace: Use of armored vehicles and infantry to establish a safety zone; Evacuation of wounded persons: A terrorist made a bomb attempt near the presidential palace;Hostages’ liberation: Terrorists detain two hostages and threaten to blow up the palace.Results of the experimentationThe CALIPSO demonstrator succeeded in restoring the usual behavior of the civilian population and of refugees’ flows, and in restoring the more agressive behavior of militias and terrorists.It also managed to perform 75 % of the scenario when operating two squadrons, instead of a battlegroup. Figure 6:  CALIPSO view of ZUB populated zone From an educational point of view, the military users noted several positive points:JANUS operators were able to have real time information concerning the encountered units and to make the reports accordingly.Behaviors of crowds, militias and terrorists were well reproduced and were relevant from a military perspective.The visual aspect on consoles allows the players to perform the following process: Incident (simulation) Dialogue (role playing), Reaction (simulation).Figure 7:  JANUS view of ZUB populated zone      (with related information on the unit)CALIPSO demonstrated its capability to simulate the main characteristic of crowds, namely their non-deterministic aspects and the reversibility of their behavior. The kamikaze's application was also particularly interesting, in particular the possibility for the CALIPSO operator of first hiding the terrorist within the crowd and "extract" him in order to make the bomb attack.Another positive point was to succeed in executing two simulations together with complementary objectives. This was especially the case at the level of the cartography that allowed a complete coherence between both simulations, thanks to the converter realized at the EAABC.Although much work still remains to be done to increase the realism in CALIPSO of the interaction with crowds or other ZUB units, and to enhance the ergonomics of the interface, we hope that the results of the development and the experimentation of the demonstrator will be profitable for the development of future versions of JANUS at the DSRO. ConclusionThis paper has presented the study and the development of a demonstrator called CALIPSO Training V1. The aim of this demonstrator was the study of the incorporation into the JANUS Simulation of the capabilities required for animating non-military actors in urban zones.The solution adopted was based on the construction of an HLA Federation that includes both JANUS and a “new generation” simulation – VirtualLab-CGF – specifically dedicated to the modeling and the automatic animation of non-military actors (civilians, refugees, militias, terrorists).  The use of VirtualLab-CGF allows JANUS users to benefit of new kinds of urban actors such as civilians, refugees, militias or terrorists, and of aggregated units (populated zones) that may represent either a group of individuals or all the population of an enclave. Furthermore, CALIPSO allows the management of non-military actors by a single operator thanks to the behavioral engine of VirtualLab-CGF that is able to give autonomy to each agent.Finally the CALIPSO Training V1 demonstrator shows that the use of interoperability techniques is a powerful means to improve and update legacy simulations such as JANUS, and thus to lengthen significantly their operational lifetimes.References[1] 	Khimeche, L., Bouché, J.P., “M&S to support French Armed Forces Planning Process”, Paper 05F-SIW-032, Fall SIW, 2005 [2] 	Donnart, J.Y., Chiva, E., Chavannat, P., “Apport de la théorie des systèmes complexes pour la simulation opérationnelle“, Workshop AAAF, 2001[3]		Donnart, J.Y, Chiva, E., Devade, J., Maruéjouls, S.,  “Motivational Graphs: A New Architecture for Complex Behavior Simulation”, AI Wisdom 2, 2004Author BiographyJean-Yves Donnart is CALIPSO project manager within Thales Services. He received a Ph.D. in Biocomputing from the University of Paris VI and possesses a strong expertise in behavior modeling and autonomous agents in military simulation. He designed DirectIA® [2][3], the command agent engine of the SCIPIO Brigade/Division training system of the French Army, and worked on several military simulation projects involving the use of automated agents 