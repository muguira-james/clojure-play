Communications Effects Server – Realistic Communications Effects for Distributed SimulationsJared Dulmage, Tuan Hoang, Jon A. McConnell, Mark Riehl, James WesselThe MITRE Corporation12 Christopher WayEatontown, NJ 07724James Wessel: (732) 389-6780; jwessel@mitre.orgJohn PeaceUSACECOM RDEC, Command and Control Directorate (C2D)AMSEL-RD-C2-MSMyer Center, Building 2700Fort Monmouth, NJ 07703(732) 427-2049, DSN 987john.peace@mail1.monmouth.army.milKeywords:Tactical Internet, Communication Effects, Simulation, Test, Operations, and Rehearsal Model (STORM), Distributed Interactive Simulation (DIS), Single Channel Ground and Airborne Radio System (SINCGARS), Enhanced Position Location Reporting System (EPLRS), Situation Awareness (SA), Command and Control (C2), High Level Architecture (HLA)ABSTRACT: The Communications Effects Server (CES) is a key component of U.S. Army Communications-Electronics Commands (CECOM's) Tactical Internet Model (TIM) suite of Command, Control, Communications, Computers, and Intelligence (C4I) simulation software.  It provides a realistic high-fidelity communications model of the Army’s Lower (Brigade and Below) Tactical Internet (TI) to client simulations within the TIM Suite.  The CES is designed to provide realistic, simulated communication effects that are nearly indistinguishable from real TI radio networks.The CES router discovery process models the Request For Comment (RFC) 1256+ protocol to identify which router will act as the gateway for hosts within a given network.  The CES additionally models the lower TI’s Internet Management Protocol (IGMP) variant called IGMP+.  IGMP+ allows simulated non-gateway routers to register with gateway routers for multicast traffic.The following three radio models are presently implemented:1. The Single Channel Ground and Airborne Radio System (SINCGARS) Advanced System Improvement Program (ASIP).2. The Enhanced Position Location Reporting System (EPLRS) Carrier Sense Multiple Access (CSMA).3. The EPLRS Duplex radio.Preliminary verification and validation (V&V) testing indicates that the CES performs as designed, providing close representation of the real C4I systems being simulated.  It was exercised in scenarios comparable to the December 1999 Force XXI Battle Command Brigade and Below (FBCB2) Field Test II (FT2) at Fort Huachuca, Arizona, and the April 2000 FBCB2 Customer Test (CT) at Fort Hood, Texas.The CES was originally designed to function within the TIM Suite in a DIS architecture.  Because of the DoD mandate for HLA compliance by October 1, 2000, the CES was converted for use in both architectures to support both legacy simulation applications and to be interoperable with state-of-the-art HLA simulations, including a new addition to the TIM Suite, the C4I Jammer Analysis Model (CJAM).  This was accomplished through collaborative design and coding between multiple organizations contributing to the TIM Suite, based on a prototype FOM described in a previous SISO publication.1. IntroductionThe U.S. Army is moving toward a digitized battlefield where soldiers and vehicles will be equipped with radios, routers, and computers.  Computers will be networked together using radios to form the Army’s Tactical Internet (TI).  The Army is also using simulations to train soldiers during exercises, which reduces the number of resources (soldiers, fuel, etc.) required to support training.  These two areas drove the development of the TI Model Suite of simulation software (TIM Suite), as described in [1].The CES is an integral component of the TIM Suite and provides realistic delays and message losses in digital battlefield exercises.  The CES can also be utilized with other applications to facilitate TI radio and/or FBCB2 operational experiments, development, and training.  Additionally, the CES is tailorable to allow integration with other applications (i.e., C4I Jammer Analysis Model (CJAM)) and the introduction of additional radio models (e.g., Near Term Digital Radio (NTDR)).2. STORM ArchitectureA major application of the TIM Suite is to support the Simulation, Testing, Operations, and Rehearsal Model (STORM) program which is described in detail in [2].  STORM combines live and simulated entities in a synthetic environment.  Currently within STORM, the CES receives requests for communications effects from the Simulation Converter (SIMCON), surrogate FBCB2s (through Client Interface Devices (CIDs)), and the Role Player Workstations (RPWS).  STORM message flows are shown in Figure 1. EMBED PowerPoint.Show.8  Figure  seq Figure 1.  STORM ArchitectureThe SIMCON tracks the movement of simulated roles using Distributed Interactive Simulation (DIS) Entity State Protocol Data Unit (ESPDU), and generates Joint Variable Message Format (JVMF) SA position reports for simulated roles based on time and motion filters.  The RPWS provides a ‘soldier-in-loop’ messaging capability, allowing a single operator to send and receive C2 messages for several simulated roles within an exercise.  The Digital Army U.S. Message Text Formatting (USMTF) Variable Message Format (VMF) Stimulator (DAUVS) provides an interface to live radios in the field and the CECOM Integrated Global Positioning System (GPS) Navigation Model (CIGNM) provides a realistic GPS model for each simulated and surrogate role.Within the CES, lower TI models of the Internet Controller (INC) router, SINCGARS ASIP, and EPLRS radio network calculate the probability of successful message reception and any cumulative delay encountered from the source to the destination. High-fidelity modules calculate received signal strength and determine the probability of message completion and delay.  One of the components of received signal strength is signal loss in decibels (dB), calculated using the Terrain Integrated Rough Earth Model (TIREM) with Digital Terrain Elevation Data (DTED) maps.  Message delay is modeled at the radio, network, and router levels of the TI.  Messages destined to or received from the live units pass through the CES without any pathloss calculations or communications effects.  These messages will be or have already been delayed by the live radios.Within the CES module, the following three processes function together (Figure 2).Traffic manager (TM) process.Entity database process.Radio model/pathloss process. EMBED PowerPoint.Show.8  Figure 2.  CES ArchitectureThe TM process acts as a server for the SIMCON, the CIDs, and the radio model/pathloss process.  The TM accepts incoming messages and delivers them to the radio model/pathloss process.Several different messages are sent from each client to the TM.  As soon as a connection is established between a client and the TM, the client(s) sends a registration message.  The registration message contains the unit reference number(s) (URN(s)) of the client and the client type (live, simulated, RPWS, or surrogate).  This registration is used by the TM to map clients to a socket for each client type.  In the case of a CID, there is one URN.  However, when the SIMCON registers, the registration message contains URNs for all of the simulated units.When a client sends out a JVMF message, it is delivered to the TM using a transmission request message.  The transmission request message contains all of the information associated with the JVMF message that is required for delivery (e.g., source and destination URN(s), source and destination ports, and destination net or role URN).  If a simulated entity is destroyed, the client sends a deregistration message to the TM.All JVMF traffic from both live and the simulated units are passed to the radio model/pathloss process.  After processing, the radio model/pathloss process delivers a transmission result message to the TM.  The transmission result message contains a recipient list of URNs that should receive the transmission and associated message delay.  The original JVMF messages are then delivered to the recipients.DIS ESPDUs are periodically generated by an Entity-Based Model (EBM) such as Modular Semi Automated Forces (ModSAF) or Janus.  ESPDUs contain information such as entity URN, location, course, speed, etc.  The Entity Database (ED) process receives ESPDUs and stores the current Geocentric Coordinate (GCC) location in the entity database.  The radio model/pathloss process periodically extracts entity locations from the ED, and updates the pathloss tables associated with each radio network by calling TIREM.  The ED filters ESPDUs and only stores locations for simulated units.The STORM PC platforms currently run Red Hat LINUX 6.2 with kernel 2.2.  All code is written in C++, using the GNU egcs compiler.  Surrogate FBCB2s currently are running version 3.3 under Solaris x86 version 7.3. Gateway Selection and Multicast RegistrationWithin the CES, simulated units periodically receive advertisements (RFC 1256+ messages) from other routers and elect the router with the highest preference level as the default gateway.  This process provides C2 unicast and multicast message pathways to other TI networks within a single brigade.Emulating RFC 1256+ provides the following benefits:Dynamic gateway discovery within the model.Introduction of realistic message load associated with gateway discovery within the model.Emulating IGMP+ provides the following benefits:Dynamic multicast registration between routers.Introduction of realistic message load associated with IGMP+ message exchanges within the model.4. SINCGARS Radio NetworkThe CES models the SINCGARS ASIP radio.  Features and capabilities of this radio include:Supports both voice and data communications.Operates in the Very High Frequency (VHF) frequency band (30 – 88 Megahertz (MHz) in 25 Kilohertz (kHz) channels.Transmits at up to 4.5 watts in the manpack configuration, up to 10 watts in the airborne configuration, and up to 50 watts in the vehicular configuration.Within the CES model, a SINCGARS ASIP radio transmits in packet mode (up to a 1500 byte data burst).  The raw data rate at this mode is 16 kilobits per second (kbps).  However, because of the error correcting coding schemes used, the effective rate is reduced to 5 kbps.Each simulated SINCGARS ASIP radio model’s attached INC (within the CES) employs the Load Net Access Delay (L-NAD) link layer scheduling algorithm to calculate when to bid for network access.  The scheme relies upon tracking key network timing events (i.e., highest priority message count and network size per node) to determine future network access attempts.  The scheduler is started when a message arrives and is restarted after each data message transmission (the scheduler is suspended during network voice transmission).  If a network access attempt is denied it will recalculate another network access bid delay and try again.Once a radio has gained network access, it will transmit up to 1500 bytes of the highest priority messages waiting in its’ queues.  Within each radio, the SINCGARS ASIP channel protocol utilizes precedence windows, with slot pools dedicated to various message precedence levels, to prioritize message transmissions.  This enables higher precedence messages access to the network first.  If a request arrives after the pool of slots has expired, the transmission will start at the next available slot.When a modeled SINCGARS ASIP radio receives a message, the associated pathloss calculated by TIREM is used to calculate the associated received signal strength.  The received signal strength is translated to a probability of message reception and compared to a probability generated by a random number generator.  If the message’s calculated probability of reception is greater than that produced by the random number generator, the message is considered delivered.  This fundamental method of determining message reception is repeated for all radio networks within the CES.5. EPLRS CSMA Radio NetworkEPLRS is a Time Division Multiple Access (TDMA) based radio.  Transmit opportunities occur at discrete time slots based on the operating mode and the current timing of the radio.  A radio may send a single Transmission Unit (TU) over a single time slot.  The EPLRS CSMA mode operates in the Ultra-High Frequency (UHF) band in the range of 425 to 450 MHz in 3-MHz channels.  The EPLRS transmit power level within the CES can be 0.4 watts, 3.0 watts, 20.0 watts, or 100.0 watts.  Currently, the EPLRS power level in the CES defaults to 100 watts.The CES EPLRS CSMA radios have two scheduling and two coverage modes. The scheduling modes are modeled as follows:Short: TU is sent based on a “coin flip” with a probability related to the perceived network load at the transmitting radio.Normal: TU is sent on a carrier sense, collision avoidance-like algorithm.  The radio waits a random number of idle time slots before sending a message.The coverage modes are modeled as follows:Local mode: One relay, shorter range, but higher data rate due to less time required to traverse all relays.  Used for Battalion-wide message distribution.Extended mode: Three relays, greater range, and lower data rate.  Used for Brigade-wide message distribution.A message-flooding algorithm is utilized to allow redundant paths to exist between source and destination(s).  The redundant paths increase the probability of communication between a transmitter and receiver pair.The coverage model accepts a list of messages and simulates the flooding of them through the network.  The CES coverage model returns a list of recipients, each mapped to the message (from the original list) which it received.  As a secondary function, the coverage model will take a message and calculate a delay to be added to it that corresponds to the propagation delay of sending the message through the network.6. EPLRS Duplex Radio NetworkThe CES duplex networks exchange data between two radios at the same rate in both directions.  These networks are dynamically created and destroyed based on the current demand.  Transmissions are sent reliably using acknowledgments and retransmitions at the same data rate (20 to 1920 bps) in both directions. A duplex net may have one to four circuits.  Each circuit has the same end point radio pair and a set of up to four (possibly different) radios as relays.When an INC receives a unicast message, it notifies the associated (logical) duplex radio which in turn notifies the duplex network system.  If an existing duplex network does not exist for the transmitter/receiver pair, a duplex network circuit is created.Transmission delay within a duplex network has three major components:The time required to establish a duplex circuit.Transmission delay due to the limited bandwidth of the circuit.Address Resolution Protocol (ARP) delays associated with duplex messaging.7. Verification and Validation (V&V)The CES V&V was performed by comparing results from the CES under controlled conditions with data collected from several FBCB2 field exercises involving live participants.Preliminary verification testing indicated that key components and interfaces of the CES operate as expected.  During the CES development process, verification methods noted in Army Pamphlet 5-11 including reviews, design walk-throughs, interface analyses, and traceability assessments were performed.  Key system components and interfaces were identified and specifically examined for proper design, implementation, and performance.Preliminary validation testing indicated that the CES performs as intended.  The CES was tested using scenarios comparable to the December 1999 FBCB2 Field Test II (FT2).  Tests show that messages flow from the clients (SIMCON and CIDs) to the CES, and back to the clients as expected.  Unicast and C2 and SA data messages were routed among SINCGARS, EPLRS CSMA, and EPLRS Duplex Networks and the resulting SOS and MCR within expected tolerances.8. HLA MigrationHLA migration is in progress, leveraging a C4I reference FOM [3] to develop required HLA interfaces. The CES will become an individual federate and associate with other TIM suite federate members. The CES functionality will remain intact after the conversion from DIS to HLA.The conversion entails updating the CES communications to the SIMCON and CID to use interactions for the exchange of SA and C2 messages.  An interaction involves the passing of information from one federate to another in the form of a message.  The CES interface that receives PDUs from ModSAF or Janus will be updated to use attribute updates for receiving entity state information.  Attribute updates are normally used to exchange data about objects that are persistent during the execution of the federation.  In addition to the existing interfaces, transition to the HLA will include the development of an HLA interface to the C4I Jammer Analysis Model (CJAM).  Jammer information will be provided to the CES through interactions.9. Future WorkThe CES’s object oriented design provides the system flexibility to allow for integration with other applications and expansion into the upper tactical internet and its associated radio networks.  Planned near term CES development includes integration with the C4I Jammer Analysis Model (CJAM) in FY00 and the Co-Site Interference Model (CIM) in FY01. Information on CJAM is available in another SISO publication [4].Modules planned for incorporation into the CES include the Near Term Digital Radio (NTDR), Mobile Subscriber Equipment (MSE), and Joint Tactical Radio System (JTRS).  HLA migration is also currently in progress.10. SummaryThe CES enhances the TIM suite’s ability to provide a low cost test and training environment.  It does so by providing high fidelity realistic communications effects for its subscribers.  Within the modeling and simulation domain three areas of benefit are soldier training, operations and experiments. Additionally, the CES can provide a mechanism for testing and experimentation (i.e., FBCB2) within a TI environment independent of physical radios and routers of the TI.11. References[1] J. Peace, E. Wood: “The TIM Suite – A Federation for Live/Virtual Simulation of C4I Systems ", Fall 2000 Simulation Interoperability Workshop, paper number 00F-SIW-066.[2] T. Christopherson, L. Dacunto: “STORM, A Testing and Training Tool for Lower Echelon Command and Control Systems”, Spring 1998 Simulation Interoperability Workshop, paper number 98S-SIW-033.[3] J. Roberts, V. Dobbs: “Application of a C4I Reference FOM to an Existing Simulation Environment", Fall 2000 Simulation Interoperability Workshop, paper number 00F-SIW-067.[4] M. Berry, J. McGowan, J. Peace: “CJAM – Assessing the Force-Level Impact of Tactical ECM on C4I Systems through Distributed Simulation”, Fall 2000 Simulation Interoperability Workshop, paper number 00F-SIW-068.Author BiographiesJARED DULMAGE is a Software Systems Engineer at The MITRE Corporation.  He received a Bachelors of Science degree in Electrical Engineering from Duke University in 1999.  While at MITRE for the past year, he has been supporting the Modeling and Simulation efforts.  In particular, he has supported the STORM project and has helped develop many of the key components within the Communications Effects Server (CES).TUAN HOANG is a Senior Software Systems Engineer at The MITRE Corporation.  Mr. Hoang received a Bachelors of Science degree in Computer Science from Rutgers University in 1997.  While at MITRE for the past four years, Mr. Hoang has been supporting the Modeling and Simulation efforts.  In particular, Mr. Hoang has supported the STORM project and has helped develop many of the key components within the architecture.JON A. McCONNELL is an Associate Department Manager at The MITRE Corporation.  Mr. McConnell manages MITRE support to the CECOM RDEC Command and Control Directorate (C2D).  Mr. McConnell holds a B.E. in Electrical Engineering from Stevens Institute of Technology and a M.S. in Electrical Engineering from Monmouth University.JoHN PEACE is the TIM Suite manager, coordinating the efforts of multiple organizations in the development of distributed C4I simulations for CECOM RDEC's Command and Control Directorate (C2D) at Fort Monmouth, NJ.  He has spent 13 years in support of DoD efforts at Fort Monmouth, including over 7 years as a Project Manager on several Special Operations Forces (SOF) and Test Equipment Modernization (TEMOD) programs.  He completed CECOM's 3-year Civilian Leadership Development Program (CLDP) in 1996, holds a BS in Electronic Engineering from Monmouth University and a Masters in Technology Management from Stevens Institute of Technology.MARK RIEHL is a Lead Software Engineer at The MITRE Corporation.  Mr. Riehl has been employed by The MITRE Corporation for the past five years, working primarily on man in the loop simulation development.  Currently, he is the technical leader for the STORM project.  Mr. Riehl holds a B.S. in Electrical Engineering from Drexel University and an M.S. in Electrical Engineering from Monmouth University.JAMES WESSEL is a Senior Software Systems Engineer at The MITRE Corporation.  Mr. Wessel has been employed with The MITRE Corporation since 1997.  He is the primary contact and development lead for the Communications Effects Server.  Mr. Wessel holds M.S. in Software Engineering from Monmouth University and a B.S. degree from Rutgers University.PAGE  5page 1