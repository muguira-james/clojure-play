The Devil is in the Details:Simulation Databases for Video SurveillanceDavid McKeownMike PolisRuss SchaafSteven SprangTerraSim, Inc.4620 Henry Street, Third FloorPittsburgh PA.  15217 HYPERLINK mailto:dmm@terrasim.com dmm@terrasim.com,  HYPERLINK mailto:mfp@terrasim.com mfp@terrasim.com,  HYPERLINK mailto:rsbe@terrasim.com rsbe@terrasim.com  HYPERLINK mailto:ssprang@terrasim.com ssprang@terrasim.comJoseph H. Findley IIISynthetic Environments ProgramTRW, Inc.7701 Telegraph RoadAlexandria, VA  22315Nancy GardnerU.S. Army Topographic Engineering Center7701 Telegraph RoadAlexandria, VA  22315-3864Keywords:simulation database construction, live and virtual correlation,measurement of geospecific accuracy, video surveillanceABSTRACT: In support of the DARPA Image Understanding program, two highly detailed geospecific databases were constructed using a variety of non-traditional cartographic source materials.  In this paper we present a retrospective of these databases used in real-time video surveillance and monitoring (VSAM).  The key VSAM requirement was correlation between live exercises and the virtual environment to ensure that the position of human movement, as tracked by real-time video stream analysis, were precisely reflected in the ModStealth visualization.The Schenley Park database, containing a VSAM test site on the campus of Carnegie Mellon University, was compiled largely from standard GIS data sources, and was augmented with building models derived from high resolution aerial imagery..The Fort Benning MOUT site was re-engineered to contain over 260 geospecific tree models and a highly detailed terrain surface derived from the integration of over 1000 GPS measured points and a one meter DEM. Both simulation databases fall in to category of relatively small areas of interest, 3x3 and 5x5 kilometers, with extremely large polygon budgets when compared with traditional exercise databases. Yet each contains significant complexity with respect to object models, terrain representation, and requirement for geospecific completeness. In this paper we describe the requirements dictated by the VSAM application, the novel use of a wide variety of geospatial data sources, the use of database construction automation to reduce manual modeling while preserving geopositional accuracy, and some quantative performance measurements of positional accuracy.1. IntroductionThe Defense Advanced Research Projects Agency (DARPA) Image Understanding for Battlefield Awareness Video Surveillance and Monitoring (VSAM) project has as its objective to develop a cooperative, multisensor video surveillance system that provides continuous coverage over urban and battlefield environments.This program sponsors basic research in image understanding that will enable a single human operator to monitor activities over a complex area using a distributed network of active video sensors.  Video understanding technlogy has been demonstrated to automatically detect and track multiple people and vehicles within cluttered environments, and monitor their activities over long periods of time.  Background material describing issues in automated video understanding can be found in an overview paper by Kanade [1] as well as other video understanding papers in the DARPA Image Understanding Workshop proceedings.Another participant in this project, the Software Experimentation, Evaluation and Demonstration Site (SEEDS) at the U.S. Army Topographic Engineering Center (USATEC), Alexandria, Virginia, is extending current Advanced Distributed Simulation (ADS) capabilities so that VSAM researchers may benefit from state-of-the-art simulation technology.   The objective is to develop a highly correlated analog to real world video surveillance systems within the virtual world.   This enables VSAM researchers to conduct pre-mission experimentation, run-time visualization, and after-action review (AAR). Additionally, this effort provides VSAM researchers with valuable data on optimal sensor geolocation, performance, occlusion, and intervisibility predictions.SEEDS implemented real-world sensors and relevant behaviors into existing ADS technology (i.e., Modular Semi-Automated Forces (ModSAF) a behavioral tool and OpenScene ModStealth: a 3-D Visualization tool). Further, they created a robust communication conduit enabling a VSAM Operator Control Unit (OCU) to efficiently relay information on sensor(s) and target(s)geoposition, orientation, heading, and identification. Description of this work can be found in [findley and hess [3]To support two of the VSAM Integrated Feasibility Demonstrations (IFD), TerraSim, with support from the SEEDS group at USATEC, created two virtual world databases using their TerraTools® database construction product during the summer of 1998 and winter of 1999. These databases were compiled into ModSAF high resolution compact terrain databases (CTDBs) using an S1000 WriteAPI data exchange mechanism.In this paper we describe the design issues and requirements dictated by the VSAM application, the novel use of a wide variety of geospatial data sources, the use of database construction automation to reducemanual modeling while preserving geopositional accuracy, and some quantative performance measurements of positional accuracy.2. Correlation RequirementsThe VSAM exercise requirements with respect to synthetic environments can be organized into two main concerns. First, the virtual environment should correlate with the live exercise so that movements and positions of people and vehicles detected and recovered using automated video analysis are accurately reflected and positioned in the virtual world.  This level of accuracy should allow a human observer of the ModStealth visualization  to understand the complete set of activity taking place, even though this activity represents the integration over the analysis of multiple video streams.Second, the modeling of video sensors including their 3D position, field of view, and lines of sight should be sufficiently accurate to permit experimentation with sensor positioning in the virtual environment.  Issues include the determination of optimal real world sensor positions and the prediction of handoff regions between multiple sensors.The implications of these requirements in complex, cluttered urban environments make the construction of such as simulation database from standard cartographic source data a challenge. Figure 1 shows a view from one of the CMU video camera looking across Field Robotics building towards the back of Wean Hall. The road running behind and around Wean Hall was one of the key areas for vehicle detection and tracking.  Figure 2 is the ModStealth representation for the same camera position and orientation in the virtual world. Figure 3 shows the set of GPS survey points and camera positions selected by the CMU VSAM team.Buildings in the distance, beyond the tree line, include the Carnegie Musuem and the University of Pittsburgh.  These buildings were omitted from the VSAM database since they were outside of the scenerio playbox and due to concerns of excessive polygon complexity.Figure 3 : CMU GPS Survey Points and Camera Locations3. Compilation of Schenley Parkfrom GIS sourceFigure 4:View of Schenley Park and Surrounding AreaLarge volumes of Geographic Information System (GIS) data are currently being created and maintained to support the modeling and management of complex urban environments. A three-dimensional visualization of the GIS data enables a better understanding of the complex spatial relationships involved in a dense urban area. In addition, 3D visualizations can be used for training of personnel, communication with the public,  for planning and zoning studies, and a number of other applications. Before useful 3D visualizations can become widely available, however, two requirements must be met: First, the visualization must be constructed with a minimum of operator input and expertise,  automatically using the information available in the GIS coverages. Second, the visualization must use an efficient representation, to permit real-time viewing and manipulation on inexpensive platforms. TerraTools as been developed to meet these requirements. Its capabilities are well demonstrated by the Schenley Park database.The Schenley Park area of Pittsburgh is typical of an urban environment and contains a large number of residential and commercial building structures, a 415 acre park with internal trails, paths, and roads, a dense transportation network, several bridges, and many unique building architectures. It is the location of Carnegie Mellon University and the University of Pittsburgh. While this sample database covers a modest area of 3 x 3 kilometers, it contains over 115.8 kilometers of roads and 5995 unique building structures, of which 4265 are residential housing. Figure 5: ARC/INFO GIS Source DataThe source data was ARC/INFO coverages for transportation, buildings, parks, water bodies and drainage, along with 5-foot elevation contours. Figure 5 shows the ARC/INFO source data used to construct this database. Yellow polygons indicate foliage, and green polygons represent residential buildings while red polygons are commercial structures. Blue areas indicate water bodies, a small section of the Monongahela River in the southwest corner, and several lakes and ponds within Schenley Park. The transportation network containing primary and secondary roads is indicated in red. Figure 6: Detail of GIS DataShowing Five Foot Contour LinesFigure 7: 3D Visualization of Carnegie Mellon CampusFigure 6 shows the detail in the 5-foot contours. Using TerraTools technology, this data was automatically converted into a seamless visual simulation database without manual editing of the original GIS data or of the contents of the final database. Tree canopies were generated from the park and transportation layers by automatically buffering the roads within the park polygonal description. Generic road textures were applied, based upon road type and size. TerraTools has unique capabilities to generate geospecific three dimensional structures from GIS source data. Building roof types (peaked, flat, overhang, cylindrical) and heights for building models were automatically set to inferred values from other attributes in the GIS data source, since the source GIS coverage contained building footprints without explicit height information. Attributes such as "residential", "commercial", "number of stories", and "capacity" can be leveraged via user defined scripts to infer height attributes. In this sample database, heights were automatically assigned based upon building footprint area. Smaller buildings were assumed to be residential and were given a constant height. Those with rectangular footprints were given a peaked roof.   Larger buildings were assumed to be commercial and given a flat roof with a height proportional to their area. Generic building textures for each class of structure were applied here; geospecific textures can be used when available. In addition, CAD models or 3D building models derived from aerial imagery or architectural drawings can be accurately placed within the source geospatial data using TerraTools, replacing the simpler models generated directly from the GIS data.As the Schenley Park database demonstrates, TerraTools allows urban planners, city agencies, and  commercial developers to generate detailed 3D visualizations of their regional and city GIS databases easily and efficiently, greatly increasing the value of these databases for communications and planning. The level of detail, geodetic accuracy, and ease of use provided by TerraTools is unparalleled by any other commercial product.4. Compilation of Ft. Benning databaseReuse of existing simulation database models and techniques for accurate repositioning using survey data (Ft Benning)TerraTools® generates geospecific simulation databases easily by automatically compiling cartographic features from a wide variety of data sources. But what happens when the necessary data simply isn't available, or too costly to produce?  TerraTools' easy-to-use editing capabilities allow users to tailor their database to fit individual specifications as easily as tracing a line.In support of the DARPA Image Understanding program, TerraSim constructed a detailed simulation database of the McKenna MOUT (Military Operations on Urban Terrain) Site at Fort Benning, Georgia. The 5km x 5km database was constructed in-house using TerraTools, TerraSim's automated simulation database construction product for use with real-time video surveillance and monitoring (VSAM) experiments. The database provides an excellent example of the ease with which TerraTools can incorporate hand-edited data into a simulation. The key VSAM requirement was correlation between live exercises and the virtual environment to ensure that the position of human movement, as tracked by real-time video stream analysis, were precisely reflected in the ModStealth visualization.Figure 8 : Overview of Benning MOUT SiteThe McKenna MOUT site contains 17 previously constructed building models, augmented with 17.7 miles of  type-specific roads, lakes, an airfield, dense forested areas with 260 geospecific tree models, 45 additional models including: fire hydrants, manholes, railroad ties, and telephone poles as well as over 1000 spot elevations captured using GPS. Models were placed automatically by TerraTools, based on measurements compiled by land survey teams, as well as engineering drawings of the site.The Ft. Benning database features extremely accurate placement of individual models along the perimeter and inside the MOUT. Typically, highly generalized tree regions are defined to represent forested areas by  tree canopy polygons. For this database, dense forested regions with a large number of accurately placed individual trees were required. Two techniques were used to accurately place the tree models. Along the eastern side of the MOUT, a land survey team compiled tree-location information using GPS (Global Positioning System) technology. TerraTools® automatically placed the individual tree models onto the terrain. Positions for tree models on the western side of the database were generated using tedit, part of the TerraTools toolset, from a set of orthophotos of the Benning database. An aerial orthographic image, or orthophoto, is an image in which the displacement effects of perspective and of terrain relief have been removed. Geopositions of objects are defined by their pixel locations in the orthophoto.Using an orthophoto in conjunction with TerraTools' tedit supports the positioning of many cartographic features not available from other sources simply by tracing them using tedit's versatile tool package. The image to the right shows the manually added western trees as well as tree canopies and built-up areas. Adding the trees was merely a matter of point-and-click on the orthophoto. Tree canopies, an airfield, and lake were manually digitized using the orthophoto and automatically integrated into the terrain skin. TerraTools automatically generated a reduced complexity tree canopy based upon user specifications, and also flattened the airfield and lake within the terrain skin. Models of telephone poles, fire hydrants, manhole covers, and railroad ties were also accurately placed on the terrain, based upon geopositions derived from the orthophoto.The building models in the database were supplied in MultiGen OpenFlight® format. TerraTools placed the building models on the terrain using a rigorous solution based on customer-supplied survey points. The result is a very accurate model layout with an estimated RMS 0.12 meter error on building corner positions and a RMS 0.38 meter error for building heights. This high degree of accuracy maintains line-of-sight realism, a critical requirement of the DARPA VSAM program. What you see from any given point in the simulation is what you would see standing on the ground at Ft. Benning. An example of this line-of-sight realism is illustrated in Figures 9 and 10.Figure 9:  View from Visual DatabaseFigure 10: Live Camera View5. Accuracy of Geospecific Database--  Lessons learned in techniques for assessing accuracy of geospecific databases.5.1 CMU Campus5.2 Ft. BenningWell we've done a preliminary assessment of buildingpositions in the virtual world vs. the NIMA survey data, and our recovered positions from the stereo imagery. Building height error measurements for 70 points (building corners and roof peak ends).The error in image based height measurement was about +/- .15m.The error in TSG based height measurement was about +/- .02mError range: Zerr = [-0.77, 0.60]Mean error: -0.017mAbsolute mean error: 0.32mRMS Error: 0.38mSo those error levels are about as close as you can measure from the imagery that we have on hand.  6. AcknowledgementsThe work described in this paper was sponsored by the Defense Advanced Research Projects Agency under Contract DACA76-97-C-0008 monitored by the U.S. Army Topographic Engineering Center, Fort Belvoir, VA.  We acknowledge the technical support of Mr. Douglas Caldwell, USATEC, and Mr. George Lukes, Program Manager, Image Understanding.7. References[1]   Kanade et. al. Advances in Cooperative Multi-Sensor Video Surveillance Kanade, et. al. Proceedings of the DARPA Image Understanding Workshop, Volume I, pp. 3-24, Morgan Kaufmann Publishers, Nov 20-23, 1999[2]   Robert F. Richbourg, and Frank Rotondo     “Planning for the Efficient Employment of Image Understanding Assets”,  “Proceedings of the DARPA Image Understanding Workshop”, Volume I, pp. 385-400, Morgan Kaufmann Publishers, Nov 20-23, 1998[3]   Findley, Joseph H. III an Haes, Steven C. :"Image Understanding for Battlefield Awareness Video Surveillance and Monitoring" In Proceedings of GeoComp99, July 25-27, 1999, Fredericksburg, VA. (to appear).Author BiographiesDAVID M. MCKEOWN, JR. is President and a founder of TerraSim, Inc. As a faculty member in the Computer Science Department of Carnegie Mellon University he has over 25 years of experience in the areas of image understanding for the automated analysis of remotely sensed imagery, digital mapping and image/map database systems, and computer graphics. Mr. McKeown has been a principal investigator on research programs in computer vision and rapid construction of virtual world databases for  advanced distributed simulation sponsored by the U.S. Army Topographic Engineering Center, the Defense Advanced Research Projects Agency, the National Imagery and Mapping Agency and the Air Force Office of Scientific Research. In 1996 he received the Photogrammetric Award (Fairchild) from the AmericanSociety for Photogrammetry and Remote Sensing, and the Schermerhorn Award from the International Society for Photogrammetry and Remote Sensing.MICHAEL POLIS is the Head of Visual Simulation and a founder of TerraSim, Inc. Mr. Polis received a B.S. in Computer Engineering from Carnegie Mellon University in 1992.  He has over 7 years experience in the development of algorithms and software for the generation of TINs and integrated TINs, including the CMU FastITIN terrain skin generation software, the BREP library for cartographic feature representation, and the TSG terrain paging format for Performer.  He has participated in the planning and generation of ITIN terrain skins used in the STOW-E, Prairie Warrior,  Camp Pendleton, Operation Kirby, Camp LeJeune JCOS, and Az Zubayr exercises.RUSS SCHAAF is a software engineer with TerraSim, Inc. Mr. Schaaf graduated from Carnegie Mellon University in May 1998 with a B.S. in Computer Science and Minors in Mathematics and History.  He received departmental honors for his undergraduate thesis work, "Issues in the Generation of Multiresolution Terrain Databases". Among other activities, he has been responsible for designing and implementing an model library and cartographic editor for vector data used within the TerraTools product.STEPHEN SPRANG is a software engineer with TerraSim, Inc. Mr. Sprang received a B.S. in Computer Science with a minor in Mathematics from Carnegie Mellon University in May, 1998. Mr. Sprang competed on Carnegie Mellon's ACM programming team in 1996 and 1997, placing 8th and 11th respetively in the regional competition.  Among other activities he has been responsible for the design and implementation of the Schenley Park and Fort Benning database to support the DARPA Video Surveillance and Modeling (VSAM)  Program.Joseph Findley IIINancy GardnerFigure 2 : Video View Tracking VehicleBehind Wean HallFigure 1 : Live View for Vehicle Tracking