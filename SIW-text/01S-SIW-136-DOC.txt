A Common Runtime Format for Virtual and Constructive Simulations Clark D. StevensUS Army Simulation Training and Instrumentation Command (STRICOM)12350 Research ParkwayOrlando, Florida 32826407-208-3673 HYPERLINK mailto:Jesse.J.Campos@saic.com Dan_Stevens@stricom.army.milBrett ButlerScience Applications International Corporation (SAIC)12479 Research Parkway, Suite 600Orlando, Florida 32826407-207-3646 HYPERLINK mailto:Jesse.J.Campos@saic.com Brett.Butler@saic.comCharles CampbellScience Applications International Corporation (SAIC)12479 Research Parkway, Suite 600Orlando, Florida 32826407-207-2700 HYPERLINK mailto:Jesse.J.Campos@saic.com Charles.E.Campbell@saic.comJon Watkins, SAICEric Root, SAICHenry Marshall,STRICOMTeresita Sotomayor, STRICOMKeywords:  Environment, Framework, Design, API, Services, Terrain Database (TDB)ABSTRACT: At STRICOM, there are three basic formats for the runtime representation of terrain databases for Computer Generated Forces (CGF).  These include the Close Combat Tactical Trainer (CCTT) Model Reference Terrain Database (MrTDB) format, the ModSAF Compact Terrain Database (CTDB) and WARSIM TDB format.  Each of these formats provides unique capabilities to their respective system, but there are many common requirements.  PM CATT sponsored the Common Database project, conducting an exhaustive requirement analysis of the CCTT and ModSAF environmental representations. Initial study results indicate that a single format supporting the environmental representation requirements of both CCTT and ModSAF is technically and programmatically feasible.  The study concluded that the current WARSIM format is the most logical starting point for future efforts to implement a single terrain format capable of achieving OneSAF and CCTT higher resolution requirements.  CCTT has joined with OneSAF and WARSIM to implement this strategy within the next 3 years to enhance interoperability and consolidate software support activities.This report will describe the work completed under Phase I of the Common Database project and the planned extensions to assess the environmental representation requirements for the WARSIM system. These extensions will be funded under a consolidated program co-managed by WARSIM, OneSAF and CCTT.  This report details the technical approach for the upcoming design phase of the consolidated program.  The design activity will include benchmarking of existing implementations with extrapolations to address system level performance for each simulation.  The design activity will include prototype processing to ensure direct/near direct reuse of CCTT, ModSAF and WARSIM legacy Terrain Databases (TDB).  The design activity will include a comprehensive reuse assessment of environmental components of Synthetic Theatre of War (STOW), WARSIM, CCTT and other systems to mitigate risk, reduce development cost and optimize early delivery of enhanced capabilities.  The final product of the design phase will be a system design detailing the OneSAF Objective System (OOS) environment subsystem architecture, reuse strategy and implementation plan.IntroductionSTRICOM has lead development of several major simulations over the years including Warfighter’s Simulation (WARSIM), Modular Semi-Automated Forces (ModSAF) and Close Combat Tactical Trainer (CCTT).  The OneSAF program has been initiated to attempt to align these simulations to improve interoperability and reduce redundant expenditures and software maintenance costs.  To date, the OneSAF program has been focussed on consolidating changes from various ModSAF users replacing ModSAF version 5.0 with the OneSAF Operational Tested Baseline (OTB).  Throughout this paper, the usage of the terms ModSAF and OneSAF OTB are interchangeable.  The OneSAF Objective System (OOS) has undertaken a complete re-engineering of the ModSAF functionality with enhancements.  OOS is to be integrated into CCTT to replace the CCTT SAF in 2004.Among these simulation systems, there are three basic formats for the runtime representation of terrain databases for Computer Generated Forces (CGF).  These include the CCTT Model Reference Terrain Database (MrTDB) format, the ModSAF Compact Terrain Database (CTDB) and WARSIM Terrain Database (TDB) format.  Each of these formats provides unique capabilities to their respective system, but there are many common requirements.  PM CATT sponsored the Common Database project to conduct an exhaustive requirement analysis of the CCTT and ModSAF environmental representations.  Initial study results indicate that a single format supporting the environmental representation requirements of both CCTT and ModSAF is technically and programmatically feasible.  The study concluded (as described in Sections 2-4 below) that the current WARSIM format is the most logical starting point for future efforts aimed at developing a common runtime format.  CCTT has joined with OneSAF and WARSIM to implement this strategy within the next 3 years to enhance interoperability and consolidate software support activities. WARSIM Synthetic Natural Environment (SNE)The WARSIM SNE was developed to run in the Joint Simulation System (JSIMS) discrete event simulation at low to medium resolution (1:1,000,000 to 1:250,000 scale).  In order to extend the existing application to meet the requirements of OneSAF and CCTT in time step simulations, considerable system level analysis is planned to identify areas where runtime performance in real time systems is likely to be a factor. In order to extend the WARSIM runtime format to provide direct reuse of legacy TDB’s, the design must provide processes and tools for direct or near direct conversion from the native format to a format recognizable by WARSIM terrain compilers and services. The following sections describe the work completed under Phase I of the Common Database project and the planned extensions to assess the environmental representation requirements for the WARSIM system. These extensions will be funded under a consolidated program co-managed by OneSAF, WARSIM and CCTT. The technical approach for the upcoming design phase of the consolidated program is detailed.  The design activity will include benchmarking of existing implementations with extrapolations to address system level performance for each simulation.  The design activity will include prototype processing to ensure direct/near direct reuse of CCTT, ModSAF and WARSIM legacy TDB’s.  The design activity will include a comprehensive reuse assessment of components from these and other systems to mitigate risk, reduce development cost and optimize early delivery of enhanced capabilities.  The final product of the design phase will be a system design detailing the OOS Environment subsystem architecture, reuse strategy and implementation plan.  Programmatic Feasibility and Advantages for a Common Runtime FormatPM CATT has a requirement to interoperate between MrTDB-based CCTT and CTDB-based AVCATT systems.  WARSIM has a requirement to interoperate with CCTT.   OneSAF has a requirement to integrate into CCTT and to interoperate with WARSIM.  Differences in environmental representations are a key constraint in achieving acceptable interoperability between these systems due to the discernible nature of the terrain differences.  For example, each system uses a different set of “soil characteristics” to execute their respective mobility models.  To compound matters, there is no single global authoritative source for soils data, so each system blends the best available sources to develop its soil characteristics data-set leading to greater disparities in the representations.  As a result, though most of these systems use variations of the standard NATO Reference Mobility Model (NRMM) to assess mobility, the results between systems will usually vary due to differences in the soil characteristics driving the model.Phase I of the Common Database Project conducted an analysis of the set of requirements common to CTDB and MrTDB.  The intent was to decide on a best technical approach for achieving interoperabilty at the environmental subsystem level.  The initial phase concluded that a common TDB format with common services provides the best technical and programmatic solution for environmental interoperability. A common format would bring the advantages of reuse in databases and components, and better interoperability between the SAF systems.  The investigation also concluded that neither CTDB nor MrTDB is sufficiently extensible to meet the broad set of requirements peculiar to each format.  The study determined that the best long-term approach would be direct reuse of the WARSIM runtime with enhancements for the CTDB and MrTDB representation not currently supported by WARSIM terrain. [1] The fact that the WARSIM, OneSAF and CCTT programs are willing to cooperate in the development of a common runtime format removes the most substantial obstacle to feasibility of this initiative.  The programmatic feasibility is further facilitated due to the innovative development approach OneSAF is taking.  Under the OneSAF STRICOM Omnibus Contract (STOC) process, the development efforts are “decomposed” into numerous smaller task orders.  The OneSAF Environmental Runtime Component (ERC) is being developed under a task order independent of the overall OneSAF architecture, permitting environment developers to de-couple the implementation from the OneSAF architecture.   This provides the opportunity to maintain backward compatibility with the WARSIM system, so that OneSAF enhancements can be supported mitigating WARSIM post-IOC development costs and enhancing interoperability between the systems at the environment subsystem level. In order to maintain backward compatibility with WARSIM, the OneSAF, CCTT, and WARSIM programs have established an initial agreement to co-manage the OneSAF ERC software development effort.  To this end, a Memorandum of Agreement (MOA) is under development to establish a Change Control Board (CCB) governing the OneSAF ERC Configuration Management (CM) process.  This process will phase requirements for implementation and establish delivery schedules to ensure that the requirements for each program are achieved on time.   The Integrated Electronic Warfare Tactical Proficiency Trainer (IEWTPT) Program is also expected to enter the agreement.  WARSIM SNE Reuse Issues WARSIM ERC is a constructive-level simulation.  The WARSIM SNE leveraged representational technology and lessons learned from several legacy environmental implementations to advance the state-of-the-art in terrain representation.  The goal was to produce a representation that is extensible and flexible to accommodate changes in requirements and to provide a basis for a unifying approach to SNE.  As such, much emphasis was given to software engineering so that the design and implementation could be easily understood and maintained by engineers not involved with the initial effort.  While the resultant implementation is oriented toward WARSIM training requirements, the design and representation provide an attractive reuse foundation for both emerging and evolving ground warfare simulators.The WARSIM SNE was designed for extensibility to eventually support visualization and other requirements of virtual simulation systems.  Some of the flexible capabilities of WARSIM SNE include round-earth model, coordinate system flexibility, C++ implementation, architecture independence, and an adaptable Triangulated Irregular Network (TIN) representation of the terrain skin.  There are many resolution and performance issues that OneSAF must address during system design to ensure that all new requirements are accommodated.   Many of these issues were identified by Dr. Paul Birkel of Mitre Corporation [2] who continues to advise the OneSAF ERC team in developing a plan to ensure that these and other issues are addressed.Terrain Representation FormatThe WARSIM terrain representation is comprised exclusively of TIN’s.  Many of the concepts underlying the WARIM format were taken from the Improved CTDB (ICTDB) work performed under the Synthetic Theatre of War (STOW) program [3].  WARSIM enhancements include elimination of the requirement to “clip” TIN’s to page boundaries [4] and efficient topology with implicit location of neighboring polygons encoded [5]. The legacy approach to TIN representation required triangles to be clipped to rectangular boundaries to aid spatial referencing.  This approach results in a significant increase in triangles because any triangle crossing a boundary must be divided and retriangulated.  The WARSIM paging unit eliminates this constraint, resulting in fewer triangles to represent an identical terrain surface. [4] Fewer polygons result in better performance in many of the terrain services. This approach allows the triangles to be used more efficiently to achieve greater accuracy and/or improved performance in the source elevation services. In WARSIM, pages are nominally 5 arc-seconds in granularity, but since the page size is configurable, the approach is extensible to accommodate smaller areas with higher densities of TIN’s through smaller paging units.  The affect on storage and performance must be investigated for suitability for OneSAF in the current form.WARSIM uses a well-defined Geo-Tile Reference System (GTRS) for partitioning the earth’s surface [6].  The WARSIM run-time terrain compiler uses this referencing system to coordinate the terrain compilation.  Sections of the terrain database can be incrementally compiled so that a change in one area does not require a complete recompile of the database.  In addition, sections of terrain can be compiled in parallel, reducing the amount of time it takes to transform information stored in a SEDRIS STF into the final run-time format used by the SAF.Terrain Feature RepresentationWARSIM SNE provides a data-driven terrain feature representation. The approach allows configuration of terrain features and their attributes to be defined though text files used to compile the terrain information into the WARSIM run-time format.  These files provide a clear, concise description of available terrain objects to other WARSIM applications.  The data-driven approach is facilitated through the WARSIM Terrain Common Data Model (TCDM) [7].  The WARSIM terrain representation does not support feature models that may be necessary to efficiently manage OneSAF terrain feature densities.  As an example, CCTT’s Primary One TDB contains several million individual tree instances represented as aggregate models.  The current WARSIM implementation will not support these aggregate models since the CCTT approach relies on right triangles of a pre-determined size.  OneSAF must devise an efficient mechanism for dealing with the high feature densities expected in forest and urban areas.The W2K environment has a limited model of arc-node connectivity for roads and railroads, but the connectivity can only be created at compile-time, not runtime. Richer support for the topology will be necessary for efficient planning and maneuver in dense urban areas. ModSAF has done work in this area for multi-elevation structures (MES) but this has not been a clear-cut success in terms of military models successfully and consistently using it. Adding support for a richer, and dynamically changing, topology will be addressed in the ERC system design.The WARSIM SNE has no model of features with geometry that can be "entered" and "maneuvered within".  This is a completely new design area for WARSIM enhancement requiring a low-overhead solution for interoperation with CCTT vehicular manned modules.  ModSAF MES provides a starting point, but the limitations of that implementation must be examined to avoid the same pitfalls and ensure an extensible implementation in OneSAF.Finally, the WARSIM Dynamic Terrain capability does not support geometry changes.  Extensions will be necessary, not only for adding geometry to existing terrain elements, but also for operations in urban environments, e.g., knocking “mouse-holes” in walls.  The existing implementation will have to be replaced by an implementation compatible with the OneSAF architecture.Spatial Reference Frame (SRF) for TerrainHistorically, virtual ground warfare systems have tended to use a topocentric coordinate system, such as Universal Transverse Mercator (UTM) or Military Grid Reference System (MGRS) to represent terrain coordinates.  This method has the advantage of certain assumptions, e.g., the z-coordinate is always “up”, improving performance and simplifying algorithms.  The disadvantage is that databases extending beyond the size of a UTM zone begin to introduce unacceptable distortion in elevation and coordinates.  Furthermore, UTM databases do not tile into seamless surface representations and the gravity vector is not fixed.To approximate the effects of curvature of the earth for exercises on a larger scale, ModSAF developed the Global Coordinate System (GCS).  This is a special case of a geocentric SRF where the earth surface is divided into one degree cells.  For each cell, the terrain is represented as a tangent plane normal to a vector extending from the origin of the ellipsoid. ModSAF currently supports both UTM and GCS. A “switch” is provided when the application is loaded to permit the system to run in either coordinate system depending upon the SRF of the TDB that is being loaded.  CCTT utilizes only UTM based TDB’s.  WARSIM encapsulates the coordinate data types within an abstraction to separate the details of the coordinate system from the models.  The WARSIM Encapsulated Coordinate System (ECS) explicitly stores both geodetic coordinates (for spatial indexing) and geocentric coordinates (for geometry calculations) in the Dual Coordinate Representation (DCR) system.Since OneSAF must provide functional equivalence for ModSAF and CCTT, the extensibility of the WARSIM ECS implementation must be investigated.  It may be acceptable for larger exercises, but smaller, highly focused activities, such as MOUT, may require a different underlying coordinate representation. Different ECS representations should be achievable through a standard Application Programmers Interface (API) by linking the appropriate SRF without involving any code changes to models.  For database reuse, one-to-one conversions between these coordinate systems do not exist and so several alternatives are under consideration.  OneSAF may either develop processes and tools to convert directly from UTM and GCS to geodetic for direct recompilation.  Another potential solution is extension of the coordinate systems natively supported by ECS to include GCS and/or UTM directly.  For GCS, this should not be technically difficult since GCS is a special case of a geocentric SRF.During the design phase, the coordinate conversion code will be isolated and benchmarked.  The number of conversions required under different modeling scenarios will be estimated to assess the impact to overall system performance for each of several alternative extension strategies.  The findings and recommended implementation approach will be documented in the OneSAF ERC Sub-system Design Document (SDD). Requirements to Support a Virtual-Simulation Common Database Requirements Analysis [1]The Common Database requirement analysis served as a mechanism for documenting the current state of the ModSAF and CCTT environmental sub-systems, while providing a logical milestone early in the project.  The analysis was focussed on a thorough review of the two systems and tools to track terrain database interfaces. Because multiple approaches to providing a common terrain database are possible, each with its own benefits and tradeoffs, the decision was made to limit the requirement analysis phase to capturing the superset of functional capabilities the two systems must support. Two different processes were used to produce the Common Database requirement document.  For CCTT, existing Software Requirements Specifications (SRS) and CCTT Environment component developers’ experience provided the basis for generating requirements.  For ModSAF, source code examination and review of “Compact Terrain Database Library User Manual and Report” were relied upon since no comprehensive software requirement specification exists.  These processes are described in more detail below.CCTT Requirements Analysis ProcessGeneration of requirements for CCTT was aided by involvement of personnel with direct and detailed CCTT experience, as well as availability of detailed development notes and formal documentation.  During the CCTT analysis, the following sources were used:1) Software Requirements Specifications (SRS) for relevant CCTT system components2)  Analysis of CCTT software (PDSS 7.0)3) Review of supporting documentation (e.g., design notes, papers, etc.)The initial step of the CCTT analysis consisted of gathering existing CCTT requirements and consolidating these requirements to meet the Common Database project objectives.  Many requirements were eliminated because they were too specific for a system-level view, while others were removed because they contained implementation-level information or were deemed out of scope for the effort.  Filtering out feature enumeration requirements further reduced the relevant “shall” statements. The remaining requirements were then reviewed for duplication and rephrased as appropriate to accommodate a system view.  Using this initial set of requirements, the remaining information sources listed above (e.g., software and supporting documentation) were reviewed to determine if key capabilities were properly captured.  Based upon this analysis, several requirements were added or modified.Analysis of United Kingdom Combined Arms Tactical Trainer (UKCATT) requirements was limited to documentation of the major new feature types planned for inclusion in the UKCATT system.  The functional differences between the systems are minimal (e.g., database border areas) and thus not deemed significant at a system-level.ModSAF Requirements Analysis ProcessModSAF 5.0 documentation (including conference papers) was used to identify major functional areas where terrain database support is required.  The code was then examined, through automated means, to identify external terrain data structures and interfaces used by libraries throughout the system.  Approximately 30 requirements were written to capture the terrain functionality necessary to support ModSAF capabilities.  To verify completeness, the requirements are linked (traceable) to the external terrain interfaces that implement them.Detailed analysis of the “environment” portion of the ModSAF system is difficult for several reasons.  Unlike CCTT, where capabilities are compartmentalized, the ModSAF architecture is built around functional libraries.  Several libraries can constitute a single functional capability that is considered a part of the environment in CCTT, making it difficult to determine whether the capability is viewed as part of the environment in ModSAF.  One example would be near-term path planning.With over 600 libraries, the task of trying to compartmentalize ModSAF to identify which terrain services support which ModSAF functional areas was deemed to be beyond the scope of this requirements analysis effort.  Instead, the effort concentrated on tracking the low-level terrain interfaces defined in libctdb to the files in which they are used.  A more thorough understanding of the functional capabilities using the terrain services will be achieved through the prototyping effort in the next phase of this project.  If available, the ModSAF Environmental Data Model (EDM) efforts will provide the supported capabilities on a per terrain feature basis and can be leveraged as the first step in gaining this understanding.  The prototyping effort will help mitigate the risk of overlooking or underestimating a portion of the work required to implement and integrate a common terrain database format and services.Requirements MergeThe CCTT and ModSAF requirements were derived independently so that interim results from one analysis would not influence the other.  As a result, the requirements produced by the two efforts required reconciliation to merge similar requirements and achieve consistent phrasing and level of detail.  During the requirements merge, requirement developers discussed the commonality between similar requirements in each system, looking for opportunities to create common requirements.  In some cases, requirements were so closely matched that one was selected based upon the best phrasing.  In several cases, a given requirement for one system was only partially supported by the other.  In these cases, the requirement was decomposed into two or more, thereby allowing the common subset to be captured in one requirement while explicitly capturing the differences in another.At the end of the merge, common capabilities between the systems shared a common requirement.  In CCTT, the terrain services are tightly bundled with the database primitives, while in ModSAF the database primitives represent the external interface for the central terrain capability while the services are scattered among many different libraries.  We chose to maintain each system’s more natural mapping in our requirements, and thus CCTT ended up with a larger number of abstract terrain services than ModSAF.The merge resulted in the following requirement counts:Requirement GroupingNumberCommon 31ModSAF Specific 14CCTT Specific16Total 61These counts must be balanced against the following considerations:A larger number of specific (or specialized) terrain services were captured for CCTT (thus the larger number of CCTT specific requirements).   This is a natural result of the tighter coupling between CCTT components and a more production/requirements oriented development.Many of the ModSAF specific requirements capture substantial functionality (e.g., multi-elevation structures) while most of the CCTT specific requirements capture more isolated and/or specialized services.The common requirements cover almost all of the primitive database services (e.g., height of terrain).Given these observations, the overall characterization of the merge is that the systems, especially with respect to terrain primitives, have a lot in common.  ModSAF has a few substantial functional capabilities that are wholly or largely missing in CCTT, while CCTT has a wider range of specialized/optimized operations.  Additional Requirement Analysis Since OneSAF must replace both ModSAF (OTB v1.0) and CCTT SAF, the requirement analysis for CCTT and ModSAF form a subset of the overall OneSAF program requirements.  In addition to the work already completed under the Common Database program, OneSAF ERC must examine all OOS Technical Requirements Document (TRD) requirements allocated to ERC by the Architecture and Integration (A&I) contractor to define the ERC architecture.  All TRD requirements allocated to the ERC Component will be refined into the ERC System Requirements Specification (SRS) in subsequent “block” development cycles. The US Air Force Joint Synthetic Battlespace (JSB) and Joint Strike Fighter (JSF) programs have expressed interest in reuse of the WARSIM SNE software to support research, training and Simulation Based Acquisition (SBA) objectives.  The Joint Warfare System (JWARS) program has expressed a similar interest and as mentioned earlier, the IEWTPT program has committed to direct reuse of the WARSIM SNE.  Further requirement analysis and design activities will be necessary to accommodate these programs if cooperative development agreements are established.The Environment subsystem level requirement analysis and design activities described herein will be implemented over the next four years using a spiral development paradigm to provide functional equivalence with ModSAF and CCTT SAF.  The requirements and design will be continuously revisited in an iterative development process.  Design Approach for OneSAF ERCThe WARSIM SNE is essentially a framework within the JSIMS architecture.  Proven standard models are integrated into the SNE framework with very few new models developed.  The technical approach for OneSAF is focussed on a continuation of this strategy.  The first year of OneSAF ERC development will provide minimal new functionality and will instead focus on ensuring that the architecture is extensible to meet the much higher resolution requirements OneSAF must support.  Reuse candidates for integration with enhancements or modifications will be identified and agreements for these services will be established.  The infrastructure necessary to support OneSAF ERC will be identified. API DefinitionA key to the successful development of WARSIM SNE within the JSIMS program was the early definition of the JSIMS API (JAPI).  This serves as a mechanism to encapsulate the SNE implementation and to decouple the SNE development not only from model developers, but also from the JSIMS architecture itself.  This was critical, since the JSIMS architecture has evolved dramatically over the life of the program.  Since the OneSAF architecture has not yet been defined, this API definition is essential to permit early development of the ERC without fear of substantial rework.  This effort will involve working with the OneSAF architecture group and model developers to initially define the interfaces and then to evolve them as system requirements are better understood.  This includes defining functional boundaries to include virtual-level functionality. Extensions to the WARSIM Federation Object Model (FOM) will also be defined.Software Reuse Technical ApproachA key tenet aiding WARSIM SNE was direct reuse of existing environmental models.  With limited budgets, WARSIM and OneSAF recognize that new development of models would erode funds and dilute the SNE technical expertise across a broad range of environmental modeling problems already well understood and adequately modeled by other organizations.  Models providing even a rudimentary representation are preferred over new development.  These models can be replaced within the ERC framework, usually with minimal impact to existing interfaces.  Initial reuse studies, for all domains will be conducted and results documented in the ERC SDD. The reuse assessment will include collection of specific system performance metrics with analysis to estimate impact on overall OOS system performance. Reuse CandidatesEvaluation of several specific reuse candidates is planned.  Where enhancements and/or optimizations are required, agreements will be established with the developing organization.Dynamic Environment (DE) Server/Federate.  WARSIM provides only a rudimentary DE capability to edit feature attributes and overlay (not integrate) terrain features. This capability must be extended to provide a capability for runtime repolygonization of the terrain skin.  Several existing software systems provide a good fit with the OneSAF requirements and integration of one of these is preferred over extensions to the WARSIM capability.  Initially, STOW’s Dynamic Terrain Simulation (DTSim) and Diamond Visionics DE servers will be evaluated.  An integration candidate will be selected with integration strategy articulated in the SDD.  OneSAF plans to cooperate with the Defense Modeling and Simulation Office (DMSO) Integrated Natural Environment (INE) program to define a set of standard interfaces to ensure that as these and other DE systems evolve, OneSAF can take advantage of the advances without remaining tied to any particular implementation.  Stealth Federate.  The WARSIM SNE provides a low to medium resolution visualization capability for Unmanned Aerial Vehicles (UAV) through an OpenFlight database.   This database is visualized through direct integration into the Multiple UAV Simulation Environment (MUSE) system.  ModStealth and WARSIM UAV will be investigated for integration into the ERC architecture.  A final determination will be made on the candidate for integration with appropriate integration strategy.  Again, standard formats and interfaces will be defined cooperatively by OneSAF and DMSO’s INE program to foster competition. Ocean, Atmosphere and Space Environmental System (OASES).  WARSIM SNE provides a rudimentary atmospheric and oceanographic representation through direct reuse of the Total Atmosphere and Ocean Server (TAOS) low resolution global Meteorological and Oceanographic (METOC) database in a pre-distributed implementation. Under DMSO’s INE program, TAOS has evolved into OASES with various components of direct interest to OneSAF.  OASES provides a run-time distribution capability with consistent editing through the Environmental Tailoring System (ETS) and Environmental Data Server (EDS).  The OneSAF ERC design will define the OASES integration approach including any enhancements and optimization required.  Specifically, a proposed design for a client application residing in OneSAF will be developed cooperatively with the OASES developers.Chemical – Biological Simulation and Transport Models.  WARSIM currently uses the Defense Threat Reduction Agency (DTRA) Hazard Prediction and Analysis Capabilities (HPAC) and its Second Order Closure and Integrated Puff (SCIPUFF) transport model to represent biological, chemical and smoke effects.  The design will articulate a strategy for extending the embedded WARSIM models to provide a stand alone federate.  This may be accomplished in conjunction with the INE program, possibly in the context of direct OASES integration.High Resolution Terrain Model.  ModSAF MES and the Virtual Emergency Response Training System (VERTS)/Military Operations in Urban Terrain (MOUT) capabilities will be assessed for high, very high, and ultra-high resolution modeling reuse.  Recommendations/conclusions for integration into the ERC architecture will be documented.Runtime Performance AssessmentAs discussed earlier, WARSIM is a discrete event simulation operating with conservative time management.  OneSAF ERC must maintain backward compatibility with the WARSIM/JSIMS architecture and associated restrictions while operating in other time management schemes.  Benchmarks will be collected on key services and documented to establish the current performance of the WARSIM SNE implementation for API calls in both UNIX and NT environment.   Candidates for optimization will be identified.Multi-Resolution Composition Resource Repository The current WARSIM SNE software deliveries comprise over 15 gigabytes of environmental data. Any data enhancements or modifications generally require a complete redelivery of all data.  This cumbersome process severely restricts the SNE capability to rapidly respond to new requirements or defects.  For OneSAF, users will be provided a capability to compose the ERC during scenario generation by defining the geographic coverage area(s) and resolution(s) desired.  The required data will be delivered from a central web-based resource repository with appropriate security measures.   In the current WARSIM SNE implementation, only two resolutions are available (low and medium), with only a single resolution for any particular area. This representation must be extended to support multiple resolution views of a given geographic area.  This will provide the opportunity for development of an extensible framework supporting composition of a multi-resolution SNE.During the first year of OneSAF ERC, a multiple resolution composition capability will be prototyped to include a Local Area Network (LAN) web-based browser providing user capability to interactively define the geographic coverage area and resolution ranging from JSIMS low resolution (1:1 million) to Very High Resolution (1:12,500).  The browser will initially provide the capability to access datasets from all existing WARSIM compliant databases with OneSAF prototype databases added as they become available. Services for reasoning on these representations will be limited to modest extensions to existing WARSIM SNE services during the first year. Toolset Rapid Prototyping/DevelopmentERC will develop a suite of automated regression test tools via rapid development and prototyping methods.   The ERC toolset will leverage existing tools in the WARSIM 1.0 baseline as a starting point.  These development activities will support long-term ERC component development, integration and test. Compiler enhancements will be prototyped providing a the capability to consume converted non-WARSIM databases including CCTT and ModSAF.   This task includes development of a prototype process for converting both CCTT and ModSAF databases into a format readable by the enhanced OOS terrain compiler. Databases planned for conversion include STOW Southwest Asia (SWA), the STOW SWA Az Zubayr inset, and Close Combat Tactical Trainer (CCTT) Primary 3 (Fort Hood).  DARPA Advanced Simulation Technology Thrust (ASTT) Integrated Geotypical Terrain Generation (IGTG) geotypical datasets will also being assessed. OneSAF ERC Block A Software DevelopmentThe WARSIM requirements allocated to SNE software will be developed to support integration into WARSIM version 1.1.  To facilitate this, OneSAF ERC developers will meet with technical representatives of WARSIM to negotiate code and integration standards for integration of OneSAF Block A/WARSIM 1.1 common baseline code.  Blocks B and C will follow a similar process for additional WARSIM requirements and for those systems OneSAF must integrate into. Related WorkIn addition to the ERC, there are two other components of the OneSAF environment software development.  Together, these components comprise a product line within the OneSAF Product Line Architecture Specification (PLAS).  The interrelations of these components and the implications for interoperability are discussed in [8].As discussed, the ERC software is data-driven by the EDM component.  The EDM defines the features, attributes and effects for all aspects of the environment subsystem. DMSO and the Army Modeling Improvement Program (AMIP) have co-funded extensions to the OneSAF EDM to provide a Common Data Modeling Framework (CDMF) for application across the M&S community.   Data Models are being developed for a wide range of systems OneSAF must interoperate with or integrate into for all environmental domains.  A third major component of the OneSAF environment product line is the Environmental Database Generation (EDGe) system.  The EDGe component must provide the tools and processes for building environmental databases in data-driven software controlled by the EDM.  SummaryThe CCTT Common Database project found that ModSAF and CCTT environmental representations share many common requirements.  The study determined that a single runtime TDB format is programmatically and technically feasible.  The study further concluded that the WARSIM SNE provides the best foundation for future efforts to implement a single format capable of satisfying OneSAF and CCTT higher resolution requirements. The OneSAF ERC has undertaken this effort in a program co-managed by WARSIM, CCTT and OneSAF. The enhanced ERC will be integrated into OneSAF and CCTT while maintaining backward compatibility with WARSIM to enhance interoperability and share costs between these programs.   AcknowledgmentsThe authors wish to thank Dr. Paul Birkel of Mitre Corp. for his specific support of the OneSAF environmental objectives and for his general contributions coordinating activities across the M&S environmental community. References[1]	CCTT-ModSAF Common Terrain Database Project, Requirements Report, SAIC Document Number SAIC-00/7647&00, August 2000.[2]	Birkel, P. A., OneSAF Objective System (OOS) ERC Issues, electronic mail, 22 November 2000.[3]	Stanzione, T., Evans, A., Chamberlain, F., Buettner C.: “Integrated Computer Generated Forces Terrain Database” Proceedings of the Fifth Conference on Computer Generated Forces and Behavioral Representation, pp. 399-409, May 1995.[4] Campbell, C. E., Craft, M. A., “Advancements in Synthetic Natural Environment Representations” Proceedings of the Eighth Conference on Computer Generated Forces and Behavioral Representation, 8TH-CGF-071, May 1999.[5] Craft, M. A.: “TINs Encoded as Point Sequences for Run Time Formats” 1998 Spring Simulation Interoperability Workshop, 98S-SIW-017, March 1998.[6]	Birkel, P. A., Cauble, K., Miller, D., Root, E. D.: “The GeoTile Reference System (GTRS) Specification” 1999 Spring Simulation Interoperability Workshop, 99S-SIW-013, March 1999.[7] Birkel, P. A., “The Terrain Common Data Model (TCDM)-- A Joint Effort of JSIMS, STOW, and JWARS” Proceedings of the Eighth Conference on Computer Generated Forces and Behavioral Representation, 8TH-CGF-004, May 1999.[8]	Stevens, Clark D., Toward a Common Synthetic Natural Environment, Interservice/Industry Training, Simulation and Education Conference (I/ITSEC), MS-041, December 1999. Author BiographiesClark D. (Dan) Stevens, LCDR USN, RET, is a former Naval Aviator and Aeronautical Engineering Duty Officer with over ten years experience as an ASW Mission Commander flying the S-3 Viking.  He is a graduate of the Naval Postgraduate School (M.S. Computer Science, 1993), and the Naval War College (1988). He served as the STRICOM SNE Team Leader for development of WARSIM/JSIMS SNE from June 1996 to April 2000 and has served as the OneSAF Environment Lead since then. Brett E. Butler is a Chief Scientist working for SAIC in Orlando.  He has over twenty years of experience in developing modeling and simulation systems.  He is currently working in the technology area of real-time representations of natural and interior environments.  He is also serving as task order manager for the OneSAF Environment Runtime Component development task order.  Mr. Butler holds a Masters of Arts degree in Mathematics and Control Theory from Arizona State University.  His interests include simulation, software engineering, computational geometry, and computer graphics.Charles E. (Chuck) Campbell is a senior software engineer with SAIC working on the OneSAF ERC project and SAIC’s Research Project Team.  His WARSIM responsibilities included design and development of Synthetic Natural Environment representations and services.  Mr. Campbell holds a Masters of Science in Computer Science from the University of Central Florida and a Bachelor of Science in Computer Science from Indiana University.  His interests include simulation, software engineering, computational geometry, and computer graphics.Jon Watkins is a senior software engineer with SAIC.  He has contributed to a variety of simulation systems over the last ten years, and is presently working on OneSAF ERC and CCTT/UKCATT database development.  Mr. Watkins received his Bachelor of Science in Computer Engineering from the University of Central Florida.Eric Root is a senior software engineer with SAIC working as the technical lead for the SNE component of the WARSIM program. His responsibilities include oversight of the design and development of SNE representations and services.  Mr. Root holds a Masters of Science in Computer Science from the University of Central Florida and a Bachelor of Science in Computer Science from Missouri Western State College.  His interests include simulation, software engineering and basketball.Henry Marshall is an Electronics Engineer in the STRICOM Engineering Technology (ET) Division. He is the lead for SAF development on the CCTT system and a member of the OneSAF team. His eighteen years with the Government have been mainly in CGF and Software acquisition. He received a BSE in Electrical Engineering and an MS in Systems Simulation from the University of Central Florida.Teresita Sotomayor is an Electronics Engineer in the STRICOM Modeling and Simulation Technology (ET) Division. She is the lead for STRICOM JSIMS SNE development.  Mrs. Sotomayor received her Bachelors of Science in Industrial Engineering from the University of Puerto Rico and a Master of Science in Operations Research (Stochastic Simulation) from The George Washington University.