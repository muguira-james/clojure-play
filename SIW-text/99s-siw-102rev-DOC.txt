RTI PERFORMANCE IN SENDING HIGH VOLUME DATA: AN UPDATE--THE DEVELOPMENT OF AN RTI VTC CAPABILITYMark MorganthalerLionhearth Technologies, Inc.25401 Spanish Ranch RoadLos Gatos, CA 95030408-357-5536mark_morganthaler@lionhearth.comJohn W. ShockleySRI International333 Ravenswood Ave.Menlo Park, CA 94025650-859-4165john_shockley@sri.com Keywords:RTI Performance, High Volume Data, C4I, and BackchannelsABSTRACT: At the Fall 98 SIW, we presented the initial results of a set of experiments (98F-SIW-214) to evaluate RTI performance in sending high volume data.  In the first set of experiments, we determined that RTI performance appeared to be sufficient to send real-time audio data between two simple radio federates.  These results were encouraging, since they supported sending these high volume data directly via the RTI rather than via a backchannel.  The backchannel approach, while compliant with HLA Rule 3 (All public FOM data must be passed via the RTI.), was considered to be less optimal for the architecture of the HLA Virtual Command Post (VCP), the project for which we are performing these experiments.  While the results of the initial experiments were encouraging, they had recognizable limitations.  They only applied to a simple federation consisting of only two federates, and they did not address sending real-time video data, the other type of high volume data of interest, over the RTI.  This paper describes the work conducted since the Fall SIW.  While we continue to have interest in  experiments on RTI vs. backchannel performance for high volume data, we were sufficiently encouraged by our earlier results that we chose to implement a direct RTI-based capability for a VCP project demonstration element, a video teleconferencing (VTC) capability. Rather than provide a direct comparison of performance results, this capability reveals some of the initial practical results of using the RTI to send high-volume audio and video data in near-real time.   While directly applicable to the HLA VCP, these results provide additional insight on RTI performance issues and are, therefore, applicable to several communities within SISO.Some of our initial findings include: (1) we have demonstrated a basic video teleconferencing capability using RTI version 1.3.3 on up to three networked Windows NT and Windows 95 platforms, (2) the initial capability has revealed latencies of 200msec with video images of 160 X 120 pixel grays sent only once per second, and (3) despite these initial limitations, we have already identified potential areas of improvement and believe that we can achieve a truly useful capability in the near future. 1.	IntroductionDuring the Fall workshop, we presented 98F-SIW-214, RTI Performance in Sending High Volume Data, which described the results of some initial experiments we conducted in determining the ability of the RTI to send high volume audio data between federates.  We compared the performance of three networked configurations: (1) using the RTI to send real-time audio data directly between two simulated radio federates, (2) using the RTI to send ‚Äútoken‚Äù radio data between the federates, while using a dedicated bachchannel to send the high volume data, and (3) using the commercially available NetMeeting to send the audio data.   In Option 1, the RTI was both the transport and control layer, while in Option 2, the RTI was only the control layer.  Both Options 1 and 2 were designed to be compliant with Rule 3 of the High Level Architecture (HLA) requirements:‚ÄúDuring a federation execution, all exchange of FOM data among federates shall occur via the RTI.‚ÄùThe third configuration was included to compare what might be expected from current commercial capabilities.   What we found from this initial set of experiments was that the RTI appeared to be capable of sending high volume audio data.  Table 1, repeated from 98F-SIW-214, illustrates the results of these experiments.  Table 1 Summary of RTI Performance Test Results*Test ScenarioData Latency (ms)1. RTI as Control and Transport Layer100-2002. RTI as Control Layer Only100-2003. MS NetMeeting with H.323300-400* From, M. Morganthaler and J. Shockley, RTI Performance in Sending High Volume Data, 98F-SIW-214, Simulation Interoperability Workshop, September 1998, Orlando FL.These results were encouraging in that the RTI provided results comparable to those of a backchannel and better that that provided by the commercial MS NetMeeting configuration.  In reporting these results, however, we were careful to note that the experiments had some recognized limitations.  In particular, the experimental setup only included sending audio data between federates.  Eventually we wanted to transmit much more demanding video data.  Also, we only had two radio federates in the experimental set-up.  With the scalability of the RTI a critical concern to performance, we recognized that there was a need to add several radio federates to the experiment and determine what the scalability of such a configuration was.  All of this work has been conducted in support of the development of an HLA compliant Virtual Command Post (VCP), described in further detail below.  The results, while applicable to a variety of communities contributing the Simulation Interoperability Standards Organization (SISO) standards development efforts, they are critical to the development of the VCP because they determine how we will develop the basic hardware and software architecture, i.e., whether or not we will adopt a backchannel approach.  Since we reported our results last fall, we have begun to devise some experiments to test RTI performance further; however, we have also had to face the reality of the VCP project.  We needed to choose an approach to begin the development of our system architecture.  So, while we continue to look into RTI performance, we have had to shift our project priorities to the development of a demonstration prototype that uses one of the two HLA-compliant options investigated in the previous paper.  Though the results of that effort had recognizable limitations, we have chosen to adopt a direct RTI‚Äìbased approach to sending high volume data for the HLA VCP (Option 1).   We felt that despite the limitations of the results, this approach was best suited to our goals of using the capabilities of the RTI rather than trying to circumvent it.This paper presents an overview of the HLA VCP effort and the development of an initial prototype system for video teleconferencing (VTC) that uses the RTI as both the transport and control layer.  We present the architecture of the demonstration system we have developed to date and the initial results of using RTI version 1.3.3 on a Windows NT network to send both audio and video data in near-real time.  Though directly applicable to the HLA VCP project and similar C4I applications, we believe that these results have applicability to other communities within SISO. 2.	The HLA Virtual Command PostThe Virtual Command Post (VCP) is an early experiment in the use of distributed simulation and virtual conferencing technologies to provide a ‚Äúyou are there‚Äù collaborative Command, Control, Communications, Computers, and Intelligence (C4I) environment. Developed by Lionhearth Technologies for the US Army Communications and Electronics Command (CECOM) under a Phase II Small Business Innovative Research (SBIR) contract, commanders and war fighters in geographically dispersed locations can use the VCP to view battlefield information on portable or man wearable devices including laptops, PDAs, or HMDs.  The VCP captures each commander‚Äôs ‚Äúpresence‚Äù in the form of compressed voice, line-of-sight, and body position and can transmit his voice and animated iconic representation over a 4800 baud radio network, leaving bandwidth available for maintenance of a distributed battlefield management database. This database is updated locally and converted at each node into 3D-battlefield visualization with interactive planning, "what-if", and data drill-down capabilities. In parallel, satellite broadcasts or video-teleconferences can be captured and displayed in the VCP on video walls.  Figure 1 depicts the initial system block diagram of the virtual command post.Figure 1: Initial HLA VCP System The requirements of the VCP for high volume data are the same requirements that a real command post has.  It must be able to receive high volume audio and video data from a variety of sources in order to be functional.  The VCP has an additional requirement, however.  Since it is already a distributed simulation, it must be able to transmit these data internally.  While Figure 1 illustrates the VCP as an HLA federate, current efforts define the VCP as an HLA federation, i.e., individual command post components, such as two-dimensional and three-dimensional viewers, are being developed as individual HLA-compliant federates.  The interactions of these components--many involving high volume data--will need to be supported via the RTI for the command post federation.  Clearly, how these interactions are implemented are critical to the design and the eventual functionality of the command post.  Figure 2 illustrates the current VCP as an HLA federation.  Figure 2: Current HLA VCP System--VCP as HLA FederationAs seen in Figure 2, the current version of the HLA VCP has defined the following separate elements as federates: (1) commander, (2) room camera, (3) audio object, (4) multimedia object, (5) three-dimensional object, and (6) the VCP room itself.  This division was based on how the original VCP was designed and what we saw as a reasonable division of functional modules that could be separate HLA federates.  We envision that each of these could be separate functional entities that are part of an HLA federation other than the VCP.  The RTI-based VTC capability serves as a useful demonstration of how these VCP federates can interact via the RTI.  Sending real-time audio and video data, necessary for a useful VTC capability, are the most demanding interactions between the VCP federates.  This prototype, therefore, serves to demonstrate perhaps the most critical aspect of the HLA VCP.  3.	An RTI-based VTC CapabilityThe VTC capability developed as a demonstration prototype for the HLA VCP is shown in Figure 3 below.  In this demonstration, three Pentium II 400 PCs were connected over a 10Mbit ethernet.  Each of these is indicated as a VTC node, where each node has a video camera with a video capture board and a full-duplex sound card.  One of the nodes is running Windows NT, while the other two are running Windows 95.  In addition, one of the PCs hosted the RTI (version 1.3.3) executive.  Figure 3: RTI-based VTC CapabilityIn the VTC federation we developed, each VTC node also constituted an HLA federate capable of transmitting and receiving both audio and video data. Only simple feasibility demonstrations have been completed by the time this paper is being written.  We, therefore, can only share what we have been able to determine without formal test procedures.  Nevertheless, we believe that the results we have obtained to date will provide some enlightenment on the performance of the RTI and its ability to handle high volume data. As a result of these feasibility demonstrations, several ‚Äúexperiments‚Äù were conducted to verify the capability of the RTI VTC.  These primarily involved human operators at each of the VTC nodes holding what we considered to be a normal VTC conversation. Since these were not conducted in accordance with a formal test plan, we cannot quantify what a ‚Äúnormal VTC conversation‚Äù might  be.  Nevertheless, our purpose in developing this VTC system is to have a real functional capability.  We, therefore, conducted these demonstrations to be as close to a normal VTC as possible. In each of the demonstrations, we launched the RTI executive and then initiated interactions between the VTC nodes.  The interactions consisted of initiating the VTC, and sending audio and video data between the nodes via the RTI and the 10Mbit ethernet.  In order to determine the success of our development, we made rough measurements of video and audio latency.  We also had to make a number of concessions in this early implementation of the RTI VTC system.  These measurements and the concessions we made serve as the primary results, or lessons learned, from our efforts.  These are discussed in the following section.4.	RTI Performance and Lessons LearnedFor the purposes of the HLA VCP, the primary focus of these initial measurements was the demonstration of the basic capability and a determination of data latency associated with the configuration.  A basic capability was defined as successfully transmitting audio and video data at some near real-time rate that we consider suggestive of a truly functional capability in the future.  Acceptable data latency, however, has a more quantitative value‚Äî100msec   from one VTC federate to another.  This value is based more on current experience than hard requirements, but it is a reasonable number for supporting transmission of high-volume data.  Currently, latencies of 100 ms are common on overseas telephone calls.  These are considered acceptable for supporting human conversation in the commercial world; therefore, they have been adopted as the goal for the HLA VCP, in general, and the VTC, in particular.In order to establish a basic capability, we started with a configuration that we recognized as not too stressful.  The video we sent were 160x120 pixel, grays only, RLE-packed frames keyed at once per second.  The audio was unpacked pulse coded modulation (PCM) at an 8kHz rate.  We tested the configuration for two nodes only and for three nodes.  The data rate with two nodes averaged 80kB/sec, while that for three nodes was 140-180kB/sec.  The latency we measured for both the audio and the video for this configuration was 200msec, regardless of whether we had two or three nodes.  Though this does not meet our ‚Äúrequirement‚Äù for 100msec, we are very encouraged by this result.  First, this is within the range we reported for audio only last fall with two radio nodes.  But, more importantly, we see that this is well within a reasonable range for the configuration we developed. At this level of the demonstration, since we were primarily concerned with establishing a basic capability, we did not concentrate on data packing schemes that we anticipate will greatly reduce the latency and, hopefully, increase the video frame rate and size.  Overall, we consider the data to be packed rather poorly, so we see considerable room for improvement here.Another lesson learned that we can report is that we initially tried to send the data using best effort (UDP).  Using UDP, we found that with three nodes, the slowest node wouldn‚Äôt receive anything.  The RTI seemed to accumulate UDP packets, so the latency kept growing throughout the session.  Since we had this initial experience, we have sent all data as ‚Äúreliable‚Äù and have not experienced this problem.  We would like to be able to report some reason that we discovered for this, but at the time of this writing, we have not examined this situation further.  5.	Summary and ConclusionsIn summary, we have demonstrated an RTI-based video teleconferencing capability.  This capability was developed as a demonstration for the HLA Virtual Command Post (VCP) project.  The VCP project supported work reported at the Fall 98 SIW on comparing direct RTI vs. backchannel communications for sending high volume audio data.  As a result of this previous effort, we determined that the RTI provided a comparable level of performance to that of a dedicated backchannel for sending real-time audio between two radio federates.  At the time we recognized the need to perform further experiments on backchannel vs. direct RTI performance and intended to do so.  However, project commitments forced us to choose a path for a prototype demonstration for a video teleconferencing capability.  The encouraging results we had obtained led us to develop the RTI VideoPhone for a direct RTI implementation.  It is that implementation that is reported in this paper.The RTI VTC capability developed demonstrated video teleconferencing between up to three nodes on a 10Mbit ethernet.  Some of the key characteristics of these interactions and some of the lessons we learned were:Video consisted of 160x120 pixel, grays only, RLE-packed frames keyed at once per second.The audio was unpacked pulse coded modulation (PCM) at an 8kHz rate.Overall data rate averaged 80kB/sec for two nodes and 140-180kB/sec for three nodes.Latencies were 200msec for either the two node or three node configuration.  This does not meet our 100msec requirement, but we believe we can eventually meet it.We found difficulties sending the multimedia data over the RTI using best effort UDP; packets built up.  We eventually decided to send all data as ‚Äúreliable.‚ÄùWe did not concentrate on data packing schemes that we anticipate will improve performance substantially. Overall, we are once again very encouraged by the preliminary results we have obtained.  We would like to have some more concrete values to report and will hopefully have these in time for the workshop.  We are currently able to report on what has been completed as of the end of December.6.	References[1]	Lionhearth Technologies, Inc., The HLA Virtual Command Post,  response to OSD97-006 Solicitation: Commercialization of Components C4I Interface to Simulation using HLA, April 23, 1998.[2]	M. Morganthaler and G. Steiner, Phase II SBIR Final Report for the Dispersed Virtual Command Post Program, Lionhearth Technologies, March 23, 1998.[3]	M. Morganthaler and J. Shockley, Performance in Sending High Volume Data, 98F-SIW-214, Simulation Interoperability Workshop, September 1998, Orlando FL.Author BiographiesMARK MORGANTHALER is the founder and President of Lionhearth Technologies. At Lionhearth, he has developed a team of technical, administrative and marketing professionals to develop virtual environments and sensor technologies to enhance collaboration.  Prior to forming Lionhearth, he served as President of Crystal River Engineering.  During his tenure, he revitalized this virtual reality company, resulting in the development of a 3D sound API--subsequently incorporated into Windows 95.  In 1993, he joined Trimble Navigation and founded the Avionics Division, responsible for developing differential GPS landing systems.   Prior to his work at Trimble, Mr. Morganthaler had 14 years of experience at Hewlett-Packard as an engineering manager, working on a variety of graphics, multimedia, and RISC architecture  projects.JOHN SHOCKLEY is a Senior Research Engineer at SRI International.  Over the past 15 years, he has worked at SRI on a broad variety of projects--primarily in the areas of test and training range instrumentation systems for the Army, Navy, and Air Force.  He began working on modeling and simulation aspects of these systems and has since participated in DIS/HLA standards development activities for the past nine years, concentrating on integrating live and virtual systems.  AcknowledgmentsThe authors wish to thank Dr. Alexey Vaiman of OZero Corporation for his work in the implementation of the RTI-based VTC capability reported in this paper.  His efforts were instrumental. The RTI VTC (VideoPhone) simulation developed for this demonstration runs on both Windows NT and Windows 95. PAGE  6