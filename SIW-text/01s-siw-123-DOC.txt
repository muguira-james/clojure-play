Advanced Movement Representation in High Resolution Combat ModelsGeorge L. MasonRichard B. AhlvinE. Alex BaylotEngineer Research and Development CenterWaterways Experiment StationVicksburg, MS 39180601-634-2274 HYPERLINK "mailto:masong@wes.army.mil" George. L. Mason@erdc.usace.army.milKeywords:Vehicle traction, motion resistance, soft soils, vehicle mobility Abstract:  Advanced movement algorithms and extended lookup tables are considered in this paper as an alternative to the limited speed tables which exist in current high resolution combat and training models.  Movement algorithms in the various training models such as Semi-Automated Forces (SAF (and the high-resolution analytical models) typically have a fixed set of speed lookups that are related to predefined conditions on the battlefield.  These conditions cannot be varied without considerable cost in time and effort.  However, real-world battlefield conditions that affect vehicle movement are often changing drastically based on changes in weather.  The suggested replacement tables for the older version of the Joint Semi-Automated Forces (JSAF) vehicle files are based on field tests and high-resolution mobility model runs.  Field tests have indicated that traction of the vehicle will change based on varying surface and subsurface changes in soil strength.  This study discusses the issues of replacing the speed lookup tables specific to (JointSAF) with movement algorithms and traction data tables that represent high-resolution model results and field tests.  The product of this research was a VPI (vehicle model) which changed vehicle performance as a function of continuous variations of soil strength.IntroductionThe Defense Mapping and Simulation Office initiated a study in 1999 (Reference 1) which included an investigation of modeling traction and plowing forces of an Army engineer mine-plow vehicle known as the Grizzly.  This study included the integration of soil strength and weather effects on terrain (Reference 2).  A subset of the NATO Reference Mobility Model, Version II (NRMM II) was selected as providing appropriate sensitivity and accuracy for the given simulation.  An Application Programmer’s Interface (API) was designed to facilitate the inclusion of the required functionality without the need to incorporate the entire NRMM model code.  Additionally, a principal consideration in the design of the target simulation was to include the effects of weather on mobility performance.  A major factor in mobility performance is the state of the soil surface.  In order to incorporate soil strength, or changes thereof, in the SAF environment,  a model and an appropriate API called Short-Term Operational Forecasts of Trafficability Factors (SOFT) were developed to predict the moisture condition and subsequent soil strength from rainfall time histories (Reference 2).  The SOFT model is essentially a sub-set of the (Soil Moisture-Strength Prediction, Version II (SMSP II) model recast to allow shorter or variable time increments in lieu of the fixed 24-hour period assumed for SMSP II.  The SOFT was coupled with a mobility model through an appropriate Federated Object Module (FOM) (Reference 3).  The mobility model currently exists within the JointSAF core libraries.  This mobility model takes as input soil strength, slope, and certain vehicle characteristics to provide a prediction of maximum vehicle speed. Model Formulation	NRMM (Reference 4) is a force balance model.  The traction-speed relation for the vehicle is determined from the vehicle’s power train and traction element characteristics and the current soil type, strength and surface condition.  Various vehicle mobility impediments in the form of resistances are determined.  The sum of all impeding resistances is compared with the traction-speed relation.  If the traction exceeds the resistance force sum, excess vehicle traction is available and a suitable running speed is determined.  Otherwise if resisting forces are greater than available traction,  a vehicle immobilization (NOGO) condition results.  Because of limitations in the terrain information available in the target simulation database and vehicle operating mission considerations, several potential mobility impediments including the effects of vegetation, obstacles, ride dynamics and certain driver reactions normally considered in NRMM were not considered and are not included in the mobility API.The Traction Model	NRMM incorporates a representation of a vehicle’s power train to estimate the vehicle’s  theoretical power in the form of a maximum available traction versus drive element speed relation.  This model requires performance and configuration characteristics of the power train including the engine output torque versus speed (rpm) relation curve; torque converter characteristics (if applicable), transmission gear ratios and efficiencies, and final drive information.  Optionally, the theoretical traction-speed relation can be determined through physical testing and provided as an input to NRMM.	The traction-slip relation and soil motion resistance is derived for the given soil type, soil strength, and surface condition.  NRMM uses this information to produce a traction-speed relation for the specific vehicle/terrain combination.  The fundamental soil relations in NRMM use an empirical system developed at the Engineer Research and Development Center (ERDC) , which relates vehicle performance to soil strength in terms of rating cone index (RCI) for cohesive soils (clays, silts, and wet sands.)   The (semi-empirical) numeric system relating performance to soil cone index (CI) is used for non-cohesive soils (dry sands.)	To reduce the complexity and data volume for the API, a rectangular hyperbola (Equation 1) is fitted to the  traction-speed relation using a modified least-squares curve-fit algorithm. EMBED Equation.2                                  Equation  SEQ Equation \* ARABIC 11	Where s = speed, t = tractive-force, w = vehicle weight, and a, b & c are the curve fit coefficients.  (The minimum and maximum values of traction from the original relation are also retained and included in the data form.)An additional power reduction factor may be included to account for the engine accessory loads  such as those caused by automatic blade plow depth actuating equipment or breaching equipment.  The details (such as duty cycle, etc.) of this load are not modeled; it is known to be substantial (up to 20% of engine power).  For this implementation the power reduction is included if plowing is in effect (plowing depth greater than zero.)A traction reduction factor is also included to simulate the effect of the vehicle’s running over a disturbed (plowed) surface.  The terrain description information (strength information derived from the SOFT model) is valid for in-situ soils.  It is believed (but unconfirmed by testing) that plowed surfaces should provide less traction than the virgin terrain.  Expert opinion is that traction reduction should be at least 10%.  Similar to the power reduction coefficient, this factor is in effect only during plowing.	A comparison of a typical traction-speed relation to the curve fit relation is given in Figure 1.Figure  SEQ Figure \* ARABIC 11.  Traction-Speed Relation to Curve.	Figure 2 illustrates the traction relationships of a vehicle as a function of soil strength and vehicle speed.  The traction coefficent can relate directly to the vehicles ability to climb slopes, override vegetation, and negotiate obstacles.Figure  SEQ Figure \* ARABIC 22.  Traction relationships to a vehicle.The Resistance ModelSlope ResistanceThe resistances considered for the API model are soil motion resistance, resistance due to the influence of slope, and resistance derived from the plowing action of a mine plow (or similar) blade operating at a prescribed depth.  Other resistance, due to overriding vegetation or obstacles, is not considered.Slope ResistanceThe effect of slope introduces additional resistance (if traveling up-slope) or additional effective traction (if traveling down-slope.)  (In coefficient form, the slope resistance is simply the tangent of the slope.)  This value is added to the other resisting quantities.Plow Resistance	The plow resistance coefficient is interpolated from a table of plowing force as a function of plowing depth and soil strength for several USCS soil types.  This table may be populated with field test results or information from other simulation models.  For this example, the theoretical plowing force model included in NRMM (Reference 5) was used to populate the data table.  Below depicts this example data.The Application Program Interface	The application programmer interface consists of three primary routines:RoutineDescriptionveh_plow_initInitialize system and read in performance prediction tablesveh_maximum_speedProduce a performance predictionecho_veh_dataEcho input data to system outputThe following is a detailed description of the API routines.INTEGER FUNCTION VEH_PLOW_INIT( FPATH )	This routine initializes the system and populates the vehicle plow model internal tables from information contained in an external data file.Input:FPATH	 Path name to Vehicle plow performance information dataOutputs:VEH_PLOW_INIT	Initialization status:0 =Okay Pos =	I/O error; system specific I/O status returned-1 =	Premature E.O.F. reading input data-2 =	No logical unit available for file I/O-3 =	NSTREN out of range [2..MSTREN]-4 =	NPDEPTH out of range [0..MPDEPTH]-5 =	NPSTREN) out of range [2..MPSTREN]-6 =	Unexpected soil type code reading vehicle data-7 =	Soil strength mismatch reading vehicle data-8 =	Unexpected soil type code reading plow data-9 =	Soil strength mismatch reading plow dataMain API call:SUBROUTINE VEHICLE_PLOWING_SPEED( null, Yin, Plowspeed )	This routine is the primary prediction model.  The vehicle maximum speed as a function of the input terrain description is returned.General note:  No data type for Yin was stated in the original API specification.  Several of the values are categorical (i.e. Yin(1), Yin(2) & Yin(3) ) while the others are analog.  Since there are some analog values present,  Yin was assumed to be type REAL.Inputs:Yin(0) = Blade depth [in] (Note 1.)Yin(1) = ITD soil type code: (Note 2.)0 = Unknown	7 = SM		14 = OH1 = GW		 8 = SC		15 = PT2 = GP		 9 = ML		16 = Not Used3 = GM		10 = CL		17 = Not Used4 = GC		11 = OL		18 = Not Used5 = SW		12 = CH6 = SP		13 = MH	Note: and value out of range [1..14] will be assigned 0 (unknown)Yin(2) = Vegetation cover code:		0 = Bare		1 = Grass		2 = ForestYin(3) = CCTT Slope class code:	Code	Range		Value used1	<= -60		-602	 -40 to <-60	-503	 -20 to <-40	-30	4	   -5 to <-20	-13	5	  >0 to <-5	-3	6            =0		 0	7            >0 to <5	 3	8	    5 to <20	13	9	  20 to <40	3010	  40 to <60	50	11	   >= 60		60Note:   Any codes outside the range [1..11] will be assigned 6 (slope = 0 )Yin(4) = Moisture content of surface layer (from SMSP/SOFT) [% by weight]Yin(5) = Moisture content of soil layer (from SMSP/SOFT) [% by weight]Yin(6) = Soil strength of surface (from SMSP/SOFT) [CI|RCI]Yin(7) = Soil strength of soil (from SMSP/SOFT) [CI|RCI]Output:Plowspeed = vehicle plowing speed, meters/s  (Note 3.)Notes:  (1) Origin of measurement is not stated.  The assumption is made that depth refers to the position (positive down) of the lower-most extremity of the plow unit (i.e. tine tips if plow has tines, etc.) below a flat level ground surface.  Negative or zero depth means no portion of the plow blade enters the ground.  (2) No table of values for the codes were given.  The specification stated “ITD soil codes.”  The  specification for the ITD encoding scheme (MIL-I-89014) shows 16 items for Soil Type Category (STC) values 0 through 15.  The assumption is made here that this is the encoding scheme used. (3) If any input data is unknown, unassigned or out of range, the plow speed will be set to zero.  Codes are produced internally which are related to various types of problems that can occur.  However, no mechanism is stated to retrieve and examine these codes externally.This system is comprised of two tables of vehicle performance information, which is read in from an external data file.  (It would be possible to 'hard code' the data tables but that would limit the usefulness of this system.)  The prediction is made by interpolating the appropriate information from these tables performing a few computations to provide the needed result.	The first table contains information about vehicle basic performance, which is the tractive force versus speed relation (including all soil influences) and the sum of all vehicle motion resistances for operation on level surfaces (excluding any plowing resistance.)  The actual relation is given as the coefficients of a curve-fit hyperbola to the source data.  The source data is derived from the NRMM.	The second table is a matrix of plow performance information comprised of resulting plowing forces as a function of soil type, soil strengths and plowing depths.  This data is derived from a combination of field test results and the plowing sub model in NRMM .	The following section describes the format and content of the external data set (data file) read in by the program.The input data set has three sections.  Section 1 is basic description information and the arrays of values of the independent variables for the various input tables.  This is in FORTRAN NAMELIST format.  Section 2 consists of records of vehicle performance information in FORTRAN free-field readable format.  The last section, also in FORTRAN free-field readable format, contains records of information used to populate the internal tables of plow performance information.Section-1; Namelist /VEHDATA/Variable	DescriptionDescriptionGCW Vehicle gross combined weight [lb]HPCOEFPower-train power reduction coefficient penalty for using plow (1.0=no reduction, 0.0 = 100% reduction)NPDEPTHNumber of plow data plowing depths givenNPSTRENNumber of soil strengths, plow performance dataNSTRENNumber of soil strengths, vehicle performance dataPDEPTHS(NPDEPTHValues of plowing depths [in]PSTREN(NPSTREN)Soil strength values for plowing data [CI/RCI]STCOEFSurface traction reduction coefficient penalty for operating on plowed surface (1.0=no reduction, 0.0=full reduction)STREN(NSTREN)Soil strength values (vehicle data) [CI/RCI]Section-2; Vehicle Traction & Resistance Performance information	The following are records in FORTRAN free-field format ordered as follows:SurfaceSoil-typeSoil-strengthRec-10 (normal)1 (group1)STREN(1)Rec-20 (normal)1 (group1)STREN(2). . .. . . . .. . . . .. . . . Rec-NSTREN0 (normal)1 (group1)STREN(NSTREN)Rec-NSTREN+10 (normal)2 (group2)STREN(1)Rec-NSTREN+20 (normal)2 (group2)STREN(2). . .. . . . .. . . . .. . . . Rec-2*NSTREN0 (normal)2 (group2)STREN(NSTREN). . .. . . . .. . . . .. . . . . . .. . . . .. . . . .. . . . Rec-6*NSTREN0 (normal)6 (group6)STREN(NSTREN)Rec-6*NSTREN+11 (slippery)1 (group1)STREN(1). . .. . . . .. . . . .. . . . . . .. . . . .. . . . .. . . . Rec-2*6*NSTREN1 (slippery)6 (group6)STREN(NSTREN)Each record is comprised of the following information:Item#Fortran VariableDescription1ISTSoil strength values (vehicle data) [CI/RCI]2CIRCISoil strength (checked against values given in STREN)3RESCOEFVehicle total motion resistance coefficient4TFOWMNTractive force coefficient value at maximum speed point (i.e. minimum traction)5TFOWMXTractive force coefficient value at minimum speed point (i.e. maximum traction)6,7&8B(i)Coefficients for curve fit hyperbola of the form: EMBED Equation.2  	Section-3; Plow performance (resistance) information	The following are records in Fortran free-field format ordered as follows:			Soil-typeSoil-strengthRec-1			1 (group1)PSTREN(1)Rec-2			1 (group1)PSTREN(2). . .			 . . . . .. . . .Rec-NSTREN		1 (group1)PSTREN(NPSTREN)Rec-NSTREN+1		2 (group2)PSTREN(1)Rec-NSTREN+2		2 (group2)PSTREN(2). . .			 . . . . .. . . .Rec-2*NSTREN		2 (group2)PSTREN(NPSTREN). . .		 . . . . .	. . . .. . .		 . . . . .	. . . .Rec-6*NSTREN6 (group6)PSTREN(NPSTREN)Each record is comprised of the following information:Item#Fortran Variable NameDescription  1   ISTSoil group code  2   CIRCISoil strength (checked against values in PSTREN)  3   PFORCES(1,.)Plowing force [lb] for depth PDEPTHS(1)  4   PFORCES(2,.)Plowing force [lb] for depth PDEPTHS(2)  .        . . . . . ..  .  .  .  .  .  .  .  .  .  .  .  .2+NPDEPTH  PFORCES(NPDEPTH,.)Plowing force [lb] for depth PDEPTHS(NPDEPTH)ConclusionsThis paper describes an approach for integration of a high resolution vehicle model for inclusion in describing vehicle tire/track performance in soft soils. This model provides traction effects from weather effects on terrain, and vehicle traction algorithms which were developed and implemented for JointSAF under the Envirofed II program (Reference 3).  Traction algorithms were used in conjunction with the output of this model for realistic mobility predictions resulting from weather changes.References[1]	McWiliams, G. B.  “Providing Physically Consistent Environmental Data in Support of Simulation Based Acquisition,” Proceedings of the 1999 Spring Simulation Interoperability Workshop, Paper  99S-SIW-120, March 1999.[2]	Mason, G. L.  “Short-Term Operational Forecasts of Trafficability (SOFT),“ 2000 Spring Simulation Interoperability Workshop, Paper 00S-SIW-066, March 2000.[3]	Janett A.C., Adelson, J.S., Miller, D. D., Reynolds, R. A., (2000) “The FOM for Atmosphere, Ocean, Space, and Dynamic Terrain – Environment Federation, “ 2000 Fall Simulation Interoperability Workshop, Paper 00F-SIW-092[4]	Ahlvin, R. B. and Haley, P. W.  “NATO Reference Mobility Model Edition II, NRMM II User’s Guide,” Technical Report GL-92-19. [5]	Farr, J. V., Rabalais, C. P., Underwood, R. B. III and Ahlvin, R. B. (1991) “Mobility and Plowing Capabilities of the Combat Mobility Vehicle,” Technical Report GL-91-6.Author BiographyDr. George L. Mason is a Research Civil Engineer with the Mobility Systems Branch, U.S. Engineer Research and Development Center, Vicksburg, Mississippi. Dr. Mason received his PhD in Geotechnical Engineering from Rensselaer Polytechnic Institute and his MS and BS from Mississippi State University.  Dr. Mason is a licensed Professional Engineer in the state of Mississippi.Mr. Richard B. Ahlvin is a Senior Computer Scientist with the Mobility Systems Branch, U.S. Army Engineer Research and Development Center, Vicksburg, Mississippi.   Mr. Ahlvin is one of the lead developers with the NATO Reference Mobility Model. Mr. E. Alex Baylot  is a Research Engineer with the Mobility Systems Branch, U.S. Engineer Research and Development Center, Vicksburg, Mississippi.  Mr. Baylot has a MS and BS in Industrial Engineering from Mississippi State University with a minor in Operations Research.  Mr. Baylot is a licensed Professional Engineer in the state of Mississippi. For the remainder of this document NRMM is considered synonymous with NRMM II.  Advanced Movement Representation in High Resolution Combat ModelsAdvanced Movement Represenation in High Resolution Combat Models EMBED Excel.Chart.8 \s  EMBED Excel.Sheet.8  Figure  SEQ Figure \* ARABIC 33.   Plow resisting force.