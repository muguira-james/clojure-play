The FOM for Atmosphere, Ocean, Space and Dynamic Terrain – Environment FederationAnnette C. JanettDr. Stephen J. AdelsonDr. Dale D. MillerLockheed Martin Information SystemsAdvanced Simulation Center3605 132nd Ave. SE, Suite 400Bellevue, WA 98006(480) 595-0220 / (425) 957-3259 HYPERLINK mailto:Ajanett@lads.is.lmco.com ajanett@lads.is.lmco.com,  HYPERLINK mailto:sadelson@lads.is.lmco.com sadelson@lads.is.lmco.com,  HYPERLINK mailto:ddmiller@lads.is.lmco.com ddmiller@lads.is.lmco.comRobert A. ReynoldsLitton-TASCReading, MA HYPERLINK mailto:rareynolds@tasc.com rareynolds@tasc.comKeywords:synthetic environment, SNE, object model, FOM, SOM, dynamic terrain, hydro, ocean, atmosphere, space, HLA, RTI, simulationABSTRACT: The Environment Federation project, sponsored by the Defense Modeling and Simulation Office (DMSO), has developed a Federation Object Model (FOM) for the Synthetic Natural Environment (SNE) including dynamic terrain, ocean, atmosphere and space capabilities. Primary federates included in the Federation are the Environmental Data Server (EDS), Dynamic Terrain (DT) and JointSAF (JSAF). This paper presents the Environment Federation FOM and the latest extensions to the FOM including surface weather, dynamic terrain for Fleet Battle Experiment operations, and HydroSim. New Environment Federation capabilities allow the terrain surface to be impacted by weather changes, which in turn affects vehicle mobility. Additional extensions provide terrain surface changes for pre-exercise enhancement of the surface with features including roads, rivers, inland water, coastlines, and many areal and point features.The Environment Federation FOM makes use of the Synthetic Environment Data Representation and Interchange Specification (SEDRIS) Environmental Data Coding Specification (EDCS), enhancing federate interoperability. Use of EDCS and the breadth of environmental capabilities included in this FOM make it an excellent candidate for reference object model usage.IntroductionThe Environment Federation project is a DMSO-sponsored effort that is using the SEDRIS Environmental Data Coding Specification (EDCS) in the implementation of a Federation Object Model (FOM). The unambiguous syntax and semantics provided by the EDCS to describe the FOM data exchanges will enable reusability of the FOM and individual environment federates within the DoD modeling and simulation community. This paper addresses the extensions made to the Environment Federation FOM since the last presentations given at the 2000 Spring Simulation Interoperability Workshop where the Environmental Data Server (EDS) portion of the FOM was discussed [1], and the Dynamic Terrain (DT) portion of the FOM was detailed [2]. In this paper, we will briefly present a FOM overview and then describe details of the recent extensions made to the FOM. We will finish up by describing further extensions that will be soon made to the FOM.1.1	The FederatesFollowing is a brief description of each federate participating in the Environment Federation, as shown in Figure 1.The Environmental Data Server (EDS) is the owner and distributor of the ocean, atmosphere, and space data within the federation. Acting as a publisher of data, the EDS serves dynamically changing values for key environment data elements to the rest of the federation. In this effort, the source of atmospheric data is the Environmental Scenario Generator (ESG), with the Global METOC 98 database providing ocean and space environmental data as required.The Dynamic Terrain Simulation is a suite of capabilities that provides a consistent, causally-correct representation of changes to the terrain and its features to the rest of the federation. The DTSim accepts incoming data about the environmental processes and the actions of simulated entities that may cause changes in the terrain (e.g., detonation of ordnance against a bridge). It then computes the impact of those events on the terrain and its features and publishes that data for use by other federates.Figure  SEQ Figure \* ARABIC 1: Environment Federation CompositionJointSAF is an entity-level combat simulation capable of receiving and reacting to dynamic environment and terrain data. JointSAF owns and models all of the simulated entities (e.g., tanks, aircraft, ships) in the federation. These entities can cause changes to the terrain and can be affected by the dynamic terrain and environment. For example, increased liquid water content near the earth’s surface (a.k.a. fog) will reduce visibility and cause moving vehicles to slow down. Similarly, the creation of craters or ditches in the terrain will hamper vehicle movement.The HydroSim is a type of Dynamic Terrain Simulator that accepts information about the terrain and weather conditions and makes changes to terrain features to represent the current soil moisture and strength. These values are then used within the vehicle mobility models.ModStealth is a three-dimensional display tool that can accept dynamic terrain data, environment data, and data about simulated entities and render an appropriate 3-D visualization of the battlespace. A ModStealth exhibits similar interests in terrain and environmental data as virtual simulators and thus is a useful low-cost surrogate for that class of federates.General Updates ExpectedDuring tests, integration, and demonstrations during 1999 several small problems needing correction were identified within the FOM. We will identify these changes based on the federates portion of the FOM.Additionally, a SEDRIS name change occurred which impacted the FOM with the following changes:SEDRIS Data Coding Standard (SDCS) became the Environmental Data Coding Specification (EDCS). SDCS Classification Code (SCC) became EDCS Classification Code (ECC)SDCS Attribute Code (SAC) became EDCS Attribute Code (EAC)The Environment Federation FOM uses the EDCS to describe federation data, and support of this name change to EDCS was necessary.The development of the HydroSim (a DTSim derivative) drives additions and minor modifications to the FOM. This federate and related modifications will be discussed in the section on Dynamic Terrain (DT) FOM Updates.DT Updates to the FOM3.1	Dynamic Terrain Simulation FederatesFOM changes to support DT included name changes in support of EDCS and the incorporation of several newly available EDCS classification codes and attribute codes. Summarizing these changes:Name changes for consistency across Interaction Name, Feature Name, and Attribute Name.Addition of EDCS classifications for which SEDRIS Change Requests (SCRs) were submitted and accepted including:Terrain CraterExplosive ChargeDitch and/or Berm, EngineeredWire ObstacleDefensive Position - Defilade PointAddition of EDCS attributes for which SEDRIS Change Requests (SCRs) were submitted and accepted including:Dragon Teeth Type (to identify the dragon teeth)Structure Protection Type (to indicate if a structure is protected against ordnance)Terrain Surface Marks (to indicate tank tracks, plow marks, or scorched earth)Point Object Type (to help match point features to a 3D model)Object Variant (to help match point features to a 3D model with all other attributes being identical)Width of Terrain Gap (for use with anti-tank ditch or infantry ditch)Width of Terrain Channel (for use with anti-tank ditch or infantry ditch)Width of Terrain Crest (for use with anti-tank ditch or infantry ditch)Row Number (to attribute dragon teeth in order to make breaching possible)Row Spacing (Internal) (to attribute dragons teeth in order to make breaching possible)Row Distance (to attribute dragon teeth in order to make breaching possible)Lane Markings Type (to help apply textures to road surfaces)Ditch and/or Berm Type (to attribute anti-tank and infantry ditches)The following figure, Figure 2: Dragon Teeth Attributes, shows the attributes that are provided with the dragon teeth feature. With these attributes, a vehicle behavior model can reason about the obstacle and potentially breach it.3.2	HydroSim FederateThe new federate involved in Environment Federation is the HydroSim. This federate is based on earlier HydroSim development with some significant changes. Be watching for a paper and presentation on this topic at the next SIW where we hope to present the details on the current HydroSim capabilities.Figure 2: Dragon Teeth AttributesHydroSim makes use of the Short-Term Operational Forecasts of Trafficability (SOFT) model [3] to determine soil strength given current weather conditions (moisture), soil type, and accumulated soil moisture values. The HydroSim sends soil strength and soil moisture changes to other federates for incorporation into vehicle dynamics models. A new validated interaction was added to the Environment Federation FOM to support the transfer of soil strength and moisture values. This interaction was termed the Hydrogeologic interaction.Reasons for using interactions instead of objects for DT changes were discussed in the Dynamic Terrain paper [2]. The same reasoning applies to the Hydrogeologic interaction. However, there are some differences between the Hydrogeologic interaction and typical DT interactions:Most DT validated interactions require context about the state of the world and history of changes, as each change may be based on previous changes. Hydrogeologic interactions do not require knowledge of previous changes made to a Hydrogeologic feature. All soil strength and moisture attributes are updated within a Hydrogeologic interaction. This makes a much easier task of updating a late federate, and reliability mechanisms are simplified because only the current state of each Hydrogeologic feature needs to be maintained.While the differences of Hydrogeologic changes might drive one towards using objects, the drawback is that the Hydrogeologic changes are transitory, there will be thousands of them, and it would overload a federate to maintain in its internal memory objects for each Hydrogeologic feature. Shown in Figure 3 is a single geotile from a new Pendleton terrain database (1 degree x 1 degree region) showing both the “assembly” for the geotile on the left, and the Hydrogeologic features on the right. To illustrate the complexity, the graphic in Figure 3 shows over 50,000 Hydrogeologic features in a single geotile. A federate would be hard pressed to manage and maintain this many objects.Figure 3: Hydrogeologic Features in a GeotileThe differences between typical DT interactions and the Hydrogeologic interaction had driven us to consider and implement an additional routing space for these interactions. The Hydro routing space allows federates (e.g., EDS) which are uninterested in the soil moisture and soil strength data to avoid receiving the attributes via Data Declaration Management (DDM) mechanisms of the RTI. The primary validated Hydrogeologic change interaction is: Interaction1 - Validated Hydrogeologic Change; Interaction2 - ECC Ground Surface Element Hydrogeologic. The primary complex data type associated with the Hydrogeologic change interaction is shown in Table 1.Table 1. Hydrogeologic Attributes EMBED Word.Picture.8  3.3	DT Interactions OverviewThe DMSO sponsored software called the Object Model Development Tool (OMDT) [4] was used to update the FOM. Table 2 shows the updated DT environmental interaction classes in the FOM. The leaf nodes of the hierarchy represent the individual interactions to which a federate may subscribe. The third column (labeled “Interaction3”) lists the coverages; to ensure consistent views of the world, our implementation requires that a federate must subscribe to all or none of the interactions in a coverage. Table 2. DT Environmental Interactions (Validated Changes Highlighted)EDS Updates to the FOMSimple changes to the FOM in support of EDS included:Standardization of the names and definitions of attributes for which SEDRIS Change Requests (SCRs) were submitted and accepted, to bring these attributes into conformance with the standard.Addition of attributes Wind Speed, Vapor Pressure and Reference Height to the Surface Weather object class to support the HydroSim/SOFT Evaporation model.Remodeling of the classes that describe characteristics of the ocean surfaceThe last modification warrants some discussion. The Ocean_2D subclass Ocean_Surface_GDC previously included gridded attributes describing the two-dimensional properties of the ocean surface, including variables:Sea State Significant Wave Height Primary Wave Direction Primary Wave Mean Period Secondary Wave Direction Secondary Wave Mean Period Significant Height of Wind Waves Direction of Wind Waves Mean Period of Wind Waves Significant Height of Swell Waves Direction of Swell Waves Mean Period of Swell Waves Water Temperature Salinity Sound Speed U Current V CurrentThe modeling improvement made was two divide the Ocean_Surface_GDC class into two separate classes: Ocean_Surface_Layer_GDC for modeling volumetric properties of the ocean volume measure at or near the surface, and Wave_Spectrum_GDC for modeling the dynamic height of the ocean surface itself, i.e., surface waves characteristics which represent volumetric properties measured at or near the surface areWater Temperature Salinity Sound Speed U Current V Currentwhile parameters describing the spatial variations in dynamic sea surface height are:Sea State Significant Wave Height Primary Wave Direction Primary Wave Mean Period Secondary Wave Direction Secondary Wave Mean Period Significant Height of Wind Waves Direction of Wind Waves Mean Period of Wind Waves Significant Height of Swell Waves Direction of Swell Waves Mean Period of Swell WavesThis remodeling has the following advantages:If the wave model used to populate the wave spectrum attributes (e.g., WAM, RWAM) uses a different spatial grid than the volumetric ocean model (e.g. OTIS, TOPS, POM, MOM) used to populate the volumetric-properties-at-the-surface attributes, then two object classes are required. Currently both WAM and OTIS/TOPS use the same 1x1 degree global grid but that is a near-term "happy coincidence".The new Ocean_Surface_Layer_GDC class is now parallel, conceptually, to the surface-following weather classes Surface_Weather and Surface_Haze. Both classes describe a gridded dataset expressed on a vertical coordinate defined relative to the bounding surface between adjacent environmental regimes (atmosphere/ocean and atmosphere/terrain)Common software can be developed for deriving 2D Ocean_Surface_Layer_GDC grids and the 2D grids of surface weather attributes from the 3D gridded data stored in an input database.Future FOM EnhancementsTwo related efforts will drive further enhancements of the FOM in the near future. The DMSO project Environmental Books on the Shelf (EBS), recently renamed Terrain Scenario Generation and Archive (TSGA), is extending its environmental data model to support a more complete collection of building and other vertical structures with much richer attribution. Since all these structures will be placeable and damageable via DT technology, the FOM must be extended to support them directly.The Naval Warfare Development Center (NWDC) Maritime Battle Center (MBC) is sponsoring a series of Fleet Battle Experiments (FBE), whose simulation component is utilizing large area terrain databases produced via the EBS process. In addition, a Digital Terrain Intensification System (DTIS) is being developed to support high-resolution intensification of localized regions of EBS databases from high resolution classified imagery. This system will use the Environment Federation to tailor the database prior to the exercise by moving coastlines, editing roads and rivers, and adding spot elevations, requiring extensions to the Environment Federation DT capabilities and therefore to the FOM. In addition, the mine/countermine component of FBE desires the ability to integrate real time soundings (containing depth and bottom type) from live participating ships into the synthetic environment. This, too, will require extensions to the FOM.ConclusionThe Environment Federation has evolved from the test and demonstration mode to a well-documented functional federation prepared to provide environmental services to other federations being developed. Environment Federation was specifically designed using the terminology of EDCS in order to aid portability to federations. The changes described here have evolved the Environment Federation FOM into a robust, tested object model ready for evaluation as a SIW standard for environment federations.ReferencesReynolds, R. A. et al., “A Reference Object Model and Supporting Federate for the Ocean, Atmosphere and Space Environments”, 00S-SIW-099, Proceedings of the Spring 2000 Simulation Interoperability Workshop, March 2000.Miller, Dale et al., “Dynamic Terrain in the Environment Federation”, 00S-SIW-115, Proceedings of the Spring 2000 Simulation Interoperability Workshop, March 2000.Mason, George L., “Short-Term Operational Forecasts of Trafficability (SOFT)”, 00S-SIW-066, Proceedings of the Spring 2000 Simulation Interoperability Workshop, March 2000.AEgis Research, “High Level Architecture (HLA) Object Model Development Tool (OMDT) User’s Guide”, Version 1.3, June, 1998 (available from the Defense Modeling and Simulation Office).Author BiographiesAnnette C. Janett is a senior software engineer with Lockheed Martin Information Systems Advanced Simulation Center. She has led development teams in the development of the OpenScene visualization system, and DARPA and USATEC projects Dynamic Terrain and Objects in a Virtual World and Dynamic Virtual Worlds. More recently she has led development efforts on the DMSO Dynamic Terrain in the Environment Federation project. Ms. Janett has been a contributor to distributed simulation and synthetic environments since 1986 and her experience includes ground and air virtual simulation systems, constructive simulation systems, distributed simulation networks, environmental capabilities in distributed simulation, real-time image generator design and development, data modeling for distributed simulation systems, and SEDRIS production and consumption.DR. STEPHEN J. ADELSON is a senior software engineer at Lockheed Martin Information Systems - Advanced Simulation Center in Bellevue, WA. He contributed to all aspects of the DARPA and USATEC projects Dynamic Terrain and Objects in a Virtual World, with a special interest in the repoly service, which allows dynamic terrain modifications of all sizes (a result of engineering or munition damage) and database tailoring aimed towards specific training goals. He was an integral developer in the first phase of the DMSO-sponsored Dynamic Terrain in the Environment Federation project, and continues as a primary developer of the latest incarnation of the Hydrogeologic Feature Simulator federate (HydroSim III). Dr. Adelson received his Ph.D. in computer science from the Georgia Institute of Technology in 1993, with a specialty in efficient graphics algorithms for VR, simulation, and animation. Before joining LMIS-ASC in 1996, he served as a postdoctoral research associate at Los Alamos National Laboratory, researching advanced computer simulation algorithms and web-based tools for collaboration.DR. DALE D. MILLER is the manager of Advanced Technology Development for the Advanced Simulation Center group of Lockheed Martin Information Systems. He led the projects Dynamic Terrain and Objects in a Virtual World and the Terrain Database Generation & Technology for Synthetic Environments both sponsored by DARPA and USATEC. He was also the technical leader for the terrain database and terrain data fusion development for the WARSIM Program. Currently he leads the STRICOM Common SNE and DMSO Dynamic Terrain in the Environment Federation projects. Dr. Miller received his Ph.D. in Mathematics from the University of Washington in 1976. Since then he has contributed to the areas of DIS and its successor, HLA, data models for terrain representations, real-time computer graphics, computer image generator design, adaptive filtering, image processing, feature extraction, machine vision, and optical character recognition.ROBERT A. REYNOLDS is a Principal Member of the Technical Staff at TASC and has been the system architect and lead developer for TAOS through the STOW-97/98 program, the PSM+ program, and the ongoing EnviroFed project. His primary professional interests remain focused in the areas of software engineering, object-oriented modeling, visualization, distributed simulation and synthetic environments. He has a BS degree in Physics from the Massachusetts Institute of Technology and an MS degree in Nuclear Engineering from Carnegie-Mellon University.