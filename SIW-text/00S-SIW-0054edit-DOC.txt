Architectural and Design Considerations inPropagation Model Selection and DesignRobert J. HowardTerry ForemanDoug ClarkAnalysis&Technology/AnteonCentury Building, Suite 12502341 Jefferson Davis HighwayArlington, VA 22202-3809703-418-2800 HYPERLINK mailto:rhoward@atinc.com rhoward@atinc.comKeywords:Wave Propagation, Rays, Beams, Normal Modes, Parabolic Equation, Arrival Structure, AcousticsAbstract: This paper describes the requirements that training systems place on wave propagation models and assesses the strengths and weaknesses of some of the most widely recognized and used propagation model types specifically for their applicability to training systems.  Wave propagation models use different physical approximations and different software architecture design strategies in order to satisfy different application-specific requirements.  Until recently, these models were rarely designed with training system requirements in mind.  No existing model satisfies all of the requirements, leading to consideration of the use of multiple models and hybrid models in training systems.  The difficulties often encountered in developing hybrid models and multi-mode selection schemes are described from a modeling and simulation perspective.  For example, nonphysical discrepancies between model predictions at transition points can be exploited by trainees (gaming) and can lead to inter-operability problems in federations.  Moreover, coverage gaps still remain even when multiple models are used.  The interactions between trainer performance requirements, Simulation Object Model (SOM) requirements, inter-operability requirements, and simulation design are explored using examples drawn principally from among underwater acoustic trainers and models.IntroductionPhysics-based wave propagation models are being incorporated in acoustic anti-submarine warfare (ASW) training systems and radio and radar training systems.  This paper considers the requirements and characteristics of the propagation models used for team trainers that depend on acoustic or radio frequency propagation.  These devices usually have both hardware and operators in the loop.One representation of the wave equation isOnly a small number of closed form solutions are known for this partial differential equation and these are limited to special geometries and special coordinate system constraints. Various approximations and series expansions of this equation are used to obtain normal modes, the Parabolic Equation (PE), ray models, and beam models.   The approximations used for computational efficiency transform the wave equation with respect to the representation used for the wave field, and limit the representation's range of applicability.    As an example, one set of transformations leading to ray or beam theory can be represented as:Detailed discussions of wave propagation phenomenology and wave modeling methods are beyond the scope of this paper.  Finn Jensen et al. [1] provide a survey of acoustic modeling methods and Etter [2] provides a survey of production acoustic propagation models.  Merrill Skolnik’s [3] Radar Handbook is a good single-source reference for applied electromagnetic wave propagation and radar in particular. Figure  1 illustrates some of the differences in representation and basis that occurs with the various propagation loss models in current use.The dimensionless quantity ka is used to characterize the ratio of wavelength to the scales of interest in the problem.  Here, k = 2 is wave number, c/f is wavelength, f is frequency, c is the rate of wave propagation, and a is some characteristic length or distance of interest.  Accurate, computationally tractable models and approximations exist for ka >> 1 (high frequency or short wavelength models) and for ka << 1 (low frequency models).  That is to say, good models exist if the wavelength is either much smaller or much larger than the features of interest.  The region where ka is near one is problematical; no single model exists that entirely satisfactorily covers the overlap region where ka = O(1), and there are no proven or widely accepted strategies for combining or merging the various types of models in the overlap region. EMBED PowerPoint.Show.8  Figure  SEQ Figure \* ARABIC 1 Propagation Loss Field RepresentationsFor many types of simulations the existing models are fully adequate.  For example, gigahertz radars and high frequency sonars tend to operate exclusively in the large ka region.  Other sensors, such as VLF radios and some low frequency sonar systems, tend to operate almost exclusively in the small ka region.  The most demanding requirements tend to arise in acoustic ASW.  Sonar systems may span four decades of frequency and extend from the small to the large ka region.  While radios tend to operate in much narrower frequency bands, many types of sensors are often used by a single platform to span an even broader spectrum than occurs in acoustics.  Even so, the use of distinct sensors allows somewhat greater flexibility for radio wave propagation when compared to underwater acoustics.  In the moderate ka region, the simulation must treat a variety of propagation phenomena.AntiSubmarine Warfare (ASW) Acoustic Trainer RequirementsThe earliest trainers used very simple heuristic “effects” models to simulate acoustic phenomena encountered in the open ocean.  By the 1980’s, most trainers had progressed to pre-computation and table look-up approaches, with multiple contact-sensor depth combinations available.  Oceans were assumed to be horizontally stratified wave guides in order to simplify the calculations.  During the late 1980’s and early 1990’s, efforts were made to develop run-time models adapted from Navy standard models but these never attained wide usage.The early 1990’s saw the emergence of requirements to train for operations in shallow and littoral waters. The variability and complexity of these variations rendered table-driven approaches impractical.  In particular, the crucial simplifying assumption of a horizontally stratified ocean was no longer tenable.  Adaptations of Navy standard models and new modeling efforts were begun in that period.  Most of these efforts involved modification of two dimensional models to operate with sound speed profiles and bottom topography that varies with direction and range from the source.The guiding philosophy and practice for next-generation trainers is to achieve trainer realism by relying on high-fidelity physics-based wave models to perform accurate wave propagation simulations on demand.  (Some of the wave propagation phenomena that suitable trainer models must cope with are described in the Appendix).  The requirements of real-time training systems are severe design drivers for propagation models; no existing model is completely satisfactory, although significant advances have been made and it now seems clear that suitable models are achievable.  The key requirements that trainers impose on propagation models are:Very high speed.  Trainer stimulation of audio and display devices take place on realistic time scales for the sake of trainer realism.  In order to achieve this, physical processes and events, including wave propagation, must be simulated many times faster than the process being simulated.  For example, if sound were to propagate from a real-world source to a sensor in, say,  5 seconds, then the acoustic propagation model would have to calculate the sensor response in less than 0.5 seconds in order to have the synthetic signal ready in time to avoid a conspicuous glitch or other disruption  in the trainer display. (Such non-physical disruptions are called trainer artifacts.)Fidelity.  Tactically significant acoustic phenomena must be simulated with sufficient accuracy to achieve trainer realism.Arrival structure.  Trainers have a peculiar requirement that the acoustic field not only be computed quickly and accurately but that the field be represented in a particular form, namely in the form of propagation path arrival structure.No existing propagation model is quite capable of meeting all of these requirements simultaneously, although some are close and the goals are achievable.Arrival StructureArrival structure refers to information about a propagation path that leads from a source to a sensor as it arrives at the sensor.  It usually includes the arrival strength, arrival angles, phase, and travel time along the path and may also include boundary reflection information.  Ray models yield arrival structure as a matter of course, and it is easy to obtain from beam models.  On the other hand, wave-theoretical models do not naturally produce arrival structure and extracting this information from them is computationally intensive or inaccurate or both.Representation of the wave field in terms of arrival structure confers several important advantages when performing hardware-in-the loop simulations.  In particular, the availability of arrival structure dramatically reduces (by orders of magnitude) the computational load required to stimulate beam-formed sensors.Accuracy tolerances of one decibel for arrival strength are usually adequate but can be difficult to attain.  Ray models are not capable of such accuracy and beam models sometimes fail to achieve it.  Wave models can achieve the desired accuracy but, as explained elsewhere, are not usually suitable candidates for trainer models for due to excessive run times and outputs that are difficult to adapt to trainer requirements.Accuracy tolerances for arrival angles are not particularly demanding.  It is usually sufficient for the arrival angles to be accurate to within about a quarter of the sensor beam width.  For most ASW applications, only the vertical beam width need be considered and vertical arrival angle accuracy of one degree is more than sufficient.Accuracy tolerances for phase and arrival time are much less forgiving when wave interference effects are important.  If two or more paths of nearly equal strength contribute to the received signal, the relative travel times must be accurate to within a small fraction of /c. This can require relative arrival times to be accurate to within femto seconds for coherent RF simulations.  Even for acoustics, the relative arrival times must be accurate to within 60 microseconds at 2500 hertz.  These tolerances can be difficult to meet but failure to meet them causes clearly visible glitches in received signal displays.  Similarly, relative phases must be computed to within a small fraction of 2. Speed and TimelinessThe update rates required of propagation models vary from tenths of a second to hours.  The rate is determined by the relative velocities and locations of sources and sensors and the accuracy requirements of the simulation.  It is common practice to interpolate results between updates since interpolation is orders of magnitude faster than running the propagation models, but determining when to re-run the propagation models is  difficult and a faulty update scheduler can produce conspicuous and unacceptable “glitches” in displays presented to trainees.The number of contact-sensor pairs is critical to determining the speed requirements for the propagation models. The number of contact sensor pairs can approach 1600 to 2000 with currently fielded air ASW systems for example, and some new systems could increase this by an order of magnitude.  Even with a single platform such as a submarine, the total number of contact-sensor pairs can easily reach 50 to 100.  With widely distributed radio/radar sensors, the number of contact-sensor pairs can exceed those in ASW simulations.  It is generally possible to distribute the propagation models and run them in parallel but this approach rapidly drives up the complexity and cost of the training system.The potential for pre-computation to accelerate processing should not be overlooked.  There are several physical quantities used by propagation models, such as normal mode sets,  that are invariant or slowly varying for any particular set of environmental conditions.  These can sometimes be pre-computed before the training session and then used by the models during the training session to greatly accelerate computations.Spatial CoverageSpatial coverage must extend from the sensor/source near-field to the edge of the gaming area or the limits of signal detectablility if it is nearer.  This coverage must be free of artifacts and implausible behavior.  Several of the modeling approximations discussed below have limitations relative to either the near-field or the angular aperture covered.Spatial and frequency coverage of the propagation models must match that of the sensors.  For ASW simulations the gaming areas are typically between 128 to 1024 nautical miles on a side.  For RF and radar simulations they can range from tens of miles on a side to encompassing the entire globe, and training that includes satellite operations will soon be required.Frequency CharacteristicsTeam trainers require coverage of the entire frequency range of the sensor suites being trained.  This coverage must be continuous, without non-physical so-called trainer artifacts such as pauses or glitches in displays.Frequency coverage for ASW sensors ranges from a few hertz to perhaps several hundred kilohertz.  The bandwidth of acoustic sensors is usually at least an octave and some sensors span four or more decades.  As will be discussed later, the wide bandwidth of acoustic sensors severely challenges propagation modelers.Current communication devices and radars, on the other hand, are typically narrowband, with bandwidths of a few percent of the transmission frequency.  There are significant exceptions, though. RF surveillance device sensors can span several octaves, and increasingly prevalent spread spectrum communications use much wider bandwidths. Temporal CharacteristicsPropagation models embedded in environmental representations are often called upon to capture short and long term temporal variations.  Cause and EffectThe instructor must be able to explain to trainees the effects observed in simulated delays in terms of causal processes in the simulated acoustic environment.  That is, the effect of the environmental simulation must be consistent with measurable environmental processes.  In general, this requires that all sudden changes in sensor performance must be correlated with environmental characters both in direction and magnitude.Accuracy/FidelityAccuracy and fidelity requirements are normally determined independently for each simulation.  The requirements tend to vary, depending on the community involved and the intended use for the simulation.  Accuracy and fidelity are often traded off against other performance requirements. Computational FitnessComputational fitness refers here to the suitability of the model outputs to a particular simulation.  For example, consider a wideband beamformed sensor.  Arrival structure outputs have proven to allow the most economical data for such a simulation to consume.  While it is certainly possible to use complex pressure outputs (e.g., Parabolic Equation (PE)) or normal modes as inputs to such a device, the computational load for beamforming and obtaining the broadband response will dominate the hardware budget by several orders of magnitude.  Beamforming is a very expensive operation.  Arrival structure inputs allow a plane-wave approximation to be use in the simulated beamformer, and this greatly simplifies the beamforming calculations.There is no hard and fast rules for balancing the propagation loss outputs against the remainder of the simulation.  Almost any of the available models can produce a usable output for narrowband, omni-directional sensor.  The simulation or environmental representation designer must carefully consider the intended use of the models before selecting a model for any particular application.Data Input ConsiderationsThe distinction between data inputs and model outputs is rather strong for propagation models.  Measurable, quasi-static , physical parameters are generally used as inputs.  These include parameters like temperature, salinity, conductivity, humidity, etc.  Model outputs include quantities like complex intensity, propagation loss, travel time, back-scatter strength, etc.Acoustic propagation models generally require sound speed profiles, bottom characteristics (absorption and scattering), surface conditions (seastate) and volume scattering coefficients.  Acoustic models also may require some information about the dissolved solids in the water column.  Similarly, RF models require temperature and humidity profiles, atmospheric composition data, surface conductivity and resistance, and possibly information on the ionosphere.  All of these data vary over time.  Some data varies seasonally or daily; some literally varies with the phase of the moon.Propagation Models Strengths and Weaknesses in Trainer ApplicationsPropagation Model CharacteristicsThis section discusses the fundamental strengths and weaknesses of specific modeling approximations used in propagation models as they relate to modeling and simulation requirements encountered with man-in-loop and hardware-in-the-loop simulations.  This discussion pertains to broad classes of models, and is not intended to address the characteristics, strengths or weaknesses of specific software instantiations.  At least in principle it is possible to correct weaknesses and errors in specific instantiations up to the point where the fundamental limitations of the modeling approximations are encountered. Wave models include the Parabolic Equation (PE) approximation, normal mode approximations, and variations on the finite element methods and the T-matrix methods.Parabolic Equation ModelsParabolic Equation (PE) models  compute  the wave field amplitude and phase at a range and each depth in a water column.  There are a wide variety of approximations used in PE models, but all suffer from some basic restrictions.  First, PE models assume that significant propagation only occurs in a narrow aspect window near the horizontal.  This restricts accuracy when steep angle propagation is important.  (This restriction is relaxed in recently developed wide-angle PE models, but at the cost of performance.) Second, PE models, like normal mode models suffer from poor near-field performance.  Third, PE model run times increase with ka, just as normal mode models do.  Fourth, as with normal mode models, PE models are inherently narrowband.  It is necessary to perform Fourier synthesis to obtain broadband predictions.The wave field at a single frequency contains little arrival structure information.  It is possible to obtain crude arrival angle information using a virtual array, and it is possible to obtain crude arrival time information by Fourier decomposition of pulse input.   While the results of such an approach accurately represent the propagation, they do not map well into the requirements of trainers.  On the other hand, the ambiguity that results at low ka values is a useful ParameterRay-TraceGaussian BeamPENormal ModeT MatrixFinite ElementRun TimeFastFastSlow1,2Slow 1,2Very slow 1,2Very slow 1,2Pre-computation potentialyesyesno(?)yesnonoSpeed with pre-computationVery fastVery fastN/AFastN/AN/AMemory for pre-computationMod.Mod.N/ALargeN/AN/ACost of beam formingLowLowVery high3Low to moderateVery high 3Very high 3Frequency RangeHigh freq4Mid to high freq5Low freq6Low to mid freq7Low freq 6Low freq 6Broadband ModelYesYesNo8 No8 No8 No8 Range dependence possibleYesYesYesYesYesYesAdiabatic ApproximationNo, N/ANo,  N/ANot Req’d9Not Req’d9NoNoSteep Angle PerformanceGoodGoodPoorGoodGoodGoodClose RangeGoodGoodPoor10 Poor10GoodExcellentDiffraction and Duct Cut-offNoPartialYesYesYesYesExisting, adaptable modelYesYes YesYesNoNo1 Run time increases in proportion to the number of discrete frequencies required.2 Run time increases in proportion to the frequency.3. Model produces complex pressure field, requiring beamformer, inverse beamformer implementation on a per sensor basis.4. Model becomes inaccurate when feature size approaches several wave-lengths of sound.5. Beam approach tends to compensate for weakness in ray-trace approach.6. Limits primarily due to long run times.8. Accuracy degrades with increasing frequency and water depth, unless number of modes used in the calculation increases.  This degrades run times.8. Broadband performance is achieved by making multiple runs at defined frequencies, and then inverse transforming on the signal (or construction a filter).9. Both adiabatic approximation and coupled modes implementations exist.  The later runs significantly slower than the former.10. An overlay mode (e.g., ray-trace) model is often used to provide close in performance.  Otherwise computational cost rise exponentiallyindication that approximations can safely be made in matching two models’ arrival structure.A virtual beamformer was used to merge a PE model and ray-trace model (MPP) model.  The process proved less than satisfactory, and non-intuitive.  There was often no obvious, simple method of assigning the eigen-rays to the peaks in the virtual beam pattern.  Also, the optimal configuration for the virtual beamformer was not obvious.  Problems were encountered when using a vertical virtual beamformer that crossed a layer, and therefore could be partly in a shadow zone and partly in a duct.  Horizontal beamformers presented similar doubts.  Furthermore, the virtual beam pattern tended to vary with frequency, further complicating assignment of eigenrays to virtual beamformer peaks, since eigenrays contain no frequency dependence.  Using the actual sensor response appears to be the best approach, however this requires re-calculation for each sensor; a costly approach.Normal Mode ModelsNormal mode models can produce very nearly “exact” solutions to the wave equation, at least in stratified media and at some distance from the source.  These highly accurate solutions are expressed as a weighted sum of the normal modes for a particular set of boundary conditions. As a practical matter, normal mode models are far-field models.  The number of normal modes required to describe the field rises sharply with proximity to the source. There is a minimum practical range below which a normal modemodel’s predictions either degrade unacceptably or the computational burden becomes unacceptable.  The minimum range is set by the maximum number of modes that are allowed for the model.There is a finite but often large number of normal modes in the farfield.   The number of normal modes required to describe the sound field increases with both the frequency and the size of the waveguide.  If the characteristic size of the waveguide is a, then the number of modes varies in proportion to ka.Normal mode models are inherently narrowband.  This means that the computations must be repeated for each new frequency.  The training community has found a way to deal with this problem.  The propagation loss is computed for a set of frequencies and filters are constructed to represent the propagation loss.  This approach is referred to as Fourier synthesis.  To one degree or another this approach is used for all ASW acoustic propagation loss models used in trainers.An association can sometimes be made between a ray arrival angle, derived from a ray model, and the group velocity  EMBED Equation.3  of a normal mode, where EMBED Equation.3  is the eigenvalue of the mth normal mode.  Alternatively and more often, the computationally more tractable phase velocity  EMBED Equation.3  is used to form the association. These associations are sometimes used as the basis for overlaying or merging ray or beam models with normal mode models.  These associations lack firm theoretical foundations, however, and are unreliable, while more robust associations based on Fourier synthesis are computationally impractical.  We are not aware of a satisfactory means of associating rays with normal modes, or overlaying normal mode models with ray or beam models.  Normal mode models are therefore incapable of satisfactorily computing arrival structure.Finite Element and T-Matrix ModelsFinite element and T-Matrix models produce the same type of outputs as PE models, and thus have the same problems when merged with a ray-trace model.   These models have many of the same strengths and weaknesses as normal mode models..  They do not generally suffer from the problems associated with use of the adiabatic approximation however when used in range dependent applications.The features of finite element and T-Matrix models that prevent their use in trainers  are excessive run times and the inability to compute arrival structure.   Run times for these models increase quadratically as (ka)2. Ray and Beam ModelsRay and beam models are typically use the WKB approximation, or the Eikanol approximation.  This set of approximations results in a representation that is commonly used in geometric optics.  It is intrinsically a large ka approximation.Ray ModelsRay models have several attractive features from the standpoint of trainer requirements.  They tend to be very fast and can readily treat the strongly range-dependent environments of recent and increasing strategic interest.  They explicitly identify the energetically significant propagation paths connecting a source to a sensor—the eigenrays—and compute the field using them, and they compute arrival structure.  The pictorial representation of the field in terms of rays is intuitively appealing and much more readily grasped than, say, the rather abstract notion of normal modes and spatial beat frequencies.  This makes ray theory models very useful as instruction aids to illustrate principles of wave propagation.This is all achieved, unfortunately, at the cost of fidelity.  Uncorrected classical ray theorygrossly overestimates field intensities near convergence zones ;neglects diffraction and grossly under-estimates field intensities in shadow zones;is oblivious to dispersion processes including important duct leakage and cut-off effects.Ad hoc modifications to ray theory have been developed in attempts to correct these deficiencies but these are awkward to apply in practical production models and not very satisfactory from a theoretical standpoint.Models based on ray theory also tend to suffer from certain computational difficulties peculiar to ray models.  For example, the accuracy of the field intensity calculation depends crucially on identifying the energetically significant eigenray paths, but ray models frequently fail to find all of them.  The results are nonphysical “dropouts”—regions where the predicted acoustic field falls abruptly (and incorrectly) to very low levels or to zero.  These dropouts tend to occur near convergence zones where the acoustic field is actually quite high, and are strikingly apparent in trainer displays.Beam ModelsBeam models are similar to ray models in many respects.  Both use ray-tracing as the back-bone of the field calculation.  But beam models do not base their field calculations on eigenrays.  Instead, beam models trace a fan of rays from the source and associate a beam of finite width with each ray, usually with a gaussian intensity distribution about the center of the beam.  All of the beams contribute to the field at a point but beams that pass farther from the point contribute less to the field.As noted earlier, it is crucially important that a model compute arrival structure in order to qualify as a candidate for a trainer model.  Since beam models do not rely on eigenrays to perform field calculations, most do not locate eigenrays or compute arrival structure.  However, it is a relatively minor enhancement to equip a beam model to compute arrival structure.Beam models are decidedly more accurate than ray models.  They treat convergence zones, shadow zones and some diffraction phenomena much better than ray models.  They still fail to capture the behavior of ducts completely, and suffer some inaccuracy for small ka.Beam models can be very fast, with many quantities pre-computed.  They are considered a broadband model in the same sense as ray trace models.All things considered, beam models seem to be the best currently available models for trainer applications.Modeling Approximations and Extensions for Range DependenceThe extensions necessary for range dependence are common to a variety of models.  These approaches are discussed here rather than with the individual models to avoid repetition.Coupled Normal Modes.  Coupled normal mode modeling assumes that energy is conserved when the water column changes.  This means that each of the normal modes in one water mass must be transformed into a second set of normal modes for the second water column.  This transformation is straight forward since one is transforming from one orthogonal basis to another, but it is also expensive to perform.Adiabatic approximation.  The adiabatic approximation assumes that no energy transfer takes place among normal modes.  This in turn requires that the propagation conditions do not change significantly in a ray cycle.  Rapid changes in water depth or SSP can cause errors when using the adiabatic approximation. The primary advantage of the adiabatic approximation is speed.  There is no complex calculation of mode coupling coefficients at each change in depth or water-mass.Full Wave Approximation.     Full wave equation models include back-scatter and coupling between modes.  These can be extremely expensive calculations.  They are performed naturally in finite element and T-matrix models, but these have little application in ASW acoustic trainers because the models execute so slowly.Paraxial approximation.  The paraxial approximation assumes that the signal propagates in a narrow beam.  This approximation is central to PE models.  This approximation often leads to results that are only valid for angles near the horizontal; that is, arrivals from steep upward or downward angles are not accurate.Model Merging StrategiesSince the different types of models described above have different domains of applicability it is tempting to consider implementing a model mode selector for trainers that would choose the appropriate model for use under different circumstances.  Indeed, this has been attempted many times, but extensive experience with several such patchwork models has shown them to be awkward and very unreliable; they are large, difficult to implement and validate, and tend to fail unexpectedly and to make nonsensical predictions in unforeseen situations even after years of operation.  Moreover, when transitions take place from one regime to another, the inevitable model prediction discrepancies must somehow be reconciled to prevent glitches from occurring at the transition ranges, depths, frequencies, or environments.  It is highly desirable instead that a single model treat all source and sensor geometries, frequencies, and acoustic environments.  The models that come closest to providing the desired universal coverage are beam models.Acoustic ASW Trainer Environmental Representation ArchitectureThe environmental representation that has been used in acoustic ASW trainers has taken many different forms over the years, however all of these forms have a common architecture once allowance is made for combination of some elements and off-line calculations.  REF _Ref471118630 \* MERGEFORMAT Figure 2 depicts a notional, idealized architecture for an acoustic ASW environmental simulation.Figure  SEQ Figure \* ARABIC 2 Notional Acoustic Environmental Representation ArchitecturePropagation ServerThe propagation server is ultimately responsible for producing quantities like propagation loss, reverberations, back-scatter and arrival structure.  In older trainers with restricted computational capabilities the propagation servers were often collapsed to a table-driven algorithm with extensive off-line calculations.  While computationally efficient, this approach required a great amount of hand tuning and restricted the number and types of environments available for training.  The table driven approach has so far proven to be impractical when range-dependent environments are required.  There have been several attempts to extend the table-driven approaches to range-dependent environments.  Due to the amount of memory and the amount of pre-computation required to implement such schemes they appear to be limited to simulations with very small gaming areas or to simulations that only require a very course granularity for the environmental representation.The more common approach today appears to be to depend on run-time calculations when large gaming areas, arrival structure and fine granularity is required.Environmental Data ServerThe environmental data server is ultimately responsible for providing fundamental data to the propagation loss engine.  These data must be available with a granularity that reflects the scale of environmental features of tactical interest.For acoustics the fundamental data include SSPs (temperature and salenity), scattering coefficient profiles, surface roughness (seastate), bottom loss and bottom scattering.  The bottom characterization can take many forms, but OAML has standard forms for all of this data.  These data can be locate and ordered through MEL.  At the present time the granularity of  OAML data must be supplemented to fulfill training requirements.  This usually occurs in shallow water where the current samples are too widely spaced, or for dynamic features where the available seasons data tends to average out features like the edge of the gulf stream, fronts and eddies. The quantities required by RF propagation models are more varied than for acoustics.  Ultimately though these data reduce to a requirements to know the composition of the atmosphere as well as the conductivity, permeability and dielectric constants for all surfaces.  Atmospheric composition includes the partial pressure of various gases (including water vapor) and the concentrations of various particulates (including water droplets with a size distribution).  The ionosphere, cultural features, and topography can be significant contributions for RF simulations.The environmental data server must be able to provide the required data on demand for the region of interest, or perhaps more accurately along vertical planes between two points of interest.Propagation EngineThe propagation engine has been discussed in some detail above.  At this point we need only note that the propagation engine must be able to produce quantities such as propagation loss, arrival structure and scattering on demand.  Interpolation / Extrapolation EngineIf the propagation engine outputs are changing in a smooth and somewhat predictable manner interpolation / extrapolation can be used to reduce the number of calls to the propagation engine.   This technique is very commonly used by table lookup approaches to “fill in” the data between table entries. It is worth noting that the design of interpolation algorithms can be very sensitive to the actual accuracy specifications levied on the environmental representation.  This is particularly true when complex arrival structure is present if the various arrivals can add coherently.  Relative arrival time accuracy requirements can be a significant consideration in such cases.  Propagation Engine Scheduling AlgorithmThe propagation engine scheduling algorithm determines how often the propagation engine must be run.  The goal of the propagation engine scheduling algorithm is to conserve computer resources while at the same time ensuring that the environmental representation does not exceed its error budgets.   In its simplest form it simply schedules the propagation engine to at some predetermined rate, or perhaps to run through the calculations as fast as possible.  More sophisticated algorithms try to schedule the propagation engine to concentrate efforts in regions and for contact sensor combinations that are experiencing rapid changes in propagation engine outputs.  Real Time ArchitectureThe design of the real time architecture for propagation models embedded in environmental representations depends on the overall trainer architecture.  For the current discussions only two signal generation approaches will be considered.  The first is contact generation “at the source” the second is contact generation “at the sensor.”  This discussion will also assume that the real-time architecture for the environmental representation exists as a distinct module.  There are numerous designs where the environmental representation’s real time architecture is embedded in or combined with some part of the contact or the sensor simulation architecture. Such designs usually result from either cost or hardware constraints.  They almost always lead to reduced interoperability, reduced simulation re-use, increased maintenance costs and increased life-cycle support costs. Figure 3 depicts a notional run-time architecture for implementing acoustic propagation models.  This figure assumes a ray/beam implementation.  The implementation for other acoustic field representations will be different, and in general significantly more complex.  The summer in the figure represents a beamformer. Delay Engine and Arrival Structure ImplementationThe distinction between contact-at-the-source and contact-at-the-sensor architectures is almost exclusively found in the delay engine.  In either case, the propagation engine must produce the correct delay times with adequate relative accuracy. For contact at the source a delay line is used to propagate the signal from the source to the sensor.  Fine delay filters are often used to obtain sub-sample time delays, particularly when arrival structure is being modeled.  In this approach Doppler is automatically produced.   Note that “at the contact” delay engines are only practical for very low frequencies.  They cease to be practical when the sample rate times the total delay approaches one million to perhaps one hundred million (depending on the total number of contact sensor pairs).  In practice this means they can only be used for acoustics and the very lowest frequency RF. EMBED PowerPoint.Show.8  Figure  SEQ Figure \* ARABIC 3 Notional Acoustic Environment Run-Time ArchitectureFor generation at the sensor, a record must be kept of the total delay for each arrival.  The signal must then be generated with the appropriate delay.Propagation Loss FilteringFor narrowband simulations, the propagation filtering can consist of simple scaling.  For broadband simulations the usual approach is to filter the signal using linear phase finite impulse response filters with one-third octave resolution. For propagation loss the effects of both spreading and attenuation are included in the propagation filters acoustics the filter characteristics can become very severe at high frequencies and long ranges due to the strong frequency dependence for attenuation.Special Path ProcessingIn acoustic simulations the fine path structure induced by wave action and faceted bottom reflections has proven important to operator classification of the arrival structure. The lack of knowledge of the instantaneous reflectivity has forced statistical models to be used in these cases.  These models can represent significant computational loads.ConclusionsAt the present time there is no sin acoustic ASW or the RF communities.  Beam models seem to come closest. Further, the current environmental representations are strongly limited by the available computational power.  Inefficient representations of the wave field in some modeling approaches, together with the lack of efficient algorithms for transforming between the various representations, imposes significant fidelity tradeoffs for federations that use either physics-based underwater acoustic or RF propagation models if interoperability is to be achieved.The selection of propagation models is of fundamental importance to the federate’s SOM and a federation’s FOM.  No federation can achieve consistency if it uses different propagation models for the same medium, signal type and frequency range.  Since the selection of propagation models profoundly affects the federate’s architecture, it appears that federates that use propagation models should be classified on the basis of the types of propagation models they use or require.APPENDIX     Wave Propagation Phenomena Following are some terms describing propagation effects that trainer models must cope with.Spreading loss is the reduction in wave field intensity caused by the redistribution of energy over an expanding area as the wave propagates away from the source.  Spreading loss follows a simple inverse square law with distance from the source in an idealized unbounded homogeneous medium but is very much more complicated in realistic ocean and atmospheric media.Attenuation is the loss of energy by the combined mechanisms of scattering and absorption, or conversion to heat.  Depending on the frequency, acoustic absorption in the ocean is caused by relaxation processes of borates, sul fates, and other complex ions.  For radio waves, water vapor, carbon dioxide, and even oxygen contribute to absorption.  The energy loss in decibels along a propagation path is proportional to the path length from the source to the receiver.Refraction is the bending of a propagation path induced by variations of the index of refraction in the medium.  Refraction is commonly observed with light.  The operation of a lens and mirage effects are examples of refraction.  Refraction due to horizontal stratification of the index of refraction of the medium can form ducts that greatly enhance the signal strength and shadow zones that greatly reduce it.  Refraction can also cause focusing phenomena such as caustics and convergence zones.  The prediction and exploitation of these phenomena are especially important to underwater acoustic tactical planning and training.Scattering of radar waves is referred to as clutter and scattering of sound is called reverberation.  Scattering can be the dominant cause of attenuation.  A radar, for example, may have difficulty penetrating a rain storm because of scattering loss.Diffraction is the process by which waves penetrate shadow zones formed by obstructions or by variations in the index of refraction of the medium.  Diffraction becomes increasingly important as ka decreases below unity, where a is the characteristic size of the obstruction or wave guide.Tunneling is a diffraction process by which wave energy escapes from a duct, channel, or waveguide to be redistributed in regions that would be classically forbidden.  Duct leakage is a common manifestation of tunneling.  Classical ray theory predicts that energy trapped in a duct cannot escape.  However, a full wave-theoretical treatment predicts that energy will leak out of a duct if ka is sufficiently small, where a is the characteristic size of the duct.  Boundary interactions can range from simple to exceedingly complex for wave propagation.  The simplest possible interaction consists of specular reflection, much like what is observed when light strikes a mirror.  If the surface is rough or time varying more complex interactions are observed.  If the surface has periodic variations it can behave like a diffraction grating and scatter the energy though a wide variety of frequency dependent angles, much like a prism breaks light into a rainbow.The surface of the ocean, the surface of the earth, the ionosphere and the ocean bottom.  In general these surfaces are poorly characterized and more often than not treated in a statistical or average way.  The situation is complicated by the fact that some of the most important interactions are due to features with ka~1.REFERENCES[1]	Finn B. Jensen, William A. Kuperman, Michael B. Porter, and Henrik Schmidt, Computational Ocean Acoustics, AIP Press, New York (1994).[2]	Paul Etter, Underwater Acoustic Modeling: Principles, Techniques, and Applications,E & FN Spon, New York (1995).[3]	Merril I. Skolnik (ed.), Radar Handbook, McGraw-Hill, New York (1990).Author BiographiesDouglas Clark is a vice president of Analysis & Technology, Inc and has over 25 years experience in modeling and simulation. He has lead efforts developing signature data and models to support simulations, developed design concepts and provided engineering support to the development of trainer systems and engineering federations.  Currently he is a member of the MARVEDS Working Group concentrating on issues associated with the development and use of synthetic environments and also supports the Battle Force Tactical Trainer (BFTT) technical team.  Mr. Clark has an MS in electrical engineering from the University of Connecticut.Terry Foreman, Ph.D. Dr. Foreman earned a Ph.D. in physics in 1987 at the University of Texas at Austin, specializing in acoustics, and an M.S. in electrical engineering in 1983, also at the University of Texas, and specializing in signal processing and digital automatic control. His research interests include wave propagation physics and signal processing.  He has developed computer models of underwater and atmospheric acoustic propagation, high frequency (HF) radio wave ionospheric propagation, microwave propagation, and laser and optical propagation. These models have been applied to underwater acoustic sonarsystem performance prediction, sonar trainers, atmospheric nuisance noise prediction, long range detection of aircraft, environmental acoustic parameter sensitivity studies, HF and microwave system performance prediction, and laser propagation through the atmosphere and sea. He has developed signal processing algorithms that include adaptive broadband generalized beam forming methods for detecting and tracking acoustic targets and has developed acoustic array system performance prediction and analysis models. Robert J. Howard Mr. Howard has over 20 years experience in the procurement, development, design and testing of ASW acoustic trainers.  Mr. Howard has participated to one degree or another in the development and design of every major acoustic ASW trainer that has been developed for the surface, subsurface and naval air communities in the last 20 years.  His expertise includes model design, signal processing, system engineering, testing and software design.  He has served as a principal Validation, Verification, and Authentication (VV&A) agent on over 15 distinct devices.   Mr. Howard has designed, coded and tested a wide variety of models for ASW sensor trainers.. EMBED Equation.3   EMBED Equation.3  Eikonal EquationTransport Equation