Evaluation of a Mobile Ad Hoc Network with Terminal ExposureDominic LaRoccaMohammad MirhakkakThe MITRE Corporation39111 West Six Mile Rd.Livonia, MI  48152734-591-6164, 732-883-7820 HYPERLINK mailto:dlarocca@mitre.org dlarocca@mitre.org,  HYPERLINK mailto:mmirhakk@mitre.org mmirhakk@mitre.orgKeywords:ad hoc networks, channel access, multicast ABSTRACT: It is a customary belief in radio communications that multi-hop radio networks with connectivity to exposed terminals will perform better than networks without that same connectivity.  Network connectivity to exposed terminals can occur frequently in military applications when terrestrial radio networks are assisted by low flying aeronautical radio nodes (e.g. Unmanned Aeronautical Vehicles, Airborne Communication Nodes).  The low flying vehicles provide the connectivity that is necessary for communications to exist between all nodes within the terrestrial radio network.  This report shows that if the network protocols are not developed for an architecture that assumes the presence of exposed terminals, network performance will suffer.  This report evaluates the performance of a small distributed radio network with connectivity to an exposed terminal and includes a channel access capacity analysis and a multicast policy analysis.  The two analyses illustrate how minor changes in networking algorithms and policies can greatly improve network efficiency.1. IntroductionExposed terminals in radio networks can provide the connectivity required for end-to-end communications within a subnetwork of  mobile nodes.  In cellular communications, cell towers are the exposed terminals, forming the backbone infrastructure needed for long distance communications.  Exposure to the cell tower allows individual nodes to gain information about the cellular network and thus set up communications with any node within that radio network.  To compensate for the increased traffic flow from remote mobile nodes to the cell tower (exposed terminal), the tower is equipped with additional networking resources.  In military applications, networking resources are often scarce.  Frequently, a network must form without the benefit of high power, high capacity terminals.  In addition, military networks are generally ad hoc in nature, which implies that all nodes have arbitrary mobility and that links that interconnect the nodes within the network fluctuate.  Unlike the cellular infrastructure where the cell towers are immobile and high power, ad hoc networks frequently have limited power terminals and no fixed backbone infrastructure.  To overcome this burden, military networks have used Unmanned Aeronautical Vehicles (UAVs) or Airborne Communication Nodes (ACNs) to provide the needed connectivity.  However, if the exposed terminal (UAV, ACN) is not equipped with additional resources, network performance will degrade and fail under certain conditions. Networking algorithms have been proposed that efficiently disseminate data over ad hoc networks; however, few have addressed the problems associated with terrestrial networks that may also have connectivity to an exposed terminal.  It is necessary when developing networking algorithms for ad hoc networks to address the problem of terminal exposure and understand the impact on network performance.  This paper addresses this problem and evaluates a stack of networking algorithms to show how modifications to existing protocols and multicast policies can greatly improve network performance.  The stack of protocols that was evaluated consists of a channel access, unicast routing, and multicast routing protocol.  The underlying physical layer was not explicitly modeled.  Current radio hardware performance curves were used to develop transfer functions as input to the physical layer to emulate existing radio technologies.  The channel access and multicast evaluations were conducted separately.  Separate simulations for the channel access evaluation and multicast evaluation were developed using MIL3’s Opnet Modeler package.  Figure 1.1 illustrates the protocol components used in each network node for the simulation effort.Fig. 1.1  Node StructureThe channel access simulation focused on the efficiencies of the different channel access algorithms when accessing an ACN.  It has application modules that generate and receive traffic with unicast and broadcast destinations.  In addition, it has a module for encapsulating packets with IP headers and for conducting DLC functions.  The channel access simulation did not include routing control traffic but explicitly modeled link layer functions and generalized physical layer functionalities.The multicast simulation focused on network performance for different multicast routing policies.  The simulation has application modules that generate and receive traffic with unicast, multicast, and broadcast destinations.  It has a selective directed multicast protocol that uses the routing tables from the unicast routing protocol to determine multicast paths to multicast group members. It has a unicast routing protocol that computes routing paths to unicast destinations.  In addition, the multicast simulation has modules for encapsulating packets with IP headers, forwarding IP packets, and integrates the baseline channel access module used in the channel access simulation.  This simulation approximates the physical layer in the same way as the channel access simulation.This paper is organized in 10 sections.  The first section provides an introduction.  The second and third sections describe the scenarios and propagation modeling used in the evaluations.  The fourth section describes the radio physical layer parameters.  The fifth, sixth, and seventh sections describe the channel access, unicast routing, and multicast routing protocols, respectively.  The eighth section describes the applications used.  The ninth section provides the results, and the tenth section provides a conclusion and some  future work ideas.  Support for these evaluations came from the DARPA Small Unit Operations program and CECOM’s PEO C3S.2. ScenariosThe scenarios developed for these evaluations were intended to stress the network at each protocol level.  The scenarios were developed using ModSAF, which recorded the location and time of each event that occurred during the scenario. The information was subsequently analyzed to determine the propagation loss, range, link connectivity, and link fluctuation characteristics between all elements in the scenarios.  The analysis spanned the full length of the scenarios and involved use of propagation loss models.  It also required querying ModSAF for terrain profile information between the scenario elements (link end points).Propagation loss and range information was recorded from the analysis at even time increments (5 seconds) and stored in a series of loss and range matrices.  This information was then used as physical layer input to the simulations.  The propagation losses were pre-computed to avoid what would otherwise be unacceptable run-time delay from computing them during OPNET simulation runs.2.1 Channel Access Capacity Evaluation ScenariosThe channel capacity evaluation used two scenarios to define connectivity.  The first scenario, the inter-group scenario, involved 20 nodes, each disconnected from the others, but directly connected to an ACN (ACN and exposed terminal are used interchangeably throughout this paper).  This scenario depicted an operation in which only a single node within a largely connected group would have access to an ACN.  Nodes within a group would pass their ACN directed traffic to a designated node, which would then transmit to the ACN. The second scenario used in the channel capacity evaluation, the intra-group scenario, involved 20 nodes that were densely connected to each other through terrestrial links, and each also had direct connectivity to the ACN.   These scenarios were developed to stress the channel access algorithms under extreme conditions when an ACN was present and was not designed to explicitly emulate a regimented SUO scenario.   The connectivities were static for the channel access evaluations. 2.2 Multicast Evaluation ScenariosThe Multicast Evaluation used an urban terrain and a rugged rural terrain to define connectivity.  The Urban Scenario (US) consisted of 20 infantry units, all located within one mile of each other.  The close clustering of forces provided full network connectivity.  The Rural Scenario (RS) consisted of 4 groups of 5 vehicular mounted soldiers.  The distance between each group at the start of the scenario was 10 km.  The distance between each member within a group was 30 feet.  Each group traveled at 30 km/hr towards a central object.  When the groups were within 500 m of the object, they retreated back to their original location. 3. Propagation Modeling The Terrain Integrated Rough Earth Model (TIREM) was used in the link analysis to capture terrain dependent propagation losses for the infantry Urban Scenario and the vehicular Rural Scenario for terrestrial communications.  A Fort Hunter Liggett map was used in the Urban Scenario and a Fort Irwin map was used in the Rural Scenario.  TIREM was chosen because of its ability to accurately support a wide range of antenna heights, ranges, and frequencies.  TIREM was developed for antenna heights from 3 to 500 meters, unlimited range, and frequencies from 40 to 20,000 MHz.  R squared losses were assumed between terrestrial nodes and the ACN.  4. Physical LayerThe physical layer used in the channel capacity and multicast evaluations was the same. The physical layer consists of radio frequency (RF) and signal processing components.  The radio frequency (RF) parameters chosen for the evaluations are listed in Table 4.1.Table 4.1 RF ParametersParametersValuesCarrier frequency300 MHzTransmit power1 WAntenna gain (transmit and receive)0 dB (omni-directional)Antenna height (transmit and receive)1 mReceiver noise figure10 dBEnvironmental noise factorSame as receiver noise figureThe signal processing parameters used in the evaluations are listed in Table 4.2.Table 4.2.  Signal Processing ParametersParametersValuesRadio burst information 250 kbpsDirect Sequence Spread Spectrum (DSSS) chip rate4 McpsTransmission preamble50 bitsModulationPSKForward Error Correction (FEC)Convolutional rate ½, K = 7, soft decision decodingInterleavingOver length of transmissionRadio access was half-duplex with all transmissions occurring in a shared DSSS channel (frequency band). Transmission preambles and acquired frames were corrupted by bit errors depending on noise and interference levels.  Both preambles and acquired frames were corrupted by demodulated bit errors according to estimated channel-bit-energy-to-noise-density (Ecb/No) ratios and the PSK BER-versus-Ecb/No transfer function.  Ecb/No and corresponding demodulated BER were determined separately for each portion of a transmission that had a different interference level.   The equation for Ecb/No used in the first stage of bit error corruption is  EMBED Equation.2  where  EMBED Equation.2   is the transmit power,  EMBED Equation.2   and  EMBED Equation.2   are the transmit and receive antenna gains,  EMBED Equation.2   is the radio channel bit rate (burst rate for modulated bits),  EMBED Equation.2   is the channel propagation loss, k is Boltzman’s constant, T is the ambient temperature, Nf  is the noise figure, and I is interference at the receiver.5. Channel AccessThe MACA channel access protocol was selected for these evaluations.  In the channel access evaluations, a baseline and an alternative approach were compared.  The MACA baseline approach was used in the multicast evaluations. Both the baseline and alternate version of MACA use the ACN as the mechanism for disseminating unicast and multicast traffic. For baseline operations, a node having unicast information to transmit, waits a randomly chosen time before sending an RTS (Request to Send) frame. Upon receipt of the RTS by the addressed receiver, the recipient transmits a CTS (Clear to Send) frame.  This handshake mitigates the hidden terminal problem that is prevalent in CSMA networks.  Upon receipt of the CTS frame by the original transmitter, data is sent to the addressed receiver via a designated data channel.  The recipient of the data acknowledges receipt of the data by sending an ACK back to the transmitter.  A node having broadcast information to transmit sends an RTS immediately followed by data.The alternative approach differs from the baseline approach by taking advantage of the exposed terminal properties at the ACN.  Because of terminal exposure, the ACN can transmit traffic immediately following a preceding ACK.  The ACK acts as an RTS, and synchronizes receivers to prepare them for the data to follow.  This not only shortens the handshake turn around time, but also circumvents recontention for the channel by the ACN.  The different handshakes for the baseline and alternative approach are depicted in Fig. 5.1.Fig. 5.1 Handshakes for Baseline and Alternative approaches (R=RTS, C=CTS, D=DATA, A=ACK)6. Unicast RoutingA Path Finding Algorithm was selected for unicast routing for the terrestrial nodes.  This selection was based on our previous work that showed this algorithm performing best of those we tested (ref. 13). The algorithm computed shortest-path loop-free routes. Routes to net destinations were computed upon reception of a routing update or discovery of a change in a neighbor link.  The algorithm picked the routes with the shortest loop-free distances to the destinations.  Distances were computed using the information in the most current updates.  Routes were tested for their loop freedom by checking their node sequence from destination to source using “last-node-to-destination” (predecessor) information.  Routing table information for a destination j consisted of the distance to j, next hop on route to j, and last node on route to j.7. Multicast RoutingIn addition to unicast routing, a multicast routing protocol was required to build a forwarding table for multicast traffic.  The multicast protocol used for this experiment, Global Broadcast Selective Directed Routing (GBSDR), was internally developed by MITRE.  The protocol uses the forwarding information developed by the unicast routing protocol, in this case our Path Finding Algorithm, to forward multicast traffic to their destinations.  The main component of this protocol is the Mapper process.  Multicast information is generated by each multicast application and is sent to the Mapper process.  This process adds a mapper header to the data and forwards it to the Encap to encapsulate the data message in an IP packet.  The mapper header contains the subset of neighbors needed to reach all destinations within the multicast group over the least number of hops.  Next hop information for building the mapper header is obtained from the unicast forwarding table.  After the mapper header is added, the IP packet is sent to lower layers for transmission to neighbors.  The IP header’s destination address is set to the multicast address of the data packet.7.1 Multicast Policy Rules For efficient use of ACN resources, we introduced policy rules that determine whether a packet should be forwarded through the ACN or the ground network.  Implementation of these policy rules varied from sending all data through the ACN to sending all data through the ground network.  This will enable us to determine the optimal policy for efficient use of the exposed terminal’s resources.  The multicast routing policies were developed and implemented for both unicast and multicast data. 7.2  Implemented Rules By varying the maximum group size, unicast source-to-destination distance, and priorities, the following five policies were implemented:Policy 1 (P1):  All traffic is sent terrestrially through the ground network.Policy 2 (P2):  Only broadcast messages (multicast traffic sent to the largest multicast group) is forwarded through the ACN (both high and low priorities).  The rest of the traffic is sent terrestrially.Policy 3 (P3):  All broadcast and medium sized group traffic (both high and low priorities) are sent through the ACN (both high and low priorities).  Small group and unicast traffic is forwarded terrestrially (both high and low priorities).Policy 4 (P4):  All broadcast and multicast traffic (both high and low priorities) are sent through the ACN.  Unicast traffic is forwarded terrestrially (both high and low priorities).Policy 5 (P5):  All broadcast, multicast, and multi-hop unicast traffic (both high and low priorities) are sent through the ACN.  Only unicast traffic that is sent to destinations that are one hop away is forwarded terrestrially (both high and low priorities).8. Applications The simulation was designed to simulate unicast and multicast applications.  Each stream has associated parameters that allow several characteristics to be specified for the stream at the run time.  A total of 8 streams were simulated.  They included two unicast streams and six multicast streams.  All streams had equal intensity (i.e., equal amount of bytes were generated for all the streams at their sources.).  Table 8.1 summarizes the streams that were generated.Table 8.1  Application StreamsStreamTypeAvg PktSize (Bytes)PriorityGrp Size1Uni500High1 (Uni)2Uni50Low 1 (Uni)3Mlti500High5 (small)4Mlti50Low5 (small)5Mlti500High10 (med)6Mlti50Low10 (med)7Mlti500High20 (lrg)8Mlti50Low20 (lrg)9. Results9.1 Channel Access ResultsFigure 9.1 shows a 68 percent increase in throughput in broadcast traffic for the alternative channel access approach versus the baseline approach for the “internet” scenario (only minor performance differences were shown for unicast traffic). The alternative approach took advantage of the broadcast capability of the ACN and the exposure of the ACN terminal to the terrestrial network.  The terrestrial network became aware of the handshakes that were occurring between any single ground node and the exposed node, allowing global “channel access” information to be passed throughout the network.  The alternative approach eliminates the need to re-contend for the channel without sacrificing the information embedded in the normal RTS CTS handshake.  The ACK acts as a broadcast RTS to the terrestrial nodes which have backed off to allow the data transmission from the terrestrial node to the ACN.  Because all net members are synchronized by the previous handshake, broadcast transmissions can occur immediately after the ACK, improving performance statistics.  Delay, as expected, was reduced because of these new efficiencies.   Not shown are the results of the “intranet” scenario which had 60 percent less throughput for both the baseline and alternative approach due to collisions within the terrestrial network.  This supports the argument that dense networks should avoid using the exposed terminal as a resource for sending data.Fig. 9.1 Internet Scenario, Broadcast Traffic, ThroughputFig. 9.2 Internet Scenario, Broadcast Traffic, End to End Delay9.2 Multicast ResultsThe results of average aggregate end-to-end packet delay for dense and sparse network scenarios are shown in Figures 9.1 and 9.2 respectively.  Figure 9.1 shows the results of end-to-end delay for policies P1 through P5 for the US scenario.  The results show that the delay is moderate, from 0.03 to 0.15 ms, for load levels up to 8%.  The delay increases rapidly with loading and for higher policy numbers because of increased network congestion around the exposed terminal.   Also, the US scenario has connectivity that allows a majority of nodes to be reached in one hop from any source.  Sending traffic over the ACN will therefore increase the average path length, the number of transmissions on communication channels, and increase network congestion.  Average end-to-end delays increase as the policy number increases from 1 to 5 (P1 through P5) because a higher numbered policy forces more information to be sent via the ACN than a lower numbered policy.  Transmission via the ACN adds to the path length and subsequently adds to the end-to-end delay. The results of the 20-node RS evaluations for policies P1 through P5 are shown in Fig. 9.2.  It can be seen that channel saturation occurs at a higher loading level in the RS scenario than in the US scenario because of the sparser configuration. Also, delay is larger in the RS scenario because of longer paths from source to destination. Higher numbered policies incur longer delays because many routes to destinations are not available through the terrestrial network.  Those data packets that can reach their destinations through the ground network have a short average path length (close to one) and therefore incur a low delay.Fig. 9.1 US Scenario, Avg. End-to-End Delay for Policies 1-5 EMBED Excel.Sheet.8  Fig. 9.2 RS Scenario, Avg. End-to-End Delay for Policies 1-5 EMBED Excel.Sheet.8  Simulation results not included in this paper show that fraction of successfully received packets for the US and RS is high for loading levels up to 4%.  This fraction decreases rapidly for the US scenario with loading because links get congested quicker due to more connectivity and higher probability of collisions.  The US scenario for all policies shown in Fig. 9.3 has a higher probability of success than the RS scenario.  There are two reasons for this.  First, US has higher connectivity and can therefore route traffic more readily through the terrestrial network if the policy does not allow for use of the ACN.  Second, unicast traffic has higher packet success probability than multicast because DLC implements an ARQ scheme to detect erroneous packets. As a result, there is more probability of packet loss for the multicast traffic when end-to-end paths are longer.Figure 9.3 shows the probability of success for US remains relatively constant and is close to 1.  This however, does not support the contention that the exposed terminal should be used in dense networks.  The probability is close to 1 because of the dense configuration of the network and the allowable channel access retransmissions.  Notice that P1 also has a probability of success close to 1 (P1 sends all traffic terrestrially).  Probability of success in conjunction with delay, provides evidence that dense networks should not use an exposed terminal to route traffic.  It is also shown in Fig. 9.3 that the ACN is beneficial in sparse networks, providing the necessary connectivity to the destination.  The best performance is achieved if policy P3 is employed.Another observation is that communication channels start experiencing saturation at very low rates (slightly above 4% for the US scenario).  This is due to the lack of an efficient channel access protocol for multicast and broadcast traffic.  This simulation used the baseline channel access approach.  Future simulations will use the alternative approach and should see an increase in performance. Fig. 9.3 Fraction of Packets Received for US and RS Scenarios EMBED Excel.Sheet.8  10. Conclusions and Future WorkExposed terminals in ad hoc networks introduce complications that are often overlooked.  It is clear from this report that exposed terminals can cause degradation in network performance if protocols are not developed to react to exposure conditions.  It is also clear that simple changes to existing networking protocols and thoughtful implementation rules can greatly improve network performance.  This report did not attempt to develop a protocol or policy that was most efficient in ad hoc networks where terminal exposure is possible.  Future work includes the development of an algorithm that uses existing routing and network activity information to determine the optimal traffic route for various applications and service requirements under conditions of terminal exposure. 11. AcknowledgmentsWe gratefully acknowledge the contributions of Vicky Yu for generating the laydown and movement scenarios and Mike Snyder for his work on the channel access simulations.12. References[1]	BBN, “System Design Specification for Mobile Multimedia Wireless Network (MMWN)”, Oct. 30, 1996.[2]  Bharghavan, A. Demers, S. Shenker, and L. Zhang, ``MACAW: A Medium Access Protocol for Indoor Wireless LANs.'' ACM SIGCOMM '94[3]	Corson, S., S. Papademetriou, P. Papadopoulos, V. Park, and A. Qayyum, “An Internet MANET Encapsulation Protocol (IMEP) Specification”, Internet Draft, draft-ietf-manet-imep-spec-01.txt, August 1998, Work-in-progress. [4]	Corson, S., and J. Macker, “Mobile Ad hoc Networking (MANET): Routing Protocol Performance Issues and Evaluation Considerations”, RFC 2501, January 1999. [5]  Fullmer, C., Garcia-Luna-Aceves, J.J., “Solutions to Hidden Terminal Problems in Wireless Networks,” Proc. ACM SIGCOMM 97, Cannes, France, September 14-18, 1997[6] Haas, Z., and M. Pearlman, “The Zone Routing Protocol (ZRP) for Ad Hoc Networks”, Internet Draft, draft-ietf-manet-zone-zrp-01.txt, August 1998, Work-in-progress. [7]  Karn, "MACA:  A New Channel Access Method for Packet Radio", Ninth American Radio Relay League Computer Networking Conference, 1990[8]	Malaga, A., “An Empirical Path Loss Model for HF/VHF Propagation in Urban Areas”, Radio Science, May 1981[9]	ModSAF Software Architecture and Overview Document, Loral Advanced Distributed Simulation Technology Program Office, ADST/WDL/TR--95--W003339B, 28 April 1995.[10]	Murthy, S., and J. Garcia-Luna-Aceves, “An Efficient Routing Protocol for Wireless Networks”, ACM/Baltzer Journal on Mobile Networks and Applications, Vol. 1, No 2, 1996.[11]	Park, V., and S. Corson, “A highly adaptive distributed routing algorithm for mobile wireless networks”, Proceedings of Infocomm’97, 1405-1413, April 1997.[12]	Park, V., and S. Corson, “Temporally-Ordered Routing Algorithm (TORA) Version 1 Functional Specification”, Internet Draft, draft-ietf-manet-tora-spec-01.txt, August 1998, Work in progress.[13]	Strater, J, N. Schult, M. Mirhakkak, D. LaRocca, M. Snyder, V. Yu, Evaluation of Network Protocols for Ad Hoc Networks, MITRE Technical Report, MTR 98W0000152, September 1998. [14] Young D., “USAP: A Unifying Dynamic Distributed Multichannel TDMA Slot Assignment Protocol,” Rockwell International, IEEE, 1990Author BiographiesDOMINIC LAROCCA is a lead communications engineer at the MITRE Corporation in Livonia MI.  He received his bachelors degree in Physics at the University of Michigan in Ann Arbor and his Masters of Science in Electrical Engineering at George Mason University in Fairfax Virginia.  He is presently working on research in mobile ad hoc communications.MOHAMMAD MIRHAKKAK is a lead communications engineer at the MITRE Corporation in Reston Virginia.  He received his Ph.D. in Computer Science at George Washington University in Washington DC.  He is presently working on research in mobile communications as it relates to Quality of Service.UnicastMapperEncapRoutingIPData LinkChannel AccessMulticastRCDARCDANode A to ACNACN to Node BBaselineUnicast PktRCDARDBcast/Mcast PktRCDADAlternativeAny PktBaseline EMBED Excel.Sheet.8   EMBED Excel.Sheet.8  