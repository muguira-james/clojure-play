Simulation Over Geographic Information System (SOGIS) Web ServiceDavid L. PayneDr. Kenneth C. HoffmanRichard D. Flournoy Christopher D. KnoussKeith W. MillerDr. Kangmin ZhengThe MITRE Corporation 7515 Colshire DriveMcLean, Virginia, 22102-7508Contact for this paper: David Payne703-883-6366 HYPERLINK "mailto:dpayne@mitre.org" dpayne@mitre.orgKeywords:Simulation, GIS, Web Services, Multi-Agency Planning, Executable Architecture, Metadata, RDF, SimServer, JAVA Servlet, Java Server, ArcWeb Services, DHTMLABSTRACT: To support the planning needs of government agency coalitions, encompassing Federal, State, local, and commercial entities, the Multi-Agency Planning (MAP) MITRE Sponsored Research (MSR) team is integrating a group of technologies for planning and analysis into a seamless Web service portal.  Our approach includes integration of a GIS Web service as a display interface for simulation results and a synchronized display of operational status report information. We integrate a GIS Web service display into our Multi-Agency Planning exercise control Web portal. We use this approach to feed custom GIS display layers to the GIS display from our SOGIS server, which builds the custom GIS layers containing the simulation icons.  The SOGIS server in turn gets updated location and status information about the simulated entities with data from a metadata repository, which in turn is updated by a stream of simulation results provided by a SimServer server, a Web service developed in another MITRE research effort. We hope to further evolve this capability in future research to support simulation interaction and composition via the GIS interface, and eventually to provide a simple simulation engine as a web service.1. IntroductionBuilding on over two years of success in adapting geographic information system (GIS), simulation, and Web service technologies to support the planning needs of government agency coalitions, the Multi-Agency Planning (MAP) MITRE Sponsored Research (MSR) team is working to integrate these technologies into a seamless Web service portal. A major goal of this effort is to tie our simulation tools described in previous SIW papers [1, 2] in with the other tools we have built or proposed for the Multi-Agency Planning (MAP) Workbench.1.1 MAP MSRThe MAP MSR is investigating ways to improve multi-agency planning and specifically multi-agency technology planning. Our team has focused on one guiding mission scenario for each of the first two years of this project as a means to think through the multi-agency planning problem, propose and test processes and technologies to improve multi-agency planning, and identify technologies and constructs to support these proposed approaches to multi-agency planning. The first year (FY03) scenario looked at the interplay of commerce, customs enforcement, port security and counter terrorism in the shipping industry [1]. The second year (FY04) focused on the multi-agency complexities of a mass migration reaction scenario, based on an actual Operation Plan called Vigilant Sentry. It included immigration, maritime security, foreign policy, domestic policy, law enforcement, counter terrorism, and humanitarian relief issues, in the context of an overarching multi-agency operational mission [2]. The FY05 effort focuses on integrating the tools, techniques, and processes developed over the three project years into a comprehensive approach to multi-agency planning (the “Grand Unified Theory” of MAP) and on the technical integration of the Web tools into a usable suite for future multi-agency planners..Results to date include a new multi-agency planning readiness model, based on the LISI approach, an appreciation for the value of multi-agency planning exercises as a means to work through issues and identify needs, and a realization that existing information architecture frameworks need to be significantly extended to meet the needs of complicated multi-agency consortiums. This paper focuses on a key product of our technology development thrust, the integration of our simulation tools with our multi-agency planning Web portal.Over the past three years we have evolved a Web based environment that we call the MAP Workbench to support the proposed planning exercises and subsequent coordination and architecture development activities. We have also developed several small but comprehensive simulation federations to support exercises and provide an executable architecture environment. We are now linking the simulation environments with the rest of the Workbench, to provide a convenient and accessible Web based multi-agency planning environment to the large and distributed communities associated with most multi-agency planning problems.1.2 The SOGIS ConceptSimulations of real world operations involve detailed depiction of, and interaction with, map and terrain data. Our experience with a typical military simulation, US Army Joint Military Art of Command Environment (JMACE), involved a considerable amount of scenario set up time devoted to finding suitable maps, bringing them into the JMACE environment, and overlaying specific entity tracks, all to lay the groundwork for the interplay between entities and the organizations that controlled the entities. We are also aware that GIS has grown into a significant community of interest, providing very capable Web based products, that largely do the same thing and more that we needed to do with a map backdrop for our scenario runs. The idea struck us that Web based simulation would be more convenient and powerful if we could leverage the mapping, spatial, and other environmental information provided by GIS to provide the setting for simulated operations. We could then focus our simulation efforts on realistic simulation of the movement and other status changes of the simulated entities in our scenarios. Conceptually this should be rather simple and straightforward, since GIS systems provide for easy extension through additional transparent overlay layers. So, we concluded, all we need to do is to find a way to tell a GIS that entities, as specified icons, should be displayed at specific locations at specific times, and then update those locations to achieve an animated effect. Research shows that we are not the first to have this idea. For example, a 1991 Winter Simulation Conference paper describes a pre-Web standalone approach linking simulation servers with GIS servers [3]. However, we could not find any later reference to what became of this work. A recent survey of simulation used with GIS also reports that discrete event simulation leveraging GIS as a user interface is an area for development. It does however report that GIS is now widely used as an interface or a simulation environment for continuous and agent based simulations. Currently GIS based simulation seems limited chiefly to environmental, demographic, or hydrographical simulations [4]. 2. Technical ApproachOur approach is to use a Web portal as a display interface for both simulation results and operator status report information. We use a metadata server to harmonize all information references sent to the various panes in our MAP portal. We integrate a GIS Web service display into this control panel, and feed custom GIS display layers with data from the metadata repository, which in turn is frequently updated by either simulation results or, potentially, field status reports. The field status reports would come from participants logged into a Web reporting service, and we anticipate the use of real-time sensor, global positioning system (GPS), and/or transponder based status data streams as automated sources of updates.We use existing simulations to produce an event and movement log that we deliver over the Internet as a data stream, using another MITRE-developed technology called SimServer. The MAP Workbench Metadata Server receives this stream and uses the metadata knowledge to transform the data stream to conform to a common taxonomy for the multi-agency consortium. We then make this modified data stream available through the Web to the SOGIS clients. The end result is a dynamic GIS display layer that overlays the simulated entities over a map at the correct geographic location.  This provides a readily accessible one-to-many display or viewing capability requiring only standard, preferably broadband, Web access at the client sites. Figure 1, below shows our logical architecture we are using to guide SOGIS prototype development. EMBED PowerPoint.Slide.8  Figure 1. SOGIS Logical Architecture2.1 Simulation Site OperationsFor convenience we currently use the same simulations and federations we developed for the Executable Architecture Methodology for Analysis (EAMA) Case Study (EAMA-CS) [1]. An extension to the JMACE we made for the EAMA-Lite federation (JMACE plus ReThink) provides a data log file output option. This file is in effect a log of entity movement and events, shadowing the events sent out over HLA in the EAMA or EAMA-Lite federations. We were able to replay a JMACE run over SOGIS by using the old log files as input files for SimServer, and then using our SOGIS architecture to route the data stream from SimServer, through the MAP Metadata Server, to our SOGIS server. The SOGIS server integrates the normalized entity references with their simulated locations and then with the GIS map displays obtained from GIS map services via the Web. Figure 2, below, shows a typical JMACE scenario that produced a data log for use with SimServer. SHAPE  \* MERGEFORMAT Figure 2: JMACE User Interface2.2 SimServerMITRE’s simulation data stream service, SimServer, provides the simulation data stream to the MAP Metadata Server. SimServer borrows techniques and technologies from the Web Services world to offer 24/7 online access to simulated data streams for MITRE Corporation projects, such as the SOGIS component of the MAP Workbench. Data “consumers” go to a SimServer Web Site to plan, configure, execute, and monitor their data streams. Users can also visit SimServer to browse available simulation services and reuse or modify them, potentially foregoing the need to develop, configure, or run simulation resources from scratch. This online approach to generating data streams allows projects access to the data streams they need at a fraction of the cost and time of traditional methods. This is also very attractive for supporting the sorts of multi-agency planning exercises envisioned by MAP, in that one or a few simulation sites can address the needs of a large distributed user population, while the users can access and replay simulation results at their convenience. We envision that this will nicely fit the typical usage pattern of running a specific scenario or use case simulation, letting the multi-agency planning teams observe and analyze the run and the results, and then letting the teams determine adjustments to investigate for the next run. SimServer on the sending side and SOGIS client displays on the receiving side provide an attractive architecture for this pattern of use.SimServer operations are based on the premise that data streams can be produced by “configurations” of composable software components. The user builds his configuration by selecting from a variety of available data sources, transformers, and emitters. First, he chooses a data source that offers a scenario that fits the contextual needs of his experiment. Then he selects and edits the parameters of the transformers (i.e. interpolators, geographic filters, and formatters) he needs to manipulate the data. Finally, the user adds one or more emitters that direct the transformed data over the network to his receiving applications.  Once a configuration is defined, it can be launched and the status of the resulting data stream can be monitored from the SimServer site. SimServer allows a user to pause, resume, and delete (terminate) any of his active data streams and to change the playback pace if desired. [See also: 5]2.3 The MAP Metadata ServerA critical issue for multi-agency collaboration is a common ontology for operations, information needs, and products. We meet this need in the MAP Workbench with a semantic management service, that we call the MAP Metadata Server. The use of the semantic technology offers us a flexible integration environment for precise, fast knowledge generation, navigation, and retrieval through the shared metadata and machine-processable semantic data.We base our semantic management on the W3C Resource Description Framework (RDF), described as “a language for representing information about resources in the World Wide Web” [6] [7]. We extend this concept to describe resources both on the Web and in the real world, specifically in the subset of resources available to or of interest to a multi-agency consortium. In this research, we use Sesame [8], a Java-based storage and querying middleware system for managing RDF and RDF Schema (RDF(S)) data. Sesame is developed by Aidministrator in the Netherlands. It contains a Java API for RDF(S) manipulations on repositories, an RDF Model Theory inference engine, and support for the RDF query languages. It is available as open source under the LGPL license.We use the MAP Metadata Server as both a repository of semantic knowledge normalized to a specific multi-agency collaboration and as a tool suite to translate what we could call “native” information references to the correct corresponding multi-agency normalized term or data type. In practice, this simply means that a “police vehicle”, “patrol car”, or “cruiser” in an agencies status report or entity initialization (say for a simulation or a transponder data stream) will consistently be recorded in the MAP Workbench name space as perhaps a “Vehicle, ground, sedan, police, …)” or some other common and unambiguous reference. Then we can associate other status data, such as time correlated location or readiness or activity, with that specific entity as the planning exercise unfolds.In the specific case of the SimServer simulation data feeds, we use the MAP Metadata Server to translate what ever a specific simulation syntax provides as entity identity, locations and status information into the multi-agency consortium’s common agreed syntax. This way we adapt the simulation output to the needs of specific multi-agency consortium, rather than require a number of existing simulations to rename, and in some cases reformat or even recalculate, the normal output of each simulation. This same approach will also support incorporating real time position and status data streams from actual vehicle or other systems transponders, as well as accept manual status update streams, all without the need to change the normal output content or format of the transponders or report formats.  2.4 The SOGIS ServerThe SOGIS server fuses the simulation data feed from the MAP Metadata Server or potentially directly from SimServer, with geospatial, cultural, and other GIS information layers (e.g. weather, boundaries, census data, etc.) from a GIS data source. The SOGIS server is developed as a J2EE Web application. The application employs JAVA servlet and Java Server Pages (JSPs) on the server side with DHTML and javascript on the browser [9]. We currently use ESRI ArcWeb services [10] for general map and other GIS data, but a privately hosted service could also be implemented. The SOGIS Server also selects appropriate icons to use to display the simulated entities on the GIS display, based on the metadata adjudication of entity name or ID to the defined set of icons. If display of simulation data updates is the only goal of a SOGIS implementation then the SOGIS server can use some simpler internal scheme to assign icons to types of simulation entities. This will still provide end users dynamic simulated entity location updates over a map, but without any normalization of types or syntax. That is, SOGIS will simply display whatever the simulation feeding SimServer provides for entity identification, and icon selection becomes a simple lookup based on that entity identification. For most multi-agency applications, however, we think that some metadata server capability is needed to transform data from several simulations or agency data feeds into some agreed common taxonomy. The MAP Metadata Server may also need to adjudicate multiple references to an individual entity to provide one “ground truth” for the GIS clients. Figure 3, below, shows the SimServer, Metadata Server, and SOGIS server architecture. Figure 4 shows how SimServer and the SOGIS Server can be used without a metadata server. EMBED PowerPoint.Slide.8  Figure 3: SOGIS with Metadata Server2.5 Client Access Via the SOGIS URIThe J2EE/JSP implementation of the SOGIS Server allows the clients to be any later generation Web browser. The user simply points the browser at the desired SOGIS Server URI, initiating a dedicated session to that user and beginning the dynamic data feed. Visualization of the dynamic feed is optimized by exclusively updating either the active data or map extent without refreshing the entire browser, thereby permitting rapid data updates. This is accomplished by dividing the web application into specific tasks dedicated to presentation, function execution, and data refresh. Note that the user could have a choice of SOGIS Server URIs, effectively allowing access to several different simulation “channels”. This meets our multi-agency support goal of widespread access to planning tools using commonly available technology. Security and access controls could be applied to the SOGIS server sites to limit access to certain approved users (for example, only those federal, state, and local law enforcement agencies involved in a specific multi-agency operation). SOGIS can also be hosted on VPN or independent networks, as long as the network is Internet Protocol based. EMBED PowerPoint.Slide.8  Figure 4: SOGIS without Metadata Server 2.6 SOGIS as Part of the MAP WorkbenchIn addition to stand alone sites for viewing simulations over GIS displays, we also intend to integrate the SOGIS display as a window in our Multi-Agency Planning Workbench. This will achieve our vision for linking simulation based executable architectures with other tools in an integrated multi-agency planning environment. Figure 5 shows our current MAP Workbench prototype user site. SOGIS will replace the static simulation snapshot that is currently in the upper right pane. SHAPE  \* MERGEFORMAT Figure 5: Enhanced MAP Workbench Site2.7 Potential Applications for SOGISWe see our MAP workbench supporting multi-agency planning exercises, which would serve as vehicles for moving multi-agency consortiums up the Multi-Agency Readiness Model ladder to greater interoperability on critical joint operations. This workbench and the exercises themselves would contribute to development of multi-agency C4ISR, IT, or enterprise architectures that would guide each agency’s own enterprise architecture to include provisions for multi-agency participation. Other uses for SOGIS include distribution of a simulation or federation display to a large number of observer sites over the Web. This could in turn support collaboration among the groups, increase mutual understanding, or support discussion of the simulated operations. Using some variant of SOGIS to link simulations into Web based command and control (C2) systems may also prove useful. 3. ConclusionWe are culminating our three year Multi-Agency Planning Workbench research with the integration of executable architecture and other simulations directly into the MAP Workbench Web portal. We are using an approach we call SOGIS—Simulation Over GIS, to accomplish this by leveraging the power of GIS Web services to provide the client display at any number of distributed user sites. We are using our executable architecture federations, other simulations, and a metadata server developed in previous years’ research to feed dynamic entity location and status updates to the clients, leveraging COTS or other externally hosted services for map data access. The result is a prototype full service workbench to support multi-agency planning exercises aimed at moving multi-agency consortiums to a higher level of interoperability, based on our Multi-Agency Planning Readiness Model. 4. References[1] Payne, Hoffman, and Zheng: “Using Interoperable Process Models in a Multi-Agency Planning Toolkit for Enterprise and C4ISR Architecture Analysis” (03F-SIW-014), Fall 2003 Simulation Interoperability Workshop (SIW), September 2003, Orlando, FL. HYPERLINK "http://www.sisostds.org"http://www.sisostds.org . [2] Hoffman, et al: “EAMA Case Study: Federating COTS Based Simulations to Support Multi-Agency Planning” (04F-SIW-081), Fall 2004 Simulation Interoperability Workshop (SIW), September 2004, Orlando, FL. HYPERLINK "http://www.sisostds.org"http://www.sisostds.org .[3] Lieberman, Edward: “Integrating Simulation GIS, and Animation”,  Proceedings of the 1991 Winter Simulation Conference, Phoenix, AZ, 1991. Link available at:  HYPERLINK "http://portal.acm.org/citation.cfm?id=304348&dl=ACM&coll=portal" http://portal.acm.org/citation.cfm?id=304348&dl=ACM&coll=portal [4] Butler, Chris: “Modeling in GIS”, Sewanee: The University of the South. 2004. Unpublished PowerPoint presentation previously posted at the Sewanee: The University of the South Biology Department web site.  HYPERLINK "http://www.sewanee.edu/" http://www.sewanee.edu/ [5] Flournoy, Mikula, Seidel, and Weatherly: “SimServer: Simulated Data Streams on Demand via the Web” (05S-SIW-138), draft paper submitted for Spring 2005 Simulation Interoperability Workshop (SIW), San Diego, CA. HYPERLINK "http://www.sisostds.org"http://www.sisostds.org . [6] WC3: “Resource Description Framework (RDF)”, October 21, 2004.   HYPERLINK "http://www.w3.org/RDF/" http://www.w3.org/RDF/ .[7] WC3: RDF Primer. February 2004.   HYPERLINK "http://www.w3.org/TR/rdf-primer/" http://www.w3.org/TR/rdf-primer/ [8] Broekstra, Kampman, and van Harmelen: “Sesame: A Generic Architecture for Storing and Querying RDF and RDF Schema”.  HYPERLINK "http://www.openrdf.org/doc/papers/Sesame-ISWC2002.pdf" http://www.openrdf.org/doc/papers/Sesame-ISWC2002.pdf [9] Sun Microsystems, Inc.: “JavaServer Pages™ Technology - White Paper”, c. 2004.  HYPERLINK "http://java.sun.com/products/jsp/whitepaper.html" http://java.sun.com/products/jsp/whitepaper.html [10] ESRI: “An Overview of ArcWeb® Services”, ESRI White Paper, July 2004.  HYPERLINK "http://www.esri.com/library/whitepapers/pdfs/arcweb-services.pdf" http://www.esri.com/library/whitepapers/pdfs/arcweb-services.pdf . ©2005 The MITRE Corporation. All rights reserved.  Approved for Public Release; Distribution Unlimited, PR Case # 05-0254.