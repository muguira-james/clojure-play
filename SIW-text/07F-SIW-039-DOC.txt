Wireless Network Simulation for Army UAVsJohn A. Hamilton Jr.Daniel BoxComputer Science & Software EngineeringAuburn UniversityAuburn, AL 36849hamilton@eng.auburn.edu, boxjame@auburn.eduMajor Stephen S. HamiltonElectrical Engineering & Computer ScienceUnited States Military AcademyWest Point, NY 10996stephen.hamilton@us.army.milKeywords:UAV, simulation, model, wirelessABSTRACT: Auburn University, through the Army's Aviation and Missile Research, Development and Engineering Center (AMRDEC) has been supporting the Unmanned Systems Initiative program. The research program at Auburn is focused on designing new wireless systems to support UAV air and ground communications. Network simulation has been a key component of our research program. Specifically we have been working in three areas:- Use of commercial wireless technologies to provide secure, realtime video communication between UAV ground elements.- Assessment and evaluation of appropriate wireless security measures.- Development of a high fidelity modeling and simulation testbed to support the USI program.This paper will address the verification and validation of the simulation test bed. Comparisons of predicted simulation results against actual field testing will be discussed. Most importantly, we will address the challenges associated with high fidelity network simulation of NSA Type 1 crypto, video traffic and emerging COTS wireless protocols.I. IntroductionAs noted by Senator Richard Shelby (R-AL) [1], “The Unmanned Systems Initiative (USI) will conduct research and development of unmanned systems to advance, evaluate, and rapidly mature technologies to meet urgent warfighter needs as well as the optimal tactics, techniques and procedures to employ unmanned systems capabilities. Unmanned systems have immense potential to reduce engagement timelines while improving survivability in difficult urban terrain. Acceleration of the transition and fielding of these robotic technologies and capabilities is a critical wartime effort.”Auburn University, through the Army’s Aviation and Missile Research, Development and Engineering Center (AMRDEC) has been supporting the USI program in three research areas related to unmanned aerial vehicle (UAV) ground control:Use of commercial wireless technologies to provide secure, realtime video communication between UAV ground and air elements.Assessment and evaluation of appropriate wireless security measures.Development of a high fidelity modeling and simulation testbed to support the USI program.  Auburn is well qualified to undertake this research.  Auburn’s wireless engineering program was the first in the United States to be accredited by ABET – the Accreditation Board for Engineering and Technology.  Auburn has been twice designated as and is currently a National Center of Academic Excellence in Information Assurance Education by the National Security Agency and the Department of Homeland Security.  Finally Auburn University has been elected part of the international McLeod Institute for Simulation Science based upon the peer evaluation of twenty-seven universities from Europe, Asia, North America and South America.  In this article, in keeping with the theme of an activity report of the Auburn University branch of the McLeod Institute of Simulation Sciences (MISS), we will focus on the modeling and simulation aspects of this project. In the system we are simulating, each UAV sends streaming video to a receiving terminal on the ground.  This remote video terminal, or RVT, is equipped with several antennas to enable it to receive different transmission frequencies.    A UAV can transmit to more than one terminal at the same time, and a terminal can receive from more than one UAV.  We currently do not have the equipment necessary to field test an air-to-ground video transmission.  Therefore, to gather statistics about the stream, we set up a video transmission between two wireless ground nodes.  For this test, the US Army provided us with a device that outputs the same video stream that would be transmitted by a UAV in the air.   After extensive testing, we decided to use the setup in Figure 2 as the basis for our further information assurance research and modeling & simulation testbed.  In this implementation, the UAV video transmission is sent into a computer that makes the necessary video conversions, then sends all information through an encryption device, the Cisco ASA 5510.  This feeds into a Cisco 1240 802.11a and 802.11g (AG) access point (AP), which is used as a wireless bridge with another Cisco 1240 on the other side of the wireless connection.  Then the messages are decrypted by another ASA 5510, and sent to the destination computer, which displays the video feed.These tests allowed us to gather several important properties of the transmission such as the bandwidth and delay.  However, we needed to do further field testing in order to find out how our system would react to changes in distance and terrain.  The video transmission device provided by the US Army was not mobile, so the addition of a $9.99 Pac-Man game from Wal-Mart provided a handy means of sending continuous video from one station to the other – dropped video packets were readily visible when the range and/or interference between stations became too great.  Figure 1.  Auburn UAV research team with UAV from the 101st Airborne Division at Redstone Arsenal.  From left to right:  Alan Hunt, Kevin Richardson, Shawn Constance, Daniel Box, Drew Hamilton, David Umphress and David Last. Photo courtesy of Richard Chapman, principal investigator.Initially the team operated on the assumption that graduate students had no “operating tempo” limitations, but it soon became clear that some of the prospective solutions needed to be pruned due to the time requirements of field-testing. The field test results provided the initial data with which to calibrate a network simulation test bed.   So our first use of modeling and simulation was to eliminate some potential solutions before field-testing. This is, of course, completely consistent with the concept of Simulation-Based Acquisition [2].The initial simulation prototype was developed in OPNET as part of a class exercise.  Due to restrictions of the OPNET academic license as well as limited access to model source code, development work is being done in both QUALNET and NS-2.  The OPNET simulation represented the field-tested network with communication between two ground nodes, but the new simulations will use data from the field tests as the basis for an air-to-ground simulation model.Figure 2.  Typical field-test topology – senders and receivers were tested using different routers, antennas and software. A preliminary simulation has been run with our data in our OPNET simulation prototype and we are now implementing this traffic model in QUALNET and NS-2.  Current challenges that we are working on are implementing good terrain models and correctly modeling NSA Type I encryption.  Figure 3.  Anthony Friday field testing an antenna type.Verified and validated high fidelity modeling and simulation has a critical role to play in all aspects of the system lifecycle.  We are using modeling and simulation to support system design, analysis of alternatives and initial testing.  We do not claim that modeling and simulation can ever replace operational testing.  However, when a simulation is calibrated with and validated against actual test results, the consequent development of a high fidelity test bed can greatly increase the number of test runs that can be evaluated. The reason for setting up this simulation testbed is to empirically validate the simulations against historical data. The operation of the model is considered to be a filter or a function that maps its inputs to outputs.  The performance of the model will be compared to our expectation (if the system to be modeled does not exist) or to historical data to determine the model’s predictive power.  Where historical data exist, we generally infer the adequacy of the model whenever the observed residual values are uncorrelated.  If a correlation is observed, this suggests the existence of some additional variable(s) that must be included in the model to make it complete [3]. II. ImplementationIn the wireless implementation, messages are sent from the UAV antenna into the RVT, which will make the necessary video conversions and display it on the screen in real time.  This transmission will be encrypted, although we do not yet know what encryption algorithm the government will require the Army to use.  This system may be used over distances as large as several kilometers, and in mountainous terrain.  Since the UAV may transmit to many RVTs at once, several are included in the simulation.The simulation is created using the actual IPs of the interfaces, and static routes are used to make the traffic flow properly between the stations over the wireless link. The wireless connection will use IPSec with DES-CBC encryption in order to simulate the security protocol.  The UAV encrypts the traffic, which is then sent over the wireless link between the UAV and RVTs.  Each RVT decrypts the signal and transmits it to a video terminal.  A screenshot of the current Qualnet implementation is shown in Figure 4.  The UAV on top sends traffic to each RVT at a constant bit rate.Figure 4.  Qualnet simulation: A UAV sends a video stream to four stations on the ground. AntennaThe Qualnet implementation for the antenna will use the specifications for the Shadow 200 and RVT provided by the US Army.  Parameters such as transmission power, sensitivity, and antenna gain are readily available and can be incorporated into the simulation.  Since the network covers such a large area, a UAV may move out of the range of one ground terminal and into the range of another.  For this reason, we must consider the implications of handoff between two base stations.  This should happen automatically when the UAV moves out of range of a station, but, if necessary, a node can be programmed to fail at a certain time to force the handoff.Traffic ModelingIn our initial field tests, we used Wireshark (formerly Ethereal) to capture the traffic generated by the sender workstation, and saved the summary statistics for this capture.  Once the traffic flow is created in Qualnet based on these statistics, it is replayed when a simulation is run, and statistics can be gathered to verify that messages are being sent or dropped in a realistic way. The packets sent over the network were a mixture of UDP and TCP packets, and the traffic between the ASA security devices used the ESP security protocol.  The IPSec implementation in Qualnet uses the same protocol, so the effect on the system should be similar.Currently, the links between the UAV and all RVTs are direct links.  Once the testing on this setup is completed, we will implement a multicast routing scenario, where the UAV transmits multicast packets to all RVTs currently in range.  This could provide faster, more efficient transmissions.Terrain ModelingTerrain modeling in Qualnet is very helpful in simulating a wireless network.  In a wireless environment, signal strength, signal to noise ratio, and packet loss all are affected by variations in the environment, to include variations in terrain.  Terrain has a large impact when it is not flat.  For example, when a sending station is on a hilltop and a receiving station is on a hilltop, there are fewer obstructions, and, therefore, the signal is better.  On the other hand, when the two stations are level, but a hilltop exists between the two, signal loss is high.  In order to increase the realism of a wireless simulation, Qualnet allows for terrain data to be entered into the simulation.  The format we chose for this data was DTED (Digital Terrain Elevation Data).  The reason for this choice is the wide availability of DTED data.  The primary source of DTED data is the National Geospatial Intelligence Agency at http://geoengine.nga.mil/.  This website allows the selection of an area of the globe, and renders the DTED files, which we then import into Qualnet.  Although terrain data appears to import into the simulation well, we must note that this terrain data is purely based on ground level, and not actual elevation and obstacles on the ground.  For example, an area may be very flat, but contain multiple high-rise buildings, and buildings are not included in the DTED data.  In order to help alleviate this effect, we have conducted tests in areas where buildings exist, and introduced a signal-to-noise ratio sampled on the ground to approximate the losses due to buildings.  Qualnet also has the ability to simulate adverse weather, which should provide an added degree of realism.III. Data CollectionTraffic CaptureIn order to accurately compare a simulation to a real world experiment, it is important to ensure the data collection of the real world experiment is performed correctly.  To collect data without changing the performance of the system, we chose a passive network monitor.  Wireshark, the network monitor, switches a network interface card into promiscuous mode in order to capture all packets the device receives.  There are four places that we plan to use the network sniffer: at the sender before transmission, between the encryption device and the Cisco 1240 (AG) access point on the sender side, between the access point and encryption device on the receiver side, and at the receiver just before the end of the link.  We used a hub, or multi-port repeater, instead of a switch, so that our sniffer would receive the same traffic stream as the receiver.  The sender and sniffer will share medium through a hub, and the same at the receiver.This is the simplest means of ensuring all data physically transmitted on the wire will go through the packet sniffer.  These points of monitoring allow an accurate depiction of what traffic was originally sent, and what traffic made it to the destination.  The purpose of the wireless sniffers at the points of transmission and reception are to view the traffic actually on the air.  This data will be used to detect loss and delay caused by the access point.  Putting sniffers between the encryption devices also provides a measurement of the changes in throughput and delay caused by encryption.  Based on recent experiments, it appears that encryption will cause minimal increase in traffic size and approximately 4 milliseconds of delay. The data collected will be in raw packet trace form so that it can be aggregated in different ways after it is captured.  For example, the actual data sent and received can be summed up and put into a traffic flow file for OPNET.  Alternatively, general statistics for the link can be calculated and used to build a traffic model in Qualnet.  This will help keep the simulation statistics similar to the experiment assuming the simulation is built correctly.  It will also give us the flexibility to generate new aggregates of data without having to recapture data on a new experiment. In addition, we plan to capture the latency using Smokeping.  This utility allows us to capture latency and packet loss over time using Internet Control Message Packets (ICMP) Ping packets.  It creates a graph depicting loss and latency that will be compared to the results from the simulation.Interference MeasurementIn addition to the traffic gathering, some other statistics will be captured that will help enable us to model the experiment correctly.  We use Simple Network Management Protocol (SNMP) to gather wireless statistics from the Cisco Aironet.  The program we will use is Multi Router Traffic Grapher (MRTG), with the Round Robin Database backend.   Although this program is typically used to monitor traffic, we will use it in this case to monitor the signal strength and signal to noise ratio over time.  The MRTG program is able to gather information for any management interface base (MIB), and the family of MIBs we chose for this is from the CISCO-DOT11-ASSOCIATION-MIB family.  In this family of MIBs, statistics for the signal are stored, and that is what we plan to query during the experiment, particularly the signal strength and signal to noise ratios [4].  Since these MIBs gather the SNR statistics directly from the access point, these will be the most accurate numbers to use in verifying the Qualnet simulation.Antenna ConfigurationThe antenna configuration will not vary much from the manufacturers’ specifications outside of manipulating the filtering in order to achieve the best model possible.  Data collection at the antenna will entail using the Wireshark software package in order to capture the data rate and packet loss information necessary to configure the antenna properly.  Signal power will also be measured in order to determine how far apart the sender/receiver actually must be in order to have a “clean” connection.  This data will then be compared to the results of actual data collected previously.Packet loss is a primary consideration for the simulation, especially since the majority of traffic is UDP.  UDP traffic can be unreliable because UDP does not use acknowledgments to guarantee packet receipt.  The packet loss statistic will justify whether the antenna is configured properly given various lengths of packets being sent over the air.IV. Potential ProblemsEncryptionEncryption presents an added layer of complexity to the simulation.  The primary parameters that are affected when encryption is added are delay and bandwidth.  Delay is introduced by the process time an encryption device takes in order to produce the encrypted packets or frames.  The increased bandwidth occurs when an encryption algorithm has a larger encrypted output than the original plain text input. There are two types of encryption widely used within the government, Type I and Type II.  Type I cryptography is an algorithm or device approved by the National Security Agency for protecting classified information, while Type II cryptography is only approved to protect sensitive but unclassified information [5].  The initial testing is performed with the Cisco Adaptive Security Appliance 5510 series, which provides AES encryption up to 256 bits.   This type of encryption is approved by the NSA as Type I, however the Cisco ASA device itself is not yet certified to operate at this level [6][7].  The simulation will use IPSec with the ESP security protocol in order to provide a similar effect.  Delay caused by encryption can be set manually to represent the effect of data flow through the chosen encryption device.  The delay and throughput will be used to create the model that adds the encryption layer.  Based on the type of data acquired by the UAV, the final system will most likely be employed with a Type I encryption device, and thus is one of the aspects of the model.In order to verify the encryption model is built correctly within the simulation, the delay will have to be calculated and compared to the delay of the real system.  In addition, the encrypted output will have to be compared with regard to the size.  It is not important to encrypt the actual data in the simulation, but it is important to accurately represent the delays imposed by implemented encryption. NSA-certified, operational Type I encryption devices are not available for use on the Auburn campus.  This will not present a problem as long as the actual delay and bandwidth parameters can be correctly specified or measured for the Type I device. Path LossPath loss could be a problem in the simulation because it is hard to simulate the different types that can occur.  Reflection, diffraction and deflection can be hard to simulate, but Qualnet does the necessary calculations to represent these effects.  Since the network may span a distance of several kilometers, curvature of the earth is also an important factor in path loss.  High-frequency transmissions are often diffracted by the curve of the earth’s surface when traveling long distances.  Qualnet takes this into account when a non-line-of-sight protocol is used.V. Preliminary Simulation ResultsThe traffic flows used in our OPNET simulation were captured from the actual UAV video transmission equipment during a test run.  The duration of each simulation was 12 minutes long, and the endpoints were placed 100 meters apart.  An 802.11b experiment was run to show that the actual bandwidth of 11b wireless devices is not high enough to reliably handle normal UAV traffic, and an 802.11g experiment was run to show that the higher bandwidth of the 11g protocol provides a reliable link. For encryption in our preliminary simulation, we were able to encrypt packets between the two wireless routers so that ESP packets would be sent over the wireless network as they are in the actual system.  However, the highest level of encryption currently available in OPNET is 3DES.  The actual system will likely use a higher level of encryption, so this is only a partial representation of the delay.VII. ConclusionUsing the wireless models available in Qualnet, we will be able to simulate transmission of UAV data over a wireless network.  We are now reimplementing this model in both Qualnet and NS-2.  Once these simulations are complete and verified, they can be used to test setups that would be hard to test in the real world.  Also, equipment can be tested in the simulation before it is actually bought to help determine if the purchase is worthwhile.  The UAV simulations will help to further our goal of making UAV video transmission more reliable.It is our intent to demonstrate our work at the 2007 Huntsville Simulation Conference to be held 30 Oct – 1 Nov in Huntsville, Alabama, USA. Reference List[1]	Shelby, Senator Richard C.  “Press Release: Shelby Announces Defense Funding for North Alabama,” 7 Oct 2005,  HYPERLINK "http://shelby.senate.gov/news/record.cfm?id=247067" http://shelby.senate.gov/news/record.cfm?id=247067 accessed 20 June 2007.[2] 	Page, Ernest H. and Lunceford, Wendell H., “Simulation-based acquisition: architectural principles for the U.S. Army's simulation and modeling for acquisition, requirements and training (SMART) initiative,” Proceedings of the 33nd conference on Winter Simulation, ACM, New York, pages 767 – 770, 2001.[3]	Hamilton, J.A., Jr., Nash D.A. and Pooch, U.W., Distributed Simulation, CRC Press, Boca Raton, Fla., page 116, 1997.[4]	Oetiker, Toby.  “Tobi Oetiker's MRTG - The Multi Router Traffic Grapher”.  December 6, 2006.   HYPERLINK "http://oss.oetiker.ch/mrtg" http://oss.oetiker.ch/mrtg.[5] 	National Institute of Standards and Technology.  “FIPS 185 – Escrowed Encryption Standard”.  Federal Information Processing Standards Publication, February 9, 1994. [6]	National Security Agency.  “Fact Sheet NSA Suite B Cryptography.” www.nsa.gov/ia/industry/crypto_suite_b.cfm.[7]	National Security Agency.  “Products and Protection Profiles in Evaluation”.  http://niap.bahialab.com/cc-scheme/in_evaluation.cfm.Author BiographiesJohn A. "Drew" Hamilton Jr., Ph.D., is an associate professor of computer science and software engineering at Auburn University and director of Auburn University's Information Assurance Laboratory.  Prior to his retirement from the U.S. Army, he served as the first director of the Joint Forces Program Office, on the electrical engineering and computer science faculty of the U.S. Military Academy, as well as chief of the Ada Joint Program Office.  He has a B.A. in journalism from Texas Tech University, an M.S. in systems management from the University of Southern California, an M.S. in computer science from Vanderbilt University, and a Ph.D. in computer science from Texas A&M University.  Dr. Hamilton is currently the President of the Society for Modeling and Simulation (SCS), International and the Secretary-Treasurer of the ACM Special Interest Group in Simulation (SIGSIM)Daniel Box is currently attending Auburn University in Auburn, AL, in pursuit of his Masters degree in Software Engineering.  He received a Bachelor of Science Degree in Software Engineering and Applied Mathematics from Auburn University.  His current research includes network security, software architecture and data mining.Major Stephen S. Hamilton is currently attending Auburn University in Auburn, AL, in pursuit of his Masters degree in Software Engineering as a fully-funded Army student. He received a Bachelor of Science degree in Computer Science from the United States Military Academy in West Point, NY in 1998. Major Hamilton’s previous assignments include: G6 automation officer, 13th Sustainment Command (Expeditionary); Company Commander, Alpha Company, 57th Signal Battalion; S3 Automation Officer, 57th Signal Battalion; G6 Automation Officer, 3d Infantry Division; Platoon Leader, 123d Signal Battalion.  His current research includes information assurance and software radio implementations.  Major Stephen Hamilton is a member of the IEEE and Association of Computing Machinery (ACM).