Real-Time Distributed Multinational TestingDarrell E. Bench, US Army Developmental Test Command314 Longs Corner RoadAberdeen Proving Ground, Maryland 21005410-278-1065 HYPERLINK "mailto:benchd@dtc.army.mil" benchd@dtc.army.milDave Browning, Redstone Technical Test CenterRedstone Technical Test CenterRedstone Arsenal, Alabama 35898256-842-0805 HYPERLINK "mailto:dbrowning@rttc.army.mil" dbrowning@rttc.army.milSteve Jenkins, ERC IncorporatedRedstone Technical Test CenterRedstone Arsenal, Alabama 35898256-955-8608 HYPERLINK "mailto:sjenkins@rttc.army.mil" sjenkins@rttc.army.milKurt Lessmann, Amtec Corporation500 Wynn Drive, Suite 314Huntsville, Alabama256-722-7200 HYPERLINK "mailto:klessmann@amtec-corp.com" klessmann@amtec-corp.comAbstract:  As an effort to prove conceptually the idea that a real-time distributed multinational test was achievable, German and US forces joined together to develop a scenario to accomplish this.  This simulation used a German anti-aircraft in Greding, Germany and simulated targets provided by Redstone Technical Test Center (RTTC) in Huntsville Alabama.  One of the first hurdles was coming up with a common architecture that would allow both systems to talk to each other.  At this time, DMSO had been developing a middleware called High Level Architecture (HLA) that was capable of meeting our requirements.  Another major issue that had to be addressed was connectivity.  The internet allowed for an easy solution but did not provide the security needed to protect sensitive data.  It was decided that a Virtual Private Network (VPN) could be utilized that would provide the security needed.  As with any real-time solution, latency turned out to be a key issue in this effort.The scenario was refined for this year’s effort and plans have been made for actual implementation.  This effort will be expanded to include Great Britain and hopefully others in the future.  It will involve the US providing threat targets and a ground radar, the Germans providing a coalition air defense system and Great Britain providing a coalition air platform.  Like before, the systems will have to interact real-time and have a common architecture for communication.  HLA will remain the common architecture for all systems but other architectures will be used by the Germans (P-SISA) and the US (TENA – Test and Training Enabling Architecture) with gateways back to HLA 	Latency and connectivity will persist as issues to be faced and improved upon along with the complexity added with Great Britain et al. coming onboard.  This initial effort, which will be all digital simulations, is expected to be completed in August of 2004, with follow-on exercises that will include live hardware.  The relevance of this effort is heightened as the Future Combat Systems (FCS) concept requires the inclusion of coalition forces in a battlefield situation and thus will require systems of systems testing that represent international force integration.The final result of this effort will be a blueprint on distributed testing for execution that includes long-haul international participants documented not only in the SIW forum but potentially as an International Test Operation Procedure (ITOP). This paper and briefing will provide an update as to the plans and status of the Transatlantic Distributed Tests / Simulations.	As all nations seem to be experiencing reductions in resources for their military, the opportunity to cooperate in the development of weapon systems and the supporting test programs is becoming more and more important.  Obviously there are many hurdles that have to be overcome before this can be possible.  Several nations have joined in an effort to make it a reality.  Early efforts helped to expose some of the problems and allowed for the development of a baseline which would allow for future testing to be more easily implemented.  Currently an effort is underway to expand upon what we have learned in the past and to encourage the involvement other nations.Early EffortsIn 2001 the U.S. Army Developmental Test Command (DTC) and the German Army Wehrtechnische Dienststelle fuer Fernmeldewesen und Elektronik (WTD-81) joined together to develop and prove the ability to conduct live, distributed, and real-time interactive simulations to support joint testing between our countries.  NATO had adopted High Level Architecture (HLA) within their Modeling and Simulation Master Plan, which helped to cooperate in distributed simulation efforts.  This joint German/US effort examined the issues and potential solutions to enable simulation based testing in future joint test programs.  The U.S. Army has been developing a simulation based test capability under the auspices of the Virtual Proving Ground (VPG) program. Germany had also begun to develop a similar VPG capability within the German Ministry of Defense (MOD).  Like the US, Germany had been developing their HLA simulation capability.The initial exercise between DTC and WTD-81 involved the Redstone Technical Test Center (RTTC) in Huntsville, Alabama and WTD-81 in Greding, Germany.  This exercise developed an HLA Federation to link a fixed-wing aircraft simulation at RTTC and a Gepard Antiaircraft Tank in a Hardware In the Loop (HIL) facility at WTD-81. The aircraft simulation federate provided the Gepard system federate a virtual target by injecting the aircraft state data into the fire control system.  The Gepard system then reacted to the virtual target as if it were a “live” target on range. This concept reduces test expense by eliminating a live aircraft while allowing more flexible and repeatable testing via real-time distributed simulation.The Gepard is a heavily armored, autonomous and mobile air defense system based on the chassis of the Leopard main battle tank.  The vehicle is fitted with a fire control system, all-weather tracking and acquisition sensors and powerful automatic guns. Its role within NATO is to protect key installations, combat units and troops on the move as well as on the battlefield. Because live targets are no longer being utilized to test the fire control system, live ammunition was not required to test.  However, if no munitions were fired at the target aircraft, no overall performance evaluation of the systems ability to destroy the target aircraft existed.  To support this requirement, a kill probability simulation was developed from previously recorded live-fire testing results.  The HIL DAS monitors the Gepard system to collect data such as vehicle orientation, gun barrel orientation, trigger pull events, tracking status, and radar activity.   This data is used to provide input to the kill probability simulation and to the Computer Image Generator (CIG).  The kill probability simulation provides a Circular Error Probability (CEP) results based on several Gepard and target parameters.  The CIG utilizes state data of the Gepard and target aircraft to generate a 3D real-time visualization.  This real time 3D imagery provided the gunner to view the test scenario and allow manual control of the firing mechanism.The Gepard HIL test capability has proven to be a very effective means to conduct system-level testing with the Gepard weapon system.  To further enhance this capability, it was decided that this system could be utilized to develop a distributed test capability.  Because this HIL facility only requires input from a single outside source, the target state data, this data source was the logical component to distribute.  Therefore, an HLA-based distributed test scenario consisting of two federates was developed.  The first federate designated was the Gepard.  This federate would interface to the Gepard HIL system and would subscribe to the target state data. The second federate was the flight profile generator.  This federate would read target state data from a database and publish it to the Gepard federate.   It was decided that the flight profile generator, or target federate, was the easiest to distribute, and therefore should be developed and executed by RTTC. The Gepard federate, was developed by WTD-81 to interface with the Gepard through the HIL facility.  Figure 4.0 depicts the test scenario concept.For this early testing, a three step process was developed.  The first step was to develop the two federates, the second step was to integrate the two federates on a LAN-based federation at WTD 81 in Germany and the third step was to establish a transatlantic network and conduct a Wide Area Network (WAN)/ISDN-based federation execution.  The WTD 81 personnel utilized pSISA to develop an HLA wrapper for the Gepard HIL system, whereas the RTTC support contractor personnel at Amtec Corporation utilized a native HLA solution.  Please refer to Paper 00S-SIW-026 or 01E-SIW-065 for more pSISA data.Initially, three options for the test team were available to pursue a WAN development, a pure Internet option, a Virtual Private Network (VPN) running over the Internet, or an ISDN connection.  Other possibilities were considered, but all were ultimately rejected for reasons such as cost and complexity.Network Learning ExperiencesFor all WAN configurations, all initial network and federation testing was performed at the contractor facility in Huntsville, Alabama.  This was initiated to use this facility as a “path-finder” location to work the issues out of each configuration before a transition to RTTC for final check-out.  In addition, all federation executions were configured to run RELIABLE transport instead BEST EFFORT transport.  This decision was based on the limitations of the routers not being able to manage multicast.  The HLA help desk “How do you use the RTI over a WAN” provided all the required HLA-based configuration instructions.The first WAN establishment between organizations was a standard connection to the Internet. The federation configuration was implemented based on the previously mentioned article from the HLA help desk. Because WTD 81 was originally utilizing IP masquerading, the HLA “HelloWorld” test was successful only when the federation execution was started at the contractor site.   Once the Internet connection was established, the next step was to use a VPN over the Internet to add a layer of security.The second WAN establishment between organizations was a VPN solution over the Internet. After testing several different VPN software solutions, we chose Linux as the OS of choice for each end of the VPN. Linux was chosen for the OS because of the ease of use and availability of VPN software. The VPN software package chosen was Tunnel Vision because of its professed increased efficiency.  Tunnel Vision required the installation and use of OpenSSL and IP forwarding. After some preliminary testing, the VPN option performed similar to the internet option by providing a 32 byte ping packet with a latency of approximately 200ms. This configuration was the most secure way of connecting and running our HLA code between the States and Germany to date.   However, due to security concerns at RTTC and a strong experience base of ISDN at WTD 81, the decision was made to continue on to the ISDN-based WAN connection.The current, WAN configuration consists of an ISDN connection between WTD 81 and the contractor facility in Huntsville Alabama. The configuration consists of a router/LAN modem combination at both the WTD 81 and Huntsville locations.  The WTD router is a Cisco 761 ISDN Router whereas the Huntsville router is an Office Connect ISDN LAN modem made by 3COM.  The ISDN connection is currently a single B channel passing a maximum of 64 Kbit/sec. With the single B Channel configuration, the RTI-NG 1.3v3.2 was able to run HelloWorld between WTD 81 and Huntsville.  However, once the Gepard federation was established, the Gepard federate received an error message from the RTI stating that an interrupt was received during an RTI function.  This error occurs during the federation execution between RTTC and WTD 81 and during ISDN-based federation executions local to Germany. Because of this, the team decided to implement the RTI 1.3v7.  Although this modification stopped the error from occurring, this problem will be analyzed further as time permits.The federation, however, was able to execute properly utilizing the RTI 1.3v7 and the single B Channel ISDN connection.  The maximum update rate achieved was approximately 10 Hz.  Although lower than the expected 20 ms, this proved sufficient once data extrapolation algorithms were employed within the Gepard federate.Due to the distributed nature of this phase, the RTTC support contractor was asked to develop a 3D visualization HLA federate capable of being configured to display the various entities of the exercise from a user-defined viewpoint.  This real-time display will be provided to both WTD 81 and RTTC personnel for exercise visualization. This exercise has proven that a transatlantic ISDN network is capable of supporting an HLA federation execution in support of real-time weapon system testing.   Early in the concept development of this exercise, it was noted that data throughput latencies could be the critical issue of this test.  Experiences proved that data throughput repeatability with deterministic latencies became the driving factor.  In this example, the subscribing federate could handle the latencies, if the data arrived at the same update rate.  If there was a large variance in the update rates, then this exercise could have been more problematic to execute.  Through the successes and lessons learned during this process, it was decided that future efforts should continue.  The hope was and is to expand our efforts to include more nations as well as improve upon the process from before.A Proposed Plan	Under the guidance of the Modeling and Simulation Guidance and Implementation Working Group of Experts WGE-7.1 this exercise is being planned and executed to collect data for guidelines from lessons learned to address distributed simulations conducted in support international efforts. The working group of experts under WGE-7.1 has approved the following scenario as the pathfinder project to work toward the Distributed Test Guidance document.	For this scenario, a “real-time” test execution will be conducted that allows for the distribution of test data collected at each range facility from simulations that represent range or unit under test systems. For this particular scenario there is planned participation from three nations, namely the United States (US), Great Britain (GB) and Germany (GE). This exercise is divided into two specific phases with phase I executing the year utilizing hardware emulators / simulators and phase II which will take place next year and involve virtual simulations, Hardware In The Loop (HWIL) and Live entities.  The applications and the countries that will execute these applications, the application general description and I/O during phase I of this effort are as depicted in Table 1, below:ApplicationCountryPurposeInput OutputMiddlewareData LoggerUSLog Networked DataAll Networked DataNoneTENA3-D WorldUSView Test Execution and Test StatusTSPI & Status Information from Aircraft and Pointing & Status Information from Radar & Air Defense SystemNoneTENAThreat AircraftUSProvide Enemy Aircraft for ExerciseScenario Information and IFF RequestTSPI, Status, Local File DataTENAFriendly AircraftGBProvide the Friendly Aircraft for ExerciseScenario Information and IFF RequestTSPI, Status, IFF Response, Local File DataHLAAir Defense SystemGEProvide the Air Defense SystemScenario Information and IFF ResponsePointing Information, IFF Request, Status, Local File DataP-SISARange RadarUSProvide Range “Ground Truth”Scenario Information, Aircraft TSPIPointing Information, Status, Local File DataTENATable 1.Each application must interoperate and share data in a closed loop real-time simulation that allows for the initialization of the test, the execution, viewing and logging of the generated test data. Graphically this exercise for Phase I is depicted in Figure 1, below. SHAPE  \* MERGEFORMAT Figure 1In order to link these applications together an architecture must be utilized that allows the applications to reside within their own infrastructure domain while still being able to communicate to the other applications. In order to accomplish this task each country is running the middleware architecture that is native to their Test and Evaluation areas. For the US that architecture is TENA (briefly described in the attached Appendix A) , for Germany the architecture is P-SISA as described in documents 00S-SIW-026 or 01E-SIW-065 and for Great Britain the architecture will likely be HLA. In order to allow the interoperation of these disparate architectures HLA was chosen as the intermediary middleware. Each application will therefore operate in its native middleware within its domain but will interface via gateway or similar technology to applications outside of their domain and or country. Graphically this concept is depicted in Figure 2 below. SHAPE  \* MERGEFORMAT Figure 2	The exercise will execute as follows. GB will launch a friendly aircraft to intercept a US generated threat aircraft that is operating in the same area (on the same geographic terrain area). Within the engagement area is located a GE based air defense system. As the aircraft are flying over the engagement area the ant-aircraft system will be attempting to engage the threat aircraft. To insure that the ant-aircraft systems is not locking onto friendly aircraft a simulated Identify Friend or Foe (IFF) will be incorporated that will allow the friendly aircraft to identify itself to the ant-aircraft system. The objective then becomes for the friendly aircraft and the anti-aircraft system to engage and destroy the threat system while avoiding fratricide.  As this is still an exercise for distributed test operations a simulated range radar will also be employed on the exercise to provide ground truth. This radar will be provided cueing information from the simulated aircraft GPS systems to point the radar so that it can then provide higher resolution Time Space Position Information (TSPI) for truth data.	While this exercise is being conducted, networked data will be made available for 3-D viewing from various perspectives to include systems operators and god’s eye view. Other shared data such as IFF and status information will also be presented real-time as appropriate for the particular data. All networked data will be logged via the TENA data loggers. This information will be available to allow review and playback of the execution. In addition to the shared data, there will be data files produced at each instrument. These data files are generally larger, complete data sets that contain information that is important for the analysis of the execution but not needed for real-time observation and test control. These data files will be marked and their metadata recorded in such a way that all relevant information for the particular execution can be retrieved, correlated and mined during the analysis phase of the project. Although no analysis of this execution is planned, a simulated analysis will be conducted that confirms that the data can be located, correlated and mined. Figure 3 below show both the real time and post test data flow. SHAPE  \* MERGEFORMAT Figure 3Hardware	For this phase of testing there are two basic forms of hardware, computers and networks.  The computer hardware and their general configuration for this phase of the exercise along with the applications (listed in table 1) are described in Table 2 below.ApplicationComputer Operating SystemNotesData LoggerP4Windows3-D WorldP4Windows Threat AircraftP4WindowsFriendly AircraftTBDTBDAir Defense SystemTBDTBDRange RadarP4WindowsTable 2The network configuration for the exercise will build on the knowledge and expertise acquired during the initial test conducted between the US and Germany. As this phase is still in design the actual network configuration, whether pure internet, VPN on internet, point to point ISDN etc. is still TBD. This information will be updated and reported to the SIW during the presentation or in follow on test reports.Known Issues	Based on the efforts conducted in the US-German Transatlantic distributed test there are a few know issues that will have to be addresses during this exercise, latency, jitter, and time difference. As the distances spanned on performing trans-Atlantic real-time distributed test are very significant the speed of light as well as the number of network “hops” all effect the final latency. Therefore there is a very minimum latency that it is impossible to get below. Given this minimum threshold amount, applications must be capable of withstanding the minimum latency amounts without system degradation. In practice not only is the minimum not achieved but the jitter or standard deviation can be large and stochastic, meaning that application must not only be designed to handle larger minimum latency values but to handle latency values that can very tremendously. An effort during this exercise will be to quantify and minimize the latency and the jitter. 	And of course the time difference between the US and Europe means that a typical work day between the participants would only overlap by 1-2 hours. To midigate this issue patience and flexibility on both side are required the “lengthen” the work day overlap.Future Efforts	The current plan, after all network and communication issues have been worked during the phase I exercise, is to then perform a phase II exercise  replacing  certain simulations with actual hardware or HWIL capabilities. The planned substitutions include an actual British friendly aircraft flying above a British test facility supplying GPS data, live US range radar receiving cuing information and outputting its slew position and a German anti-aircraft system located in their HWIL projection dome. This exercise scenario is depicted in Figure 4 below. SHAPE  \* MERGEFORMAT Figure 4	In addition to the hardware implementation, there is the potential for increasing the scope of this effort to incorporate other nations as interest and funding permit. Included in this list of potential players are France and Sweden. The French will be observing and assisting in the phase I and phase II efforts thus making the addition of a French simulation or HWIL a much simpler task. Final Product	As this effort is conducted, the final goal is to produce an International Test Operating Procedure (ITOP) for long haul distributed testing that can be used as a guide for future efforts involving multi-national tests. This is expected to be necessary as future systems in general and the Army’s Future Combat System specifically will have the requirement to operate with other coalition forces. As forces will be operating in multi-national scenarios, this capability and requirement must be tested and proven both in simulation and HWIL before the systems of systems can be fielded with the soldier. Appendix A,Test and Training Enabling Architecture (TENA)  Overview	The Test and Training Enabling Architecture (TENA), is a product of the Foundation Initiative 2010 (FI 2010) project, and is sponsored by the Central Test and Evaluation Investment Program (CTEIP).  TENA is designed to bring affordable interoperability to US test and training ranges and their customers.  TENA supports the implementation of the Joint Vision 2020 by promoting integrated testing and simulation-based acquisition through the use of the concept of a “Logical Range.”  A logical range integrates testing, training, simulation, and high-performance computing technologies, distributed across many facilities, and ties them together with a common architecture.The core of TENA is the TENA Common Infrastructure, including the TENA Middleware, the TENA Repository, and the TENA Logical Range Data Archive. Figure 2.0 TENA Overview shows these key areas.  TENA also specifies the existence of a number of tools and utilities, including those necessary for the efficient creation of a logical range.  Range instrumentation systems (also called range resource applications) and all of the tools interact with the common infrastructure through the medium of the TENA object model.  The TENA object model encodes all of the information that is transferred between systems during a range event.  It is the common language with which all TENA applications communicate.Figure 2.0 TENA OverviewThe TENA object model enables interoperability among range resource applications by providing a standard “language” that all range resource applications use to communicate. The TENA object model standard will eventually encode all information communicated among range resource applications.  It can be thought of as a range community-wide set of interface and protocol definitions encapsulated in an object-oriented design.  Defining this TENA object model will not be an easy or short-term process.  The TENA object model is being developed using a prototype-based, iterative approach.  Currently, FI2010 is focusing on several object definitions that are critical for range operations such as Time Space Position Information (TSPI), Radar, and Global Positioning System (GPS).  Only object definitions that have been tested at multiple ranges during many logical range executions can be advanced for standardization.  The object model used for a given logical range execution, called the Logical Range Object Model (LROM), can contain object definitions that are either custom-designed for that particular logical range or that are in the various stages of TENA standardization.  In this way, the range community is not forced to use object definitions that may be inappropriate for their logical range, but TENA still promotes the standardization that is necessary to create interoperability.  After object definitions have been tested and used, they can be put forward to the TENA Architecture Management Team (AMT) as candidates for formal standardization.  The AMT is responsible for studying each definition and de-conflicting candidates with other object definitions that have been put forward for standardization.  When the AMT approves the object definitions, they are advanced to the range community standards body, the Range Commanders Council (RCC), for formal standardization.  There are efforts underway that are defining the process required for the RCC to adopt, manage and maintain the TENA standard Object Model. Currently the standard radar object model shown in appendix A is in development and review by the Radar Object Model Team. This model depicts the current state of the model, but is not tied to any particular radar system nor is it tied to a particular release of the middleware, that is, there are capabilities in the current model which are not available in the current version of the middleware, but are in planning. Appendix B shows the current Weibel Radar OM which is based on the Weibel tracking radar, a demonstration described later, and the current version of the software release.Appendix B, Current Candidate Object ModelAppendix C, Weibel Radar Object ModelScenario Description Virtual ComponentsUS -Threat Aircraft SimulationUS- Radar SimulationData Logger3D WorldGE - Air Defense System SimulationUK- Friendly Aircraft SimulationMiddlewareScenario DescriptionMiddleware in DetailTo/From US -Threat Aircraft SimulationTo/From US- Radar To/From Data LoggerTo/From 3D WorldTo/From GE - Air Defense System HWILTo/From UK-GPSHLATENA/HLA GatewayP-SISA/HLA GatewayUK Gateway to HLAP-SISAUK ArchitectureTENATENATENATENAScenario Description / Data FlowUS -Threat Aircraft SimulationUS- Radar SimulationData Logger3D WorldGE - Air Defense System SimulationUK- Friendly Aircraft SimulationMiddlewareData Analyst3512222234333555551- Exercise & Scenario Information Sent to the Participant Applications2- Applications Receive Exercise & Scenario Information via Middleware3- Relevant Real-time Information is Sent To and Received from the Middleware4- Data Logger Receives and Stores Real-Time Shared Data5- Post Test Data Analyst Retrieves Both Real-time Logged Data and Locally Stored and Tagged DataScenario DescriptionLive and Virtual ComponentsUS -Threat Aircraft SimulationUS- Radar ControllerData Logger3D WorldGE - Air Defense System HWILUK- Live FriendlyAircraftUK -    GPSUS- Tracking Radar Middleware