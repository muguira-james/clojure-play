Using HLA for Commercial Web-Based CollaborationAndreas Kemkes, Alpha Virtual, Inc.10345 West Olympic BoulevardLos Angeles, CA 90064-2548310-432-6209 HYPERLINK "mailto:andreas@alphavirtual.com" andreas@alphavirtual.comGershon Weltman, Ph.D.Amos Freedy, Ph.D.Perceptronics GroupAlpha Virtual, Inc.10345 West Olympic BoulevardLos Angeles, CA 90064-2548818-788-1025, 310-432-6203 HYPERLINK "mailto:gweltman@speakeasy.net" gweltman@speakeasy.net,  HYPERLINK "mailto:amos_freedy@alphavirtual.com" amos_freedy@alphavirtual.com Keywords:HLA, Real-Time Collaboration, InternetABSTRACT:  Alpha Virtual, Inc. (formerly Perceptronics, Inc.) has used HLA concepts and standards to develop its new OneViewtm family of commercial software products for instantaneous, real-time Internet collaboration involving a variety of Web media.  The HLA provides a superior and flexible way to create real-time multi-user experiences, but there is no easy built-in way to attach Web content.  Likewise, The Web provides a variety of languages to express content for rich user experiences, but it is typically not a multi-user interactive experience.  Our approach has been to combine the individual strengths into one unique framework.  The resulting OneViewtm product suite includes several modules: Meeting Roomtm, for forming the collaborative group, Webcruisetm, for sharing Web pages; MediaRoomtm, for sharing streaming media presentations; and Formstm, for collaborative completion of fill-in forms.  Products under development include modules for sharing Flash and 3D virtual environments.  The OneView™ product suite is designed to meet the growing demand for expanded multi-user interactivity over the Internet by rapidly formed collaborative groups. It empowers applications to enter the next phase of the Internet -- a real-time, experience-oriented level of collaboration for enterprise, marketing and sales, educational and entertainment applications.  The OneViewtm technology melds the strengths of HLA, the Web and Alpha Virtual’s proprietary software into a single unique framework. 1.  Introduction This paper describes the use of HLA in developing a new family of commercial software products for instan-taneous, real-time Internet collaboration involving a variety of Web media.  The paper presents the ways in which basic HLA concepts and standards have been adapted to meet the requirements of commercially viable Internet software, and describes the current and projected Internet products.   The background to this work is Perceptronics’ role as an original co-developer, for DARPA and the U.S. Army, of the SIMNET virtual simulation system for combined arms training.  SIMNET introduced a novel peer-to-peer network of fully distributed independent simulators using compressed packet-switching technology and communications protocols as a means of solving the delay and other processing problems inherent in a large-scale, real time virtual simulation network. The SIMNET system was highly successful, leading not only to a revolution in military training, but also to an institutionalization of the SIMNET network protocols in the form of the DIS (Distributed Interactive Simulation) and the HLA (High Level Architecture) standards.   Following the delivery and installation of the SIMNET system at several U.S. and overseas bases, Perceptronics became an R&D contributor to DIS and HLA development and testing under DMSO and STRICOM sponsorship.  With the reduction and consolidation of defense R&D activities in the mid and late-1990s, Perceptronics began to turn its attention to commercial market areas in which its expertise in distributed simulation, and particularly DIS and HLA communications, could prove valuable.  The problem of real-time synchronous collaboration on the Internet, which was generating increasing attention as a means of enhancing Internet entertainment, e-commerce, education and business communications, appeared to be one to which the lessons learned could be usefully applied.   This turned out to be the case.  Using initial funding provided by an STRICOM SBIR contract, as well as new equity financing from private sources, Perceptronics was able to develop an innovative suite of products, called OneView, which meet our original objectives: (1) to develop a framework based on declarative syntax that would support generalized distributed simulation using a number of Web media in a ubiquitous environment; and (2) to create products that would prove both effective and commercially viable in the Internet market.   The resulting suite of products can simply and transparently add real-time collaborative capabilities to existing Web sites without requiring any user downloads or plug-ins.  The collaborative groups can be rapidly formed via invitation, in essentially an ad hoc manner, without any prior appointments or arrangement necessary.   And the HLA-based peer-to-peer architecture ensures that any kind of media content can be experienced by each participant synchronously, without requiring additional server capacity.    These are very important features in today’s Internet environment.The current “OneViewtm” product suite includes: Webcruisetm, for sharing Web pages; MediaRoomtm, for sharing streaming media presentations; and Formstm, for collaborative completion of fill-in forms.  Products under development include modules for sharing Flash and 3D virtual environments.  The OneView™ product suite is designed to meet the growing demand for expanded multi-user interactivity over the Internet, and particularly for ways of accomplishing collaborative work without spending a disproportionate amount of time preparing for it.  OneView empowers applications to enter the next phase of the Internet -- a real-time, experience-oriented level of collaboration for enterprise, marketing and sales, educational and entertainment applications2.  Technical ApproachThe primary technical issue can be stated as follows.  The High Level Architecture was originally created by DoD and industry to provide networking solutions for large scale, real-time 3D simulation and military battle gaming.  The HLA provides a superior and flexible way to create such real-time multi-user experiences, but there is no easy built-in way to attach Web content.  Likewise, The Web provides a variety of languages to express content for rich user experiences, but it is typically not a multi-user interactive experience.  Our approach has been to combine the individual strengths into one unique framework.  That is, emerging standards have allowed us to transfer technology into declarative syntax; and the Federation Object Model (FOM) within the HLA allows us to tailor the general architecture to the specific application domain.  Accordingly, declarative Web elements can be easily translated into the FOM and thus shared using the HLA via a thin, Java-based RTI.    We have based our developments on the IEEE P1516 version of the RTI.   We have currently implemented a RTI subset with those components essential to our commercial Internet product functions, and other components can be added as necessary.  All components are in Java, with the objective of obtaining a minimal Applet size.  Communications security has not been a primary factor up to now, although the use of SSL for secure communications is a viable option currently under development.  Our framework is now in its 3rd generation, and enhancements and improvements are being made continually.3.  Initial 3D DemonstrationA demonstration of the approach was done with an early generation of the framework. As illustrated below, the demonstration employed a VRML visualization of a simulated sculling race involving two 2-man shells on a Charles River, Cambridge, racing course. It was called “The Head of the River Challenge”.  One of the sculls was rowed by avatars simply controlled by two remote users, who communicated over the Internet from inside their browsers through the initial Java RTI in a direct, peer-to-peer connection; and the computer automatically rowed the other scull. Rowing aids showed the users the progress of their rowing strokes and helped them synchronize timing and strength. The demonstration was successful. Users located as far apart as Tel Aviv and Los Angeles were able to coordinate their actions so that the 2-man shell moved straight down the course.  Infinitesimal but unavoidable transport delays were compensated for by unconscious adjustments on the parts of the users.   The user’s impression was one of working smoothly and naturally within the virtual physical environment. The experiment showed the feasibility of our approach in connecting 3D simulations, the most difficult real-time collaborative task from a technical standpoint, and a true challenge to the capabilities of the nascent Java RTI.  However, the commercial realities of the Internet market, in which 3D was developing only very slowly, dictated that the Company shifts its focus to more ubiquitous, and thus more economically viable, Web media.  Such media included Web pages, from which the great majority of Internet information is derived, streaming media, which has become a major information source on the Web, forms, which are used in many sales and contracting applications, and the like.  In this market arena, our ability to rapidly form peer-to-peer groups and the no-download, no plug-in features of the Java RTI have become key selling points, while the ability to support full-scale, real-time 3D virtual simulation is a feature that we hope to exploit further in the future.4.  Hooking Up: Peer Group Formation 4.1  The Invitation Process.  OneView makes creating a collaborative group quick and easy. Inviting colleagues or joining an existing group is simply a matter of a few mouse clicks.  The invitation process generally starts from an “enabled” Web site, that is, a Web site that has installed the basic OneView software on its servers.  When users create or join collaborative sessions at OneView-enabled Web sites, a lightweight Java applet is automatically sent from the site's server to the requesting client machine, which immediately connects the user to another individual or the group. Each user can send invitations to potential group members via e-mail or instant message, and respondents simply click on the enclosed link to be connected to each other.  OneView’s applet loads itself, unlike plug-ins or installation-required downloads. In a matter of seconds, the user is ready to create or join a group collaboration session. Figure 2  Invitation ProcessAfter creating or joining a group, the group members are empowered to explore Web sites together and share Web experiences. Depending on which other OneView modules are integrated into the site, users can chat interactively via instant text messaging, launch and view streaming media, fill out forms and interact in Flash™ and 3D environments.4.2  Peer-to-Peer ConnectivityAll OneView collaboration and messaging between users are handled through peer-to-peer communications and do not require support from the host’s servers. OneView's Java applet makes each user's computer an active peer, able to conduct direct peer-to-peer communications on its own. At the same time, OneView maintains the traditional client/server model used by Web site providers to deliver content. The user's relationship to the Web site and its content is not modified, thus retaining all content security and user authentication. As shown in the figure below, a site's Web page content is still requested by each client's Web browser and is delivered by the site's Web servers. This is important for maintaining content control and digital rights management (DRM) compatibility.  At the same time, control and chat communications within the newly established collaborative group are on a peer-to-peer basis, as described below.  Clearly, one of the major advantages of this approach is that there are virtually no backend changes necessary to install the OneView collaborative system. 4.3  The Firewall IssueOneView uses two types of servers to accommodate initial peer connections and firewall compatibility. First, the Lobby Server (also termed the Federation Server) provides the initial discovery services for all peers, determining which peers belong to which peer group and tracking the "joining" and "disconnecting" of peers during the invitation process.  That is, users create new groups via the invite process. Invitees can respond to these invitations (clicking on link), which will send them to the Lobby Server to be introduced to the first user. Once they “handshake”, direct P2P connection is established between each user. At this point, no additional server infrastructure is needed and all collaborative messaging happens directly between users. When other invitees join the group, they are introduced via the Lobby Server to the other members of the group in the same way. When a user leaves a session, the Lobby Server is notified to update the group roster.If users are behind firewalls and a direct P2P connection cannot be made, then the connection is handed off to a OneView Relay Server which will act as a proxy and will relay messages between these peers.  This process, which is illustrated in Figure 4 below, is a standard client/server model for communications and is deployed as a fall back measure to assure connectivity between multiple firewall users.Figure 4  Peer Connection Around Firewall5.  OneView ModulesOneView modules are added to the OneView Communications Core to build specific commercial applications.  This is a straightforward process due to the basic modular nature of the software.Figure 5  One View Product ModulesIn the following paragraphs, we describe several modules that have been used most frequently in commercial appli-cations to date.    5.1  OneView WebCruisetm ModuleThe OneView “WebCruising” module is used for multi-person viewing of existing material on one screen or for moving from screen to screen within the Web environment.  WebCruising allows the collaborative group to move together synchronously from Web page to page under the control of any group member – or as controlled by selected group member(s), if that is desired.  Each group member sees exactly the same Web page – basic text, graphics, a status table, a situation map, etc.  Figure 6  OneView WebCruiseAny group member can move a pointer on the page or otherwise interact with it, while the others immediately see the result of that interaction.   A chat window enables real-time text communication, and simultaneous tele-conferencing can provide voice communication as well. A summary of WebCruise features includesPresence listChat windowDynamic HTMLScrollingRemote CursorEngage/DisengageSingle Domain (Security)A version currently in development will support multiple windows, frames and unlimited domains.5.2  OneView MediaRoomtm ModuleThe OneView Media Room module provides synchronous, interactive group viewing of streaming media in a “virtual screening room” located within an enabled Web site.  This module integrates seamlessly with existing media players, including Microsoft Windows Media Player, RealNetworks Player and Apple QuickTime.  Every user is able to control the action (play, stop, pause, and fast forward/rewind) as well as change the media “play list” selection and chat about the material with other collabor-ative group members.  Figure 7    OneView MediaRoom PlayerAll users see the same video frames, which can be indexed to a specific frame during a pause or stop interval.  The MediaRoom module is used both for group entertainment and for post-production viewing of video segments – such as commercials – during the complete production process.A summary of MediaRoom features includesWMP, Real and QuickTime playersChat windowPresence listBuffering SynchronizationPre-roll on pauseExternal controls5.3  OneView Formstm ModuleOneView Forms™ permits two or more users to fill out HTML forms and questionnaires together. Each member sees the text being written in the form fields as it is occurring. When the collaborative group (or its leader) agrees on the final version, it is submitted via the normal client/server connectivity to the host system for processing or storage. This functionality greatly simplifies and speeds information submission for collaborative group shopping sessions, for e-commerce assistance between a sales agent and a customer, and for CRM at the crucial shopping cart stage in order to assist shoppers who are confused or have questions about filling out the forms. 5.5  OneView for FlashWeb sites powered by Macromedia Flash™ technology offer an extra dimension of rich media with integrated audio, graphics, and video that enhances the OneView user experience with interactive movement and sound. The Software Developer's Kit (SDK) for Macromedia Flash™ includes all of the tools developers need to easily add multi-user functionality to Flash-based applications. The SDK's Flash components allow developers to create multi-user experiences without the need to install, program, or configure servers. This is a breakthrough advantage to the process of creating rich multi-user experiences in Flash. A developer can program in ActionScript, or simply drag-and-drop pre-made UI components, and OneView handles the rest. Figure 8  Build-a-Bear OneView Fashion ShowFigure 8 shows a novel OneView collaborative environ-ment created in Flash for Build-a-Bear, Inc., a very successful owner of 100 outlets for creating your own Teddy Bear, as well as an interactive e-commerce site for viewing and buying new Build-a-Bear merchandise.  The illustrated Fashion Show, which started out as a single-user application, was quickly turned into a multi-user experience by the addition of OneView collaboration software.  With the OneView enhancements, users can invite their friends, see them appear as Bearvatars at the Fashion Show, and chat with them via “dialog balloons” to decide which bears and outfits they like the best and which  -- hopefully – they want to buy.5.6  OneView “Collaboration”  InterfaceThe standard user interface developed for commercial applications is illustrated below.  The buttons, selectors, and readouts are clearly labeled in a simple, intuitive graphical interface. This standard “collaboration bar” occupies a reasonable real estate on the enabled Web site, and can also be readily customized for special applications by branding or other logos.          Figure 9  OneView Collaboration Interface6.   Java RTI Services From the HLA standpoint, the Java RTI and OneView modules described above involve a range of more-or-less conventional RTI-type services.  Included are:Application ServicesPresenceChatPage controls (WebCruise)Cursor (Web Cruise)Media controls (Media Room)Stream Synchronization (Media Room)Presence ServicesApplication-level presenceHello, welcome and goodbye interationsUnsubscribe (after initialization phase)Cursor ServicesCursor Information (best-effort transport)User toggleDynamic service subscriptionJava RTI functions that provide more than the conven-tional HLA/RTI capabilities include:E-mail invitationIM system integrationOnline presenceW3C standards (SMIL2.0, X3D, etc.)In the future, we are looking toward enhanced and/or additional capabilities, including:Seamless application integration Dynamic loadingIM integration and on-line presence IDP2P-JXTA for relay and content distribution services7.  ConclusionsThe OneView commercial framework was originally developed by a team of software engineers from Perceptronics, Inc., the former company name of Alpha Virtual, Inc.  Over the past years, Perceptronics focused on building the core foundation on top of the High Level Architecture (HLA) and Run Time Infrastructure (RTI) layers through development contracts with DARPA, DMSO and STRICOM, as well as considerable and essential private investment.  The OneView RTI implementations are now in their third generation as an RTI subset with essential Java components comprising the core.  In the course of our development work, and in the process of meeting commercial requirements for real-time, synchronous collaboration on the Internet, we have found that the HLA-based OneView approach has the following important technical and performance benefits:Streamlined communication between user machines, keeping applications fast and responsive and allowing real time interaction within the collaborative group  Efficient Java-based coding of the interface and RTI (Run Time Infrastructure) components, eliminating special plug-ins or downloads Rapid and natural group formation at the host Web site -- potentially as fast as “one or two clicks and you’re together” Existing and planned Internet standards and protocols ensure ease of integration with other component technologies Efficient, cost-effective reuse of existing content and software allow OneView capabilities to be added non-obtrusively to existing Web sites and applicationsWe have also found that the same benefits that make the OneView technology competitive in the commercial sector also apply to the new requirements in the military and security sectors for real-time, Web-based collaboration by rapidly formed groups of remote participants.  These requirements include such critical applications as command and control, intelligence activities – particularly counter-terrorism and homeland security -- and emergency management.  In striving now to meet these new requirements, we are essentially bringing the OneView technology full circle, to its defense roots and its initial R&D sponsors.   We are proud and pleased to be able to do so, and hope that the commercial technology we have developed will have a role in the war on terrorism as well as in the battle for Internet dominance.Author BiographiesANDREAS KEMKES is Vice President and Chief Technology Officer for Alpha Virtual, Inc.  He is the person primarily responsible for architecture and development of the OneView framework and product modules, and is also a long-time contributor to government-industry activities in DIS and HLA development and testing.  GERSHON WELTMAN is Principal Scientist for the Perceptronics Group of Alpha Virtual, Inc.  He is an original founder of Perceptronics, Inc., where as CEO he directed and participated in development and production of many innovative simulation systems, including the SIMNET virtual simulation for combined arms training.AMOS FREEDY is Director of the Perceptronics Group of Alpha Virtual, Inc., and a co-founder, with Dr. Weltman, of Perceptronics, Inc., where he was President and Chief Operating Officer.  His technical work has focused on the use of real-time modeling and artificial intelligence in decision support and simulation systems.AK: Perhaps sometime in the future, but this is not true of the ystem now r in the near term.Figure 2  Invitation ProcessFigure 1  Initial 3D Demonstration 