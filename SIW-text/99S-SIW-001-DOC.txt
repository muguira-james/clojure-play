Non-Monotonicities in HLA-FederationsDr. Andreas TolkIndustrieanlagen-Betriebsgesellschaft m.b.H. (IABG).Einsteinstr. 20D-85521 Ottobrunn, Germany+49-89-6088 2381tolk@iabg.deKeywords:FEDEP, non-monotonicities, MOE, structural variance, system of systemsABSTRACT: The following (or similar) phenomena have been observed by nearly everyone who is in the business  of simulation evaluation:  for a fixed tactics for both the blue and the red side and a fixed number of weapon systems on one party, increasing or decreasing the number of weapon systems of the other party does not always lead to the intuitively expected effect.  E.g., it seems often to be more efficient to use fewer tanks because numerically increasing forces decrease the measure of effectiveness (MOE) instead of increasing it, and vice versa.  On the other side, it also happens that adding just a few weapon systems increases the MOE tremendously.  Although being monotonic, this effect violates the principle of strong causality.  The reason for such effects is often a structural variance within the federation.Structural variances often occur when the tuple of given objectives of the superior command, generated orders for the simulated objects within the federation (e.g., by CGF, SAF, ModSAF), simulation of the interactions (incl. granularity and fidelity of the elements) and evaluation processes (e.g., MOE and internal control process) has not been harmonized.  This, however, is normally the case when different simulation federates are brought together into one federation.The following paper is intended to give some examples of what can happen, why this happens, and what can be done to avoid it. In the course of these reflections, new challenges for the analyst, the federation developer and the process of VV&A have been formulated.1. IntroductionIn addition to the more physical attrition and reconnaissance processes, closed combat simulation  systems try to model the complex command processes on the levels of command which are relevant in the given case. In models of the newer generation, this is done using decision tables or rule systems – and sometimes even expert systems –, which produce the necessary orders in a given situation.  However, in most cases these decision rules are hard-coded in form of threshold evaluations of the form „if your own strength is smaller the 50% then stop attacking and start to defend“ or „if your strength decreases more than 5% per time step then call for the reserve“.With such rule driven models, inconsistencies appear frequently in the result spaces, which make an interpretation of the results in some cases almost impossible.  An up to now scarcely considered cause for this is a “suboptimal” mapping of the command process in that sense that the goals and objectives of the superior command are not reflected appropriately by the subordinate C² process. It can be shown indeed that, by improving the rules of engagement and/or by choosing the decision parameters – mostly thresholds – within in the relevant rules more appropriately, structural variances (as the inconsistencies are called) in the result space can be reduced significantly.Therefore, one of the requirements of rule systems should be that the decisions integrated therein be „auftragsadäquat“, i.e. that the reflect, “keep in mind” and support the orders and standards of the superior command as close as possible.It is furthermore a not yet formulated task (in fact a challenge for the model developer) to avoid or reduce structural variances in a federation as well.  The same disturbing effects that can be observed in a more or less monolithic model may increase dramatically when several models/federates are combined within one new federation.  Although each federate for himself may have passed a VV&A-test successfully, the federation may fail to meet the demands of an analyst in this respect.  Structural variances resulting from the sources described in the following sections may result in such tremendous non-monotonicities that the outcomes of the simulation run are even useless.The issue of this paper is to show the problem of structural variances, enumerate their sources, give examples and describe a first outline of some solutions.2. DefinitionsThe objective of the following definitions and examples is to give a first glance of the topic of structural variances and to introduce the main theses.2.1 Non-monotonicitiesFor the definition of non-monotonicity, a view to simulation systems as functions or mappings in a mathematical sense is needed first.Taking the initial values of the simulation (for the sake of simplicity: the quantity N of weapon systems of the most relevant type) as the independent variable, the outcome of the battle using a predefined real-valued measure of effectiveness (MOE; or in a more general manner: measure of merits, MOM) can be interpreted as the value of a success function S(N).This function may be (dis-)continuous, increasing, decreasing, (non-)monotone, or even chaotic, and these properties can be attributed to the simulation itself.Of course, S(N) is expected to be monotonously increasing for all relevant sets of parameters. If at some initial value I, S(I) begins to decrease, S is called non-monotonic at this point.2.2 Weak and strong causalityCausality in general is the linking of cause and effect. In common sense, the same cause should have the same effect and similar causes should have a similar effect. To catch this, weak and strong causality is defined.A system behaves without contradiction to the principle of weak causality when the same initial conditions lead to the same result, i.e. the result is a genuine function of the initial values (same cause, same effect).If, in addition, similar initial conditions lead to similar results, the system is said to follow the principle of strong causality, or the outcome is a continuous function of the initial values, as a mathematician would choose to name it (similar cause, similar effect).In analyses and in trend simulations, it is highly desirable that systems fulfill the principle of strong causality because it seems not to be natural that an attack with 12 tanks leads to results tremendously different from an attack with 11 or 13 tanks.That this is not always the case, and that many simulation systems are highly dependent on their initial conditions has been a topic of a NATO symposium dealing with uncertainty in defense decision making [8] and of other publications dealing with non-monotonicity and chaos in simulation systems.2.3 Structural VariancesThe following definition of structural variance can be found in [1]. This definition is still valid and has been used in [7] too. Hawkins was first in publishing respective observations in the result space of a simulation system after evaluating several variations of the initial parameters.„Structural variance is the term applied to a discontinuity in results which were produced by smooth changes in an input parameter. It is caused by the structure of the model rather than by an error in the model, data, interactions represented or by any stochastic processes.“[1]2.4 ExampleIn the following figure, an example for both effects – discontinuity and non-monotonicity – is given:A reinforced tank company is in defense.  The used measure of effectiveness (MOE) is the number of destroyed enemy tanks. The diagram shows that, up to the number of 10 defending tanks, the system behaves as expected.Using 11 tanks however decreases the number of destroyed targets from 25 to 10 which makes the system both non-monotonous and discontinuous (possible reasons are given in the next chapter).From 11 tanks up to 20 tanks, the system again behaves quite regularly.  However, increasing the number of defending tanks from 20 to 21 causes an unexpected additional kill of 15 enemy tanks rising the number of destroyed targets from 20 to 35, which violates the principle of strong causality: the system is discontionuous though being monotonous.Fig. 1: Example for structural variances2.5 Chaos in combat simulation systemsAlthough chaos theory deals with the behavior of infinite systems, and combat simulation systems are never infinite, i.e., always reaching an endpoint (at least almost always), many simulation effects have been explained as chaotic effects or chaos in the respective combat simulation system.  Devaney gives the following definition for chaotic systems being described as a function f mapping its definition set into itself:„To summarize, a chaotic map possesses three ingredients: unpredictability, indecomposibility, and an element of regularity.  A chaotic system is unpredictable because of the sensitive dependence on initial conditions.  It cannot be broken down or decomposed into two subsystems (two invariant open subsets) which do not interact under f because of topological transitivity.  And, in the midst of this random behavior, we nevertheless have an element of regularity, namely the periodic points which are dense.“[2]Here again the sensitive dependence on initial conditions as a crucial factor. In their nearby famous report on non-monotonicity, chaos and combat models [3], Dewar et al. introduced a very simple Lanchester model including reinforcement by reserve that seemed to be chaotic. Figure 2 shows the results of the parametric variation of the initial blue and red forces (black dot = red wins, white dot = blue wins). Fig. 2: Result in the model of Dewar et al. [3]However, in [6,7] it was shown that the effects can be decreased significantly – and in this example be even eliminated – by using adequate rulesets for the engagement of the reserve and that they are not effects of chaos but of structural variances.This episode shows how well-hidden structural variances can be even in small models. And even in such cases the effects can be disastrous for the evaluation of the results. How much more is it necessary to eliminate them in federations! However, in order to be able to do so, one has to know where the pitfalls and dangers are, i.e., where and how structural variances can occur.3. Sources for non-monotonicitiesIn order to avoid structural variances, one has to know the potential sources. It has been shown in [7] that there are four main sources/classes of structural variances:-	Discrete approximation of continuous processes-	Discrete changes in the parameter room-	Not adequate MOEs-	Suboptimal decision rules.The next sections define the sources and give examples for each of them.  Some of them are already mentioned as sources in [1] .3.1 Discrete approximation of continuous processesMany combat models use fixed time steps for processes like the evaluation of the situation and the decision process.  The normally continuous process of command and control becomes artificially discrete.Example:Blue is defending against a fixed number of red tanks.  Every three minutes, the situation is evaluated and a decision is made whether to defend further or to start a delay operation.  The blue reserve then takes over and the former defending unit becomes the new reserve.In a given situation that leads to the fact that after reaching a given threshold, the reserve takes over and the old defending unit can be reinforced while being the reserve in order to drive a successful counter attack later on making the blue side the winner.Increasing the number of blue initial forces for the next simulation run leads to the fact that in the same moment of decision the threshold is not yet met this time.  Therefore, the reserve is not activated and the original unit remains in the area of defense. During the next three minutes until the next period of decision making in the model, the attrition process goes on.  The Unit becomes so weakened that it cannot be reinforced as a reserve.  The counter attack becomes obsolete and the blue side is beaten although starting with more initial forces.This is the most popular source of a structural variance.  A very good example and assessment of this effect is given in [4]; it is also the main topic of Hawkins’ article [1].3.2 Discrete changes in the parameter roomA very similar source is the discrete change of values in the parameter room of the simulation.  Many processes being more or less continuous in reality are modeled as a discrete change in the parameter room within the simulation.  This is especially true in event-driven simulations, where each event is modeled as such a discrete change due to take place in just one point of time.Example:The engagement of a reserve is a typical example.  In reality it is not possible that a whole reserve unit is activated at exactly one point of time.  If, for example, a company is engaged, not all groups and platoons arrive exactly at the same point of time in their defense positions starting combat simultaneously. It is more likely that one group is engaged in combat while another is still approaching the assigned position.  The greater the reserve, the more likely the engagement process is more or less continuous.In [1] Hawkins comes to the conclusion: „If both sides committed force as a continuous process, as opposed to committing it in packages, say regiments, then the problem would not arise.  However, this is usually not the case.“3.3 Not adequate MOEsAnother source of structural variances is simply that the decision rules being used within the simulation do not match the evaluation rules, or simply: the evaluation objective does not match the given objective in the decision process.In [1] the following statement can be found: „One method of overcoming structural variance, that should always be considered, is to improve the measure of effectiveness (MOE) used.  It could be argued that if the correct MOE is used structural variance will never occur.“ That this is only partly correct will be shown in the next section.Example:A blue unit is defending in phases.  During the first phase, the unit defends out of bad prepared defense positions nearly the border enabling the other forces to prepare the positions in the rear to be used during the main defense battle.  In addition, this gives the inhabitants time to leave the battle area and the own soil is not the main battlefield as long as possible.  When reaching a given threshold the blue forces draw back into the second line of defense which is well prepared.  Increasing the initial blue forces leads to the effect that the blue side is staying longer in the bad front positions suffering longer from high attrition rates.  The exchange ratio is much worse for higher initial blue forces than for small ones starting to withdraw early enough.However, using the exchange ratio as MOE does not take into account the increased time interval during which the stronger forces can hold the forward position.  If  this advantage is worth suffering a higher attrition rate, then the time of defense in the forward lines must have an influence on the MOE.  If this is not the case, why start the battle in the forward positions instead of –right from the beginning - defending from the well prepared ones in the rear?This source goes hand in hand with the last one, the suboptimal decision rules.3.4 Suboptimal decision rulesIn many cases, it is not the MOE that is inadequate, but the decision rules being used within the simulation are suboptimal.  One can argue that the MOE is the intent of the superior command setting the objectives to be reached.  The better these objectives are reached, the higher is the MOE.  If, e.g., the objective is to keep the exchange ration low, the optimal rule in the previous section is to defend only from the rear position in which the attrition coefficients are optimal for the defending side.Example:Figures 3a – 3c  illustrate how structural variances in form of non-monotonicities and/or discontinuities can result from suboptimal rules.Given are two tactics A and B.  The optimal result can be achieved when changing from tactic A to tactic B in the cross point t, i.e., using t as the threshold, i.e. using a rule like IF   x is smaller than t THEN choose tactic A ELSE choose tactic B.Using t-m as the threshold causes non-monotonic behavior.  Using t+n results a discontinuity.Figure 3a shows the optimum. Figure 3b shows the non-monotonic behavior resulting from changing too early from tactic A to B. Figure 3c shows the discontinuity resulting from changing to late.Fig. 3a: Optimal threshold tFig. 3b: Suboptimal threshold t-m: Non-monotonicityFig. 3c: Suboptimal threshold t+n: DiscontinuityThe optimal threshold t itself is generally highly federate dependent, i.e., the optimal solution in one federate is likely to be suboptimal in another one.  Thus, structural variances are likely to occur when decision and effect are computed within different federates.3.5 Balance of MOE, rules and granularity Summarizing the sections of this chapter it can be argued, thatthe intention of the superior command (in form of the MOE) as the target function for the decisions-	the decision rules of the simulation-	the granularity of the simulation-	the evaluation of the results (in form of the MOE)must be in a sort of balance to reduce the probability of  structural variances.Having the MOE as the intention of the superior command at the beginning and as the evaluation function at the end of the chain, and with the granularity of the simulation system as the decision rules being used within the federates as further aspects to be taken into account, all of them being interconnected with each other, a „triangle of structural variances“ is formed being shown in the figure 4. EMBED Word.Picture.8  Fig. 4: The triangle of structural variancesAt each time when a wrong or inadequate MOE is used,the decision rules being used within the simulation to reach the best MOE are suboptimal and/or the granularity of discrete approximation of continuous processes are not synchronized with the model of the decision process, it is not only probable but very likely that structural variances will occur within the respective model or federation.4. Consequences and Recommendations for the FEDEP and VV&A processesThe last chapter has shown that especially in a federation coupling several federates together as a new „system of systems“ it is necessary to synchronize(a)	the granularity of the simulation systems, especially the orders that are accepted by the different simulated objects and the way they are carried out.  If, e.g., an order is only generated for a unit, and the respective orders for the simulated platoons and groups are hard coded it is very likely that these hard coded rules are suboptimal for a given operation leading to the former described effects.(b)	the decision process, starting with decomposing the overall intent of the superior command into several objectives to be reached, going over the time steps in which a command and control process is modeled, up to the orders being generated for the simulated controlled objects.(c)	The evaluation of the results of the overall operation measuring the success of all sub-operations carried out in the light of the overall objective.This is not an easy task even for just one model builder creating just one simulation system (first step).  The more this is a challenge for a group of system engineers creating a simulation system out of several modules with each engineer being responsible for one of them (second step).The last step is the reuse of such systems – or as a last consequence the reuse of modules of the system – as a federate within an HLA-federation.  Especially the implicit or „hidden“ functionality – being often not too well documented but nevertheless being used within the respective decision processes and rules of the system -can be a dangerous pitfall within the federation.The following example should make this clear:-	A unit hits a minefield. During its period of crossing the minefield, the other side plans a CAS operation against this unit.-	In the model of the federate A, the unit hits the minefield resulting in slowing down the speed of attack, i.e., the unit passes the minefield continuously breaching a gap.  The planned air strike will hit the unit within the minefield.-	In the model of the federate B, the breaching is modeled in another way. After hitting the minefield, the unit halts. The period of time for breaching and passing the minefield is calculated and after this time the unit continues its attack is if there were no mines at all.  An air strike has to be planned to meet the unit in front of the minefield over the whole period of passing.-	Using either federate A or B causes no problems because the implicit behavior of units hitting mines are well know.  However, in a federation with federate A being responsible for the air strikes and B for the land forces, all CAS operations against units in minefields will puff without effect because the aircraft aims coordinates in the minefield assuming a continuous crossing while the unit halts in front of the minefields using the leapfrog model of federate B.The following figure illustrates this. EMBED Word.Picture.8  Fig. 5: The minefield exampleIt is therefore necessary to adjust the respective decision rules in order to meet the conditions of the new federation.  It is not sufficient to optimize the federate alone.  Each federation is a new „system of systems“ where it is not sufficient to have the interactions within the subsystems tested and validated, but the super system – the HLA federation – has to be the objective of the VV&A-process.Because of the complexity of this task, exact methods for developing and/or improving rule systems for federations can be expected only for very special circumstances.In addition, the development of respective rule systems by human experts is – as a rule – extremely costly.  Therefore, it is desirable to use task adaptive methods which at least support the developer.In [7] it was shown to what extent methods of Artificial Intelligence can be used for the development of improved rule systems in closed combat simulation systems.  In order to do this, it is necessary to formulate the demands for the simulation models and the evaluation process as well.The results of [7] have to be extended to HLA federations.  Appropriate tools using neural networks, expert systems, and heuristic optimization have to be developed to support the federation builder as well as the VV&A-community.5. SummaryIt has been shown how structural variances can emerge from applying suboptimal rules and other frequently well hidden sources. It has been made clear that the MOE used, the implicit and/or explicit decision rules and the granularity of the simulation must be balanced. Figure 6 illustrates interaction of the MOE, the decision logic and the granularity of the system  Fig. 6: MOE, Decision Logic and GranularityThe measure of effectiveness must be the target function for the decision processes and C3I processes within the simulation. If this is not the case, suboptimal objectives are generated by these processes. On the other hand, the evaluation function must analyze the success of the operation by evaluating the respective results of the simulation based on the appropriate criteria, i.e., the objectives of the target and the evaluation function have to be identical. In addition, the granularity of the simulated objects (and the simulated processes) have to be taken into account too in order to avoid structural variances due to discrete approximations of continuous processes or events.It has been shown, that by using means of advanced programming, artificial intelligence and heuristic optimization structural variances in the result space can be reduced significantly [6,7].These methods must be established for federations too.  The evaluation of a federation has to take into concern that – although each federate delivers reasonable results – the federation itself can blur the overall results due to some not adequate combination of explicit or implicit modeled decision making.It is therefore unavoidable to take the effects of structural variances into account even when building a federation out of well tested and VV&A-proofed federates.  The federation itself has to be evaluated in any case.  Tested federates alone can never assure a tested federation (because the federation is always more than the sum of its federates).As a first step, having in mind that we are talking about a system of systems, we have to describe each federate much more accurate then this is the case when only using the OMT focussing on the more or less static interface.  It is much more necessary to have a system’s behavior model of the federate – e.g. using the Unified Modeling Language UML [9] – to describe the federate with all relevant aspects: use case diagrams, class diagrams, behavior diagrams and implementation diagrams.  Only then the semantic consistency of federates can be approved, and only then the occurrence of inconsistencies in the result space of the federation can be evaluated properly.  In other words, it is recommended to use a sort of “Simulation CMMS” in addition to the FOM/OMT to describe a federate and its behavior.However, it has to be kept in mind that not all such effects are caused by the model. As Davis pointed out in [5], non-monotonicity is also part of the real world. If real commanders had perfect knowledge, then they could have better decision algorithms and – if the right MOEs were used and the decisions were more nearly continuous – non-monotonicities would decrease or go away.  But in the real world, heuristic decision rules are the best the commanders can hope for.  They do NOT have perfect information, much less perfect predictive models.Therefore, if non-monotonicities occur it has to be evaluated whether this is due to structural variances or is part of the real problem.If this challenge is not taken into account the federation can lead to false interpretations, results and – as a last consequence – to false decisions of the military user.AcknowledgementsThe author likes to thank Dr. Paul K. Davis from Rand Corp. as Dr. Uwe K. J. Dompke and Mr. Walter Kärcher from IABG for their encouragement, discussions, and review in course of the development of this paper.6. ReferencesFollowing books and articles are referenced in this paper:[1]	Geoff Hawkins: „Structural variance and other related topics in the SHAPE Armour/Anti-Armour study“ in Reiner K. Huber (Ed.): Systems Analysis and Modeling in Defense – Development, Trends, and Issues, Plenum Press, New York 1984.[2]	Robert L. Devaney: „An Introduction to Chaotic Dynamical Systems“, Addison-Wesley, New York 1989 [3]	J. A. Dewar, J. J. Gillogly, M. L. Juncosa: „Non-Monotonicity, Chaos, and Combat Models“, Report R-3995-RC, Rand Corp., Santa Monica CA 1991[4]	Harrison K. Tsai, James C. Ellenbogen: „Bounding Potentially Pathological Nonlinear Behavior in Combat Models and Simulations“ in PHALANX 12/92 (MORS)[5]	Paul K. Davis: „Dynamic Instability“ in PHALANX 12/92 (MORS)[6]	Reiner K. Huber, Andreas Tolk: „Non-Monotonicity Effects in Combat Models and Tactical Decision Modeling“ in PHALANX 09/94 (MORS)[7]	Andreas Tolk: „Zur Reduktion struktureller Varianzen“ (published in German; engl. Title: On the reduction of structural variances), Pro Universitate Verlag, Sinzheim 1995.[8]	NATO Technical Proceedings AC/243 (Panel 7) TP/9: „Symposium on Coping with Uncertainty in Defense Decision Making“, TNO-FEL, STC (today NC3A), The Hague, December 1995[9]	G. Booch, I. Jacobson, J. Rumbaugh et al.: Unified Modeling Language UML: Summary / Semantics / Notation Guide; Version 1.1, Rational Software Corporation, Santa Clara, 1998, (see web-page:  HYPERLINK http://www.rational.com/uml http://www.rational.com/uml)Author’s BiographyANDREAS TOLK is Project Manager for Decision Support Systems and the Use of Operations Research Methods within C4IS at the IABG, Ottobrunn, Germany.  He was a member of the Industrial Policy Subgroup of the NATO Steering Group for Modeling and Simulation dealing with the NATO M&S Master Plan.  He published several articles on the possibility to couple C4IS and simulation systems for decision support in Germany, ranging from technical aspects to pitfalls and dangers – including human factors.  He gives lectures at the University of the Federal Armed Forces in Munich.