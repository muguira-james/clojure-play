The NetCOS’ interoperability frameworkJean-Baptiste GuilleritEADSSDC / NETCOS Simulation System6 rue Dewoitine BP 1478142 Vélizy Villacoublay CedexFrance+33 1 34 63 74 79 HYPERLINK "mailto:Jean-baptiste.guillerit@eads.com" Jean-baptiste.guillerit@eads.comFabrice BonhommeEADSSDC / NETCOS Simulation System6 rue Dewoitine BP 1478142 Vélizy Villacoublay CedexFrance+33 1 34 63 76 93 HYPERLINK "mailto:Fabrice.bonhomme@eads.com" Fabrice.bonhomme@eads.comKeywords:HLA Bridge Gateway NCW Interoperability Simulation FrameworkAbstract: NetCOS (Network Centric Operations Simulation) is a simulation environment developed by EADS System Design Center (SDC) to design, evaluate and demonstrate Network Centric Operations, Battle Labs concepts and Systems. NetCOS simulation framework is a key element for EADS LSI approach to support military transformation process and homeland security systems with an increasing complexity. One of the goals of NetCOS is to interconnect (through a network linking the NetCOS experiment labs) existing components that can be either simulation components or operational systems such as C4ISR systems. Some work has already been done in the NetCOS framework to interconnect heterogeneous systems as real equipments (e.g. UAV Ground Control Station) or HLA federates using COTS HLA bridges or gateways.  Nevertheless, COTS oriented solutions do not enable to interconnect federates using different FOMs, HLA standards (HLA 1.3 or IEEE 1516) and RTI implementation in the same time. To overcome this obstacle, NetCOS is designing an interoperability framework architecture based upon up-to-date technologies, a Business Model layer and the Calytrix Simplicity® framework for the connection to the HLA world. This gives the ability to easily develop FOM-to-FOM and RTI-to-RTI HLA bridges or gateways to other standards. This interoperability framework provides to EADS a new and efficient capability to support Large System Integration or NCO concepts and implementations.  1. INTRODUCTION1.1 NetCOS PresentationEADS System Design Center has been created in 2003 to provide competences in critical engineering areas to all Lines of Business, and even more largely to other EADS Business Units, and to handle the Architecture Design authority for such large complex solutions. SDC handles 2 types of business:Direct contract with the customer for Concept Development and Experimentation, comprising business process modeling support, operational analyst support and simulation (CD&E). Support, as the System Design Authority, in Large System Integration projects integrated teams handled by Lines of Business or Business Units (NetCOS)Figure  SEQ Figure \* ARABIC 1: NetCOS Large System IntegrationThe Common Base of Methods and Tools (the Blue Box in the next figure), is a framework (called NetCORE) in which specific “component”, application or domain oriented can be plugged in. Those components can be specific simulation models, or existing legacy simulators, but also operational software or hardware in the loop. This framework allows organizing a geographical distribution of the different components in order to cope with specific resources, intellectual property rights, and also multi-nations experiments. EMBED PowerPoint.Slide.8  Figure  SEQ Figure \* ARABIC 2: NetCOS design overviewNetCOS is not only a set of tools and methodology, but is also an infrastructure, that enables to interconnect the different NetCOS sites (France, United-Kingdom, Germany and soon the USA and Spain). EMBED PowerPoint.Slide.8  Figure  SEQ Figure \* ARABIC 3: NetCOS sites interconnection1.2 Document overview SDC (CD&E and NetCOS) track record contains several HLA simulation projects successfully completed and has interconnected various HLA simulations, real equipments or operational systems using HLA framework as RALExpress [1],  Calytrix Simplicity®, as well as HLA bridge/gateways COTS.The first section deals with the latest HLA federations interconnected to the NetCOS federation, using heterogeneous bridge or gateway solutions.The second section deals with the NetCOS Interoperability Framework that aims at making HLA interoperability easier by taking advantage of .NET technology.The third section explains how the architecture chosen for the Interoperability Framework can be used to create a widen NetCOS Simulation Framework that covers a larger area that HLA interoperability. It presents a proof of concept that has been implemented to connect components to the IT-Core of EADS Global Security.2. HLA BRIDGES & GATEWAYS2.1 HLA bridgesThe current version of the NetCOS framework (NetCORE) is based upon an HLA federation using the NetCORE FOM. This FOM is the RPR-FOM 1.0 that has been extended for some simulations requirements. For Joint Littoral Warfare study, NetCOS has interconnected heterogeneous EADS HLA simulations using HLA bridge COTS tools. The first two connected simulations are Cosmos and Orque. Cosmos is a Simulation of multi-sensor observation and intelligence systems (including IMINT, SIGINT and HUMINT). It enables to improve the architecture of fusion nodes and the architecture definition of Intelligence systems. Cosmos is available as an HLA simulation to be connected to JANUS. Moreover, the XDR data encoding is used [7]. Cosmos has been validated to use either DMSO RTI or Mäk RTI. ORQUE is a naval forces training simulator. This naval forces training simulator is used to train and instruct staff officers in carrying out air-sea operations. It provides them with preparation, command and post-operation analysis tools. ORQUE is deployed in naval command headquarters, on board French Navy ships and in on-shore centers, in training centers, in the operational analysis and simulation centre (ANPROS). Orque is connected to the operational dispatch centers (DC) and communicates tactical situation information to and operational messages to the naval dispatch centers. This simulation is available as an HLA federation using Orque FOM, and is designed to run with DMSO 1.3 NG v6 RTI.ORQUE and COSMOS have initially been connected to NetCORE federation through FOM-to-FOM bridge COTS. Orque was designed to run with DMSO RTI 1.3 NG v6. However, NetCOS is using Mäk RTI 2.4. These two RTIs have Time Management implementations that are slightly different. The initial solution was to use a second bridge that is an RTI-to-RTI bridge. This means that the RTI-to-RTI bridge and FOM-to-FOM bridge are connected (chained) together. SHAPE  \* MERGEFORMAT Figure  SEQ Figure \* ARABIC 4: Joint Littoral Warfare federation architecture (Focus on HLA bridges)2.2 GatewaysIn the same time some real equipments or systems need to be connected to NetCOS. We can cite the NetCOS UAV Test Bed. An EADS operational Tactical Ground Control Station is connected to a simulated UAV equipped with a simulated EO/IR payload. The UAV (in the real world) is controlled using some STANAG 4586 commands transmitted by the operational TGCS. The simulated UAV and payload are HLA federates, but shall be able to understand some STANAG 4586 commands. The RPR-FOM has been extended to support a part of the STANAG 4586. An HLA to STANAG 4586 gateway has been developed to map a part of the STANAG 4586 with the extended RPR-FOM. Figure  SEQ Figure \* ARABIC 5: UAV TestBedThe gateways are developed (for the HLA side) using the COTS Simplicity from Calytrix.  SHAPE  \* MERGEFORMAT Figure  SEQ Figure \* ARABIC 6: Insight into Tactical Ground Control Station HLA gateway2.3 Pertinence of the Bridge/Gateway solution Some SIW papers have already identified a list of problems or disadvantages to use HLA bridges or gateways [8]:Loss of performanceLimited functionalityDifficult to debug a federationFor some RTI services, bridging not possible [9]Bridge rivals complexity of RTIHowever, for large system integration, this is not always possible to make all the federates use the same RTI and FOM. E.g. some legacy HLA federates designed in the time of the HLA pioneers have their internal data model strongly coupled with the RTI Interface Specification and an old version of the RPR-FOM (drafts of the RPR-FOM 1.0)As a matter of fact, these solutions are efficient because:They are not code intrusive (no modification in the source code of the legacy systems is required)Many COTS are today available to support these interoperability problems.Some important disadvantages to increase the number of gateways and bridges remain, however:The COTS and development environment are different (heterogeneous) for FOM-to-FOM bridges, RTI-to-RTI bridges and gateways. Some complex environment may lead to wire in serial RTI-to-RTI bridges, FOM-to-FOM bridges, and gateways with an impact on performances, latency and maintainability.Some RTI services are not supported by the bridge and gateway COTSThe cost of some COTS is sometimes prohibitive when they have to be deployed on all the different NetCOS or customer sites.2. INTEROPERABILITY FRAMEWORK2.1 HLA AdaptersThese interoperability solutions are “one shot” solutions, i.e. that each bridge, gateway is a specific development made in a specific development environment (i.e. different tools, different compiler versions, etc). A solution is to develop a Simulation Business Layer that will model the main commonly used simulation items (platforms, aggregates, weaponfire, detonations, etc). New simulation developments will directly use this business model. When a legacy simulation or system has to be connected, an adapter will be developed between the business model and its communication protocol. For example, if a new legacy federation using a specific FOM has to be interconnected, a new adapter will be written between the federation FOM and the business layer. Here is an illustration that shows how to connect Cosmos and Orque to the NetCOS federation (represented here by Mäk VR-Forces and Mäk Stealth and AAA federate). SHAPE  \* MERGEFORMAT Figure  SEQ Figure \* ARABIC 7: Business Layer (HLA)Actually, all the HLA adapters are federates. These federates will be developed with the tool Simplicity from Calytrix. This tool can easily be connected to a Business Model as Simplicity development environment is MDA oriented [2]. This tool can support many commonly used RTI:DMSO 1.3 NG v6 [3] [4]MÄK 2.4 RTI, 1.3 or IEEE 1516 [3] [4] [5] [6]Pitch pRTI™ 1.3 or IEEE 1516 [3] [4] [5] [6]2.2 How to develop HLA bridges and gateways with the interoperability frameworkThis mechanism with a business model and HLA adapter can be used to implement HLA bridges or gateways. A gateway is an implementation that has one adapter connected to HLA and another adapter connected to another communication protocol. A bridge is an implementation that has one adapter connected to a federation and another adapter connected to another federation that can use either another FOM or/and another RTI implementation.The next figure illustrates the design of the Joint Littoral Warfare federation, using the heterogeneous bridge and gateway environment (the figure focuses on the bridges and gateways and does not show all the federates). SHAPE  \* MERGEFORMAT Figure  SEQ Figure \* ARABIC 8: Joint Littoral Warfare federation architecture (HLA bridges and gateways)The next figure illustrates the new architecture with the NetCOS interoperability framework. All the bridges and gateways are now adapters. The Orque adapter, developed with Simplicity, can support both DMSO RTI implementation (role of the previous RTI-to-RTI bridge) and mapping between Orque FOM and the Business Layer data model (role of the previous FOM-toFOM bridge). It’s not any more necessary to chain bridges together. EMBED PowerPoint.Slide.8  Figure  SEQ Figure \* ARABIC 9: NetCOS interoperability framework architecture2.3 How Microsoft .NET technologies help to implement the interoperability frameworkThe classical state-of-the-art HLA Bridge design consists in having two surrogate federates supervised by a federate manager. Each surrogate federate belongs two one federation [10]. The bridge is decomposed into three different logical parts:Two Surrogates: Surrogates are federates that represent a side of the federation in the other side of the federation. A surrogate reflects information of the federation it represents to its federation (i.e. the federation it is connected to).A Mapping Manager: It supervises the two surrogate federates and meanwhile it ensures translation between the two FOMs through a mapping that associates services or data values from one side of the bridge to the other side of the bridge. EMBED PowerPoint.Slide.8  Figure  SEQ Figure \* ARABIC 10: HLA Bridge common designOne of the problem encountered when developing RTI-to-RTI bridges is that the two surrogate federates of the bridge can not belong to the same process, as each federate has to load DLLs that are provided by different RTI vendors but that have the same name and implement the same Interface Specification. This is one of the reason why some bridge COTS do not support to bridge different RTI implementation on both side if the bridge.NetCOS framework is designed with Microsoft .NET framework. This framework can take advantage of .NET Remoting and marshalling capabilities. In the NetCOS interoperability framework, the adapters are accessing the business layer interoperability controller using .NET Remoting. Each adapter is boxed in a process. In addittion, this enables to take the advantage of a .NET built-in solution without having to rewrite specific data encoders and decoders to make the adapters communicate with the business layer. It prevents from writing something like an RTI to make the surrogate federates communicate with the manager.2.4 Pro and Cons of this approachThe main advantages of NetCOS approach is that FOM-to-FOM, RTI-to-RTI bridges and gateways can be developed using the same environment and technologies (Microsoft .NET). The connection to a new system is simplified: only a new adapter has to be developed. Meanwhile, new component can be directly connected to the Business Layer (on top of it) to take advantages of all the abstraction of services provided by the Business layer. For example a “start” command is provided as an interface to the application using the Business Layer and is implemented by each adapter. A “start” command can be implemented by an HLA adapter with a StartResume interaction class.One of the disadvantages is that some services that are not supported by RTI bridges, can not be supported by this Business Layer either (this is more a limitation of the current RTI interface specification or of the bridge federate approach [9]: “The results indicate that while bridge federates are technically feasible, to use them correctly and efficiently will likely require certain changes to the IFSPEC, careful engineering of the bridges, and an understanding of the inherent limitations that are imposed by a bridge federate approach”).3. NETCOS SIMULATION FRAMEWORK VERSION 2 (NetCORE)3.1 The HLA limitationsHLA is well designed to exchange data between simulation components. However, this is not well designed to share services. For example, a Synthetic Natural Environment (SNE) server offers services such as Line-Of-Sight. This type of computations uses to be done centrally in a server to ensure consistency between the SNE clients. Remote procedure call can be supported by  HLA, i.e. the communication between the SNE server and the other federates would be performed through HLA interactions. This is not the more efficient way to proceed because of the latency introduced. Moreover, large data as meteorological grids may not be well supported by some RTIs.Furthermore, as a Large System Integrator, NetCOS has to interconnect not only HLA federates but also real systems or infrastructures such as IT Core from EADS Global Security. EADS IT-Core is based on Web Services. In this case, the Business Layer can be used as an abstraction layer that is connected to different systems with adapters. In the same time this Business Layer can offer a common abstract model for supervision tools, MMI and many other tools or services (SNE server, etc) EMBED PowerPoint.Slide.8  Figure  SEQ Figure \* ARABIC 11: Connection of MMI tools to the Business LayerAs a matter of fact, the “Business Layer” approach can be used as a common approach, not only for the interoperability framework but for the whole new V2 version of the NetCOS Simulation Framework (NetCORE).3.2 Extension of the Interoperability framework to design the new NetCOS Framework (NetCORE v2) architectureThe Business Layer is a common layer used by NetCORE framework. A sub-part of it is used by the interoperability framework, i.e. there is an overlap between the Business Layer used by the Interoperability framework and NetCORE. The business interface layer provides all concepts of simulation that could be used in an experiment system. Each of these concepts is represented as an interface. For example, this simulation layer can be used to connect a scenario editor tool. As a matter of fact, the idea is to make the interoperability framework become a package of the NetCORE, i.e. the interoperability is going to be supported by the interoperability package of the NetCOS Simulation Framework (NetCORE).  SHAPE  \* MERGEFORMAT Figure  SEQ Figure \* ARABIC 12: NetCORE v2 overviewTo give a short overview of the design of the adapters, each adapter each adapter is structured in the same manner as described in the following model. Figure  SEQ Figure \* ARABIC 13Adapter design overviewAs a consequence, this architecture has been accepted to become the base of the design of the NetCORE version 2 framework (currently under development).3.3 Connection to EADS Global Security IT-CoreThreats to Homeland Security are an increasingly global phenomenon. Intensified trade and communication are magnifying the potential impact on nations and their governments. Among other EADS Global Security ensures border and coastal surveillance, key components for protecting a country. The communication layer of Global Security is called IT-Core. IT-Core uses web services. NetCOS has provided 3D visualization stealth to Global Security. This tool is design to use HLA. As a matter of fact, a new adapter has been developed to connect the IT-Core. The Stealth is connected to the Business Layer with an HLA adapter. The Business layer enable IT-Core and the simulation world (that is using HLA) to communicate.Figure  SEQ Figure \* ARABIC 14: Global Security IT-Core4. ConclusionsNetCORE v2 is currently under development and all the expected services are not yet available. Meanwhile, the integration with EADS IT-Core has proved both feasibility and efficiency of this approach with a first version with limited capabilities.The next (short term) step will be to use the NetCOS Simulation Framework to give to the large system integrators a tool to glue together C4I systems, systems of systems and the M&S world. Meanwhile some code generators or user helpers are being developed to automate the development (e.g. HLA adapters)Current thinking is looking into Software Factories approach. Actually [11] defines software factory as “a software product line that configures extensible tools, processes, and content using a software factory template based on a software factory schema to automate the development and maintenance of variants of an archetypical product by adapting, assembling, and configuring framework-based components”.  [1] identifies Software Factories as the step beyond MDA. NetCOS Simulation Framework is taking advantage of the Software Factories view to support not only run-time but the whole software life cycle (e.g. scenario edition, deployment, run-time, etc). 5. GLOSSARYCOTS		Commercial-Off-The-ShelfDLL		Dynamic Library LinkEADS	European Aeronautic Defence and Space CompanyFOM		Federation Object ModelHLA		High-Level ArchitectureHUMINT	HUMan INTelligenceIMINT		Image INTelligenceLSI		Large System IntegrationMDA		Model Driver ArchitectureNetCOS		Network Centric Operations SimulationRTI		Run-Time InfrastructureSIGINT		SIGnal INTelligenceSDC		System Design CenterSNE		Synthetic Natural EnvironmentSTANAG	Standard AgreementSTK 		Satellite Tool KitRTI		Run Time InfrastructureTGCS		Tactical Ground Control StationXDR		External Data Representation Standard4. REFERENCES[1]	Peugeot T., De Champs P., HLA and MDA at EADS SDC Simulation. Assessment of current and future practice, 05E-SIW-001[2]	Parr S., Keith-Magee, The Next Step - Applying the Model Driven Architecture to HLA. Paper ID 03S-SIW-123, spring 2003[3]	US Department of Defense, High-Level Architecture Object Model Template Specification Version 1.3, 5 February 1998[4]	US Department of Defense, High-Level Architecture Federate Interface Specification[5]	IEEE-Standards Board, IEEE Standard for Modeling and Simulation (M&S) High Level Architecture (HLA) – Federate Interface Specification, 21 September 2000[6] 	IEEE-Standards Board, IEEE Standard for Modeling and Simulation (M&S) High Level Architecture (HLA) – Object Model Template (OMT) Specification, 21 September 2000[7]	RFC 1832 - XDR: External Data Representation Standard, Sun Microsystems, Inc., August 1995[8]	Len Granowetter, MÄK Technologies - RTI Interoperability Issues - API Standards, Wire Standards, and RTI Bridges, 03S-SIW-063[9]	C. Damon, R. Melton, R. Allen, E. Bigelow,J. Ivers, and D. Garlan. Formalizing a specification for analysis: the HLA ownership properties. Technical report, CMU-CS-98-149, Department of Computer Science, Carnegie Mellon University, 1998.[10]  EUCLID RTP 11.13 Realising the Potential of Networked Simulations in Europe - Report 3.3b: Requirements and design of Federation and Federate Composition Tool[11] 	Software Factories, Jack Greenfield and Keith Short, Ed. Wiley,  2004Author BiographiesJean-Baptiste GUILLERIT is a computer engineer at EADS System Design Center. He holds a Computer Science Engineering degree from the IIE School of computer science in Paris in 1998. He has seven years of experience in distributed simulation. He has worked on European projects as RTP Euclid 11.13.Fabrice BONHOMME is a computer engineer at EADS System Design Center. He holds a Computer Science degree from ISIMA in Clermont-Ferrand in 2000. He has three years of experience in distributed simulation.