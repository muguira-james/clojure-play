Modelling of the UK ROYAL NAVY Merlin HELICOPTERPete TrimmerGKN Aerospace Engineering ServicesIntroductionThis paper describes the development of two full-system simulations of the Merlin aircraft; a stand-alone model and an operator-in-the-loop system.  The Flexible Language Approach to Merlin Effectiveness (FLAME) model uses a compilable tactics language to govern the decision making on-board the aircraft, whilst the Lockheed Martin Tactical Development System (LTDS) is an operator-in-the-loop system which makes use of the same underlying simulation.The paper describes how the modelling activity changed focus as the aircraft moved into different phases of the development process, from initial concept to developing operating procedures and solving Human-Machine Interface (HMI) problems.  The paper concludes with a summary of the lessons learnt and the benefits of full system modelling.Merlin AircraftThe Merlin helicopter has now entered service with the Royal Navy.  It’s main roles are Anti Submarine Warfare (ASW), Anti Surface unit Warfare (ASuW) and Search and Rescue.  The aircraft has three crew and a multitude of systems and equipment on-board, especially for ASW - for which the aircraft was primarily designed.  The aircraft can deploy and monitor sonobuoys or lower an Active Dipping Sonar (ADS) into the water to search for submarines.  It is also fitted with radar and ESM sensors and carries Sting Ray ASW torpedoes.Stand-alone SimulationThe FLAME model has been developed over the last 12 years, alongside the developing aircraft.  FLAME can represent two Merlin aircraft and other entities such as a submarine, sonobuoys and the relevant aspects of the environment.  The code is object oriented, originally written in Pascal and upgraded to Delphi.The tactical actions of the crew are represented by an English-language style of code, pre-compiled into data files which feed the main model.  The tactics are event-driven, allowing the tactical actions to be handled easily.FLAME has been used for several purposes.From its infancy, the model has been used for trade-off studies of variables such as endurance and sensor performance, to optimise operational performance.As the model became more fully developed, it became possible to experiment with different crew tactics to help define Standard Operating Procedures (SOPs).  When problems were identified with particular tasks, such as the aircraft conducting a vectored attack from poor track data, different options were tried out and solutions gradually developed and refined.The prime contractor, Lockheed Martin, undertook a set of acceptance trials at the Atlantic Underwater Test and Evaluation Centre (AUTEC) to demonstrate that the aircraft could meet the agreed performance specifications.  FLAME was used to predict the likely performance of the aircraft, identify any problems and find solutions.  The problems were not all with the aircraft.  For example, by representing initial trials plans explicitly in the model, it became apparent that there were several stages where the submarine would not be in the right position for the trials to continue as planned.  If this had not been discovered until the trials commenced, a great deal of time would have been wasted, costing approximately £50 000 per hour.As well as developing tactics which crew could use to overcome problems, particular problems with the aircraft systems were also identified.  The attack tracker on the aircraft, which combines acoustic data from sonobuoys and ADS, had to be represented very accurately in FLAME for the model to give valid performance predictions.  The FLAME tracker was coded from the original mathematical specification before making detailed comparisons of performance with the aircraft tracker harness held at Aerosystems International (AeI).  This resulted in an error being found and corrected in the aircraft code before flight trials.  The tuning parameters for the tracker algorithms had also been questioned by the prime contractor.  By running replications in a number of scenarios and environments, we were able to quickly improve the tracker performance.  This would not have been possible without a simulation.One of the biggest challenges with any simulation is the subject of validation, both of algorithms and supporting data.  Much of the time, we had originally to work from specified performance of various systems.  For example, with sonobuoys, we worked originally from data of how each sonobuoy type had been specified to perform, as trials data were not available at that time.  During the course of the programme, the data was gradually reviewed and updated as more information became available, and we found it essential to keep input data under strict configuration control with full traceability of its origins and reasoning behind its use.One example of the kind of problem that FLAME was used to solve relates to the use of a particular type of sonobuoy, which upon manufacture was found to not perform as specified.  When we put the new performance figures into the model, it became very apparent that the aircraft would not pass trials using the previously developed tactics.  We were able to try different options of either using that sonobuoy type in a different way, or switching sonobuoy types and developing tactics which would meet the tracking accuracy requirements laid down by the MoD.  In a three week study, we found a method of using an alternative sonobuoy type to meet the requirements, with the proviso that strict geometric rules were used about deployment of the buoys and when to carry out attacks.  The tactics were used by the crews at the trials, just a few months later, with great success.  Having passed the trial, the crews were then given free rein to try some of their own ideas for how to improve performance.  In each case, they failed to meet the requirement; powerful testimony to the benefits of a simulation tool.Following the AUTEC trials, we had considerably more data with which to validate certain aspects of the model, such as the time taken for the aircraft to fly between different dip (hover) positions.It was written into the operational performance acceptance procedures for the Merlin that certain aspects of aircraft performance, which could not sensibly be trialled, would be demonstrated by use of a validated simulation.  So following validation of the model, FLAME was also used to predict aircraft performance for a range of tasks such as ASW area search.Since then, FLAME has been used to conduct operational analysis of SOPs in more general environmental conditions and real-world scenarios for the Royal Navy’s Maritime Warfare Centre (MWC).Operator-in-the-Loop SimulationThe LTDS was developed from the FLAME model by allowing two operators (representing the two rear-crew) in the loop to over-ride the tactics functionality.The operators are able to deploy and monitor sensors, specify flight positions and release weapons, as if they were on the real aircraft.This has been achieved by:adding controller functionality to FLAME to constrain the simulation to run at a defined rate (usually real-time)adding an emulation of the rear crew stationEvery second, FLAME updates the data records required by the displays.  Bespoke hardware was built to commercial standard to allow the operators to interact with the system in the same way as the aircrew.  The rest of the system is built from current off-the-shelf (COTS) hardware, including standard PCs and monitors.  This approach allowed an effective rear crew station simulator to be built at relatively low cost.The main drive behind building the LTDS was to allow aircrew to try out different tactical options in a measurable way.  The options were sometimes recommended by analysts and sometimes came from the crew themselves.  The system has a very useful “record and replay” facility, which allows crew to restart the simulation, replay their actions at high speed and try out a different tactics from a given point.  The LTDS has also been used for crew training.  Use of the LTDS has also allowed certain aspects of the stand-alone FLAME modelling to be validated, such as delays between events due to crew reaction time.More recently, we have added touch-screens which can be used as an alternative to bespoke hardware.  This has allowed changes to be prototyped quickly and at low cost before being evaluated by crews in a realistic simulated environment.The LTDS has also been integrated into larger modelling environments, such as the Combat System Research Facility at QinetiQ (Portsdown).Lessons LearntSeveral benefits of the simulation have become apparent during the programme, which were not originally foreseen.  This has been due to the nature of full-system modelling, which has allowed previously unforeseen aircraft problems to be examined at quickly and easily using the existing tool.  This would not have been possible if each task originally identified for study had been considered separately.Throughout the programme, it was necessary to carefully consider the required level of fidelity of each sub-system represented in the models.  This has not been easy and we have found few short-cuts.  To this end, particular uses for the model must be identified at each stage, to allow the models to be constructed as fit for purpose.  However, parametric studies are sometimes necessary in complex scenarios to understand the drivers behind performance.One of the key problems, particularly with the LTDS, has been trying to keep up-to-date with a changing aircraft specification and assessing the effect of changes upon the rest of the system (e.g. will a change in the engine affect the radar performance, and how?).  To this end, we found it important to gain the full cooperation of the prime contractor from an early stage, to allow the coordination of data and algorithms being passed from sub-contractors supplying particular subsystems.Validation of the model against limited trials data was not easy, particularly when trying to separate cause from effect when discrepancies were discovered.  For example, if sonobuoy performance does not match with prediction, is it possible to separate the modelling of the environment (water conditions) from the representation of the sonobuoys themselves?The team had rather expected that one of the main difficulties would be in adequately representing the human operators through FLAME tactical code.  However, due to the event-driven nature of the code and the level of automation of many of the systems on-board, this did not turn out to be as difficult as had been expected for developing SOPs.SummaryThe simulation development carried out during the Merlin programme has shown tangible benefits in terms of aircraft performance, timescales and costs.  Many of the benefits have surfaced due to the full-system modelling approach and would not have otherwise been realised.