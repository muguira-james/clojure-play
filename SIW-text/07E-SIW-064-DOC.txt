Virtual Ship Simulation: An Interoperability & Reusability Based ApproachAndrea LommiAldo ZiniDavide TozziMassimo PevereroCETENA S.p.A.Via Ippolito D’Aste, 516121, Genova (Italy)+39 010 599 5460andrea.lommi@cetena.it Keywords:Virtual Ship, HLA, Interoperability, ReusabilityABSTRACT: HLA based simulations are quickly becoming an industry standard, as a way to improve the reusability of developed simulation components in future simulation scenarios, and interoperability of the modules with third party developed ones. Nowadays this approach is the most followed, ensuring easy future upgrade of simulations and a lower simulation completion time, with comparison to the full simulation development process. In this paper the characteristics of an HLA based simulation architecture, embedding a Virtual Ship implementation are discussed. Emphasis is given to the applications, demonstrating how it has been possible to embed new state-of-the-art and even old, but well trusted, software modules into Federates for HLA compliance thus maximizing reusability. Moreover, thanks to standard RPR FOM and VS FOM extension onto which the simulation is built, interoperability is ensured with other in house or third party developed modules, within a class of possible operations. The focus of the simulation is the Virtual Ship, based on a forces model approach, allowing straight-away insertion of additional environmental phenomena or phisical entities, for which the interaction with the Virtual Ship can be implemented without effort. Application examples are provided, based on ViSIR and VISION projects, thus witnessing the flexibility of interoperable and reusable Virtual Ship simulation, and the benefits in using modern distributed simulations approach, especially in the framework of manned simulation in which the contribution of key-role operators has to be verified.1. IntroductionTraditionally, the design phase of a ship involves the verification of numerous platform related aspects through the use of analytical and phisical mock-ups related studies. However, these approaches do not allow testing a range of aspects, i.e. interoperability with other ships, actual manoeuvrability in different environmental conditions and team working on board, thus leaving these issues for further analysis once the ship building is completed, with the risk of corrections being requested.During the last years, simulation has been exploited for the verification of many design related issues like the ones mentioned before. Real systems and equipment, but also physical objects and environmental parameters can be interoperated together, setting up a virtual reality simulation able to provide feedbacks whose usefulness even goes beyond design verification. In particular during the feasibility study the simulation can help in identifying the optimal trade-off betwen cost and performance of the ship system. In this case, it is mandatory to consider different scenarios in which the ship will have to work. Moreover, for widening the range of studies, the designer should take into account the presence of other entities such as other ships during different missions like defence operations, tactical warfare, logistic operations, land defence operations supporting, submarine war, etc.In this context, modeling and simulation play an increasingly relevant role, able to direct design choices and to allow an evaluation of the critical aspects, minimizing the costs, maximizing the performance and reducing design risks [1]. It must be said that not only the mentioned virtual reality scenarios can be implemented as a distributed simulation, but also separate entities themselves, like the ship, thus allowing components reusability and interoperability, also and in particular referring to existing simulations that can be embedded in a more extended one.As for the chosen software architecture, during the last years, USA DoD has defined a standard architecture called HLA (High Level Architecture) [2] that can be considered an upgrade of the previously distributed simulation standard, known as DIS (Distributed Interactive Simulation). HLA is now a standard (IEEE 1516) and because of its efficiency, it will be the addressed testbed for building up a Ship System Simulation [3].2. Simulation System ArchitectureThe Ship System Simulation is currently under development at CETENA’s VIS Lab (Virtual Integrated Ship Laboratory) and is aimed at the evaluation of the efficiency of the Ship System under test from an operative point of view. The purpose is to create an easily expandable simulation environment with improved interoperability features, to be used as a starting point for future ships based studies.An HLA-based simulation has been set up for interconnecting the entities involved and in the following, the relevant points of the chosen implementation will be pointed out (Figure 1). According to HLA terminology the simulated entities will be called Federates, while the whole simulation will be addressed as Federation.As far as ship dynamic behaviour is concerned, engine, propellers, appendages and ship hull interaction with water are simulated providing the realistic response of the ship to desired commands thanks to a time domain approach, opposite to the traditional frequency domain based ship motion reconstruction. Relevant forces due to hull, rudder, propeller, wind, waves and current acting on the ship are inserted in the ship dynamical model using a system of differential equations. By performing a double integration in the time domain it is possible to obtain the motion of the considered ship’s degrees of freedom. Obviously, the input parameters provided to the manoeuvrability interface can be static or man-in-the-loop generated. As for the mathematical formulation, the biggest novelty with respect to traditional shipmotion approach is represented by wave forces, that are calculated using the following equations: EMBED Equation.3            (1)where the term  EMBED Equation.3   represents the force response amplitude operator (RAO) of the ship and  EMBED Equation.3   is the waveheight at ship center of gravity at time t.Therefore, from a theoretical point of view no particular standard spectrum is needed for the determination of sea surface, thus enabling the use of time varying spectra for considering non linear effects; of course standard spectra are employed for open sea simulations; another advantage is that from the graphical point of view, ship motion is synchronised with sea surface height, thus helping the pilot devising future ship motion magnitude by simply looking at the representation of incoming waves [4].In this framework, a centralised Environment Federate communicates wave height to the Ship Federates, provided that multiple instances of the federate are created (yet with different ship parameters) for interoperability verification and procedures checking. Moreover, the Federate is responsible for setting all the environmental parameters needed by physical objects and phenomena simulations, Ship Federates and Visualizer Federate.The Interactions Federate determines the possible physical interactions between Ship System Simulation Federates and other simulated entities. In order to produce results accordingly with the chosen ship dynamic behaviour formulation, the Federate communicates forces and moments to the involved entities.The Equipment Federate is targeted at modeling equipment whose function is relevant to the success of the simulated operation; in case of breakdown and/or malfunction, the Federate raises an insuccess flag; moreover, a record of the relevant equipment parameters is written for run time and future offline analysis.The Surveillance Federate comprises different devices like Radar, Sonar and Infrared Sensors, based on real equipment, whose correct working is ensured by the network architecture.The purpose of the Gun Federate is to simulate the behaviour of various gun systems. The Federate can be fed with third party developed models and is normally composed by a tracking radar system, a fire control system, a servo-system control and distribution box model. In Figure 2.2 we can see the 76/62 gun system from OtoMelara, embedded in the first version of VISION Federation.The Damage Assessment federate is aimed at evaluating the damage due to a generic attack. In case a damage is caused to the ship, the federate must communicate to Ship System Simulation Federate the data necessary to modify the RAO and the ship structural parameters.Finally, a number of Visualization Federates are used to give various graphical representations of the simulation; moreover, thanks to ship’s engine data, it is possible to simulate the sound of the ship in navigation, providing a complete man-in-the-loop based synthetic environment.3. ApplicationsThe described simulation structure is the result of various studies that have helped its development. In the following, some applications are described that show how to take advantage of the proposed architecture.3.1 The ViSIR ProjectThe ViSIR Project (Virtual Ship Integrated Architecture), developed for the Italian Navy, is targeted at simulating different operations involving at least one ship simulation and another physical entity for interoperability issues checking. Its purpose is logistical rather than tactical, therefore Damage Assessment, Gun, and Radar Systems Federates are turned off.3.1.1 Replenishment At SeaIn this application, the previously described architecture has been used to assess Replenishment At Sea (RAS) between two virtual ships in a simulated environment.Therefore, two instances of  the Virtual Ship Federate are created, one simulating the Etna Ship (refueling ship) and the other representing one of the design alternatives for the future Italian Navy LPD ship.The Interactions Federate determines the hydrodynamic interactions between the two ships thanks to a metamodel able to interpolate physical mock ups interactions experiments.The Equipment Federate simulates the replenishment equipment, with a particular attention to tracking the mechanical forces acting on the weaker parts; in particular, the unlatching of the replenishment pipe due to excessive relative movement of the two ships is considered as the adverse event that determines the insuccess of the replenishment operation.The simulation employs man-in-the-loop for evaluating the Operative Limits in different environmental conditions, particularly related to wind intensity, waves direction and sea state. Ship pilot contribution is not seen as a quantity under evaluation, but as a way to evaluate ship behaviour thanks to the experience of operators.The Federation Conceptual Model for the simulation has been developed and adapted for using the Virtual Ship Federation Object Model (VS FOM, derived from the RPR FOM, currently under development as a standard by Nato Subgroup SG61); the federates have been developed and are currently under test from both the points of view of federation integration and results validation.3.1.2 VTOL Take Off And LandingIn this case the simulation is targeted at evaluating the Ship Helicopter Operative Limits (SHOL) when an helicopter is landing on the chosen ship [4].Here the Virtual Ship simulates a proper carrier in navigation in the environmental conditions specified by the Environment Federate.On the other hand, an existing helicopter simulation is interfaced with the HLA using a wrapper. The helicopter simulation embeds a dynamical model reacting to pilot commands and external environment solicitations.The Interactions Federate embeds an Air Wake calculation module, based on precalculated data arranged as a look up table. The purpose of the Federate is to communicate to the helicopter the air pressure field in specified points, thus feeding the dynamical flight dynamics model with the data necessary to determine the helicopter motion. Air Wake data are properly adjusted with environmental wind speed and direction.In the framework of this study, we have started a cooperation with UK DPA to interface ViSIR modules with Culdrose SAIF training facilities. A possible application could be a geographically distributed simulation in which the ship is simulated at CETENA VIS Lab, while the helicopter is piloted in the UK, thus eliminating property rights issues for the sharing of classified data.3.2 The VISION ProjectIn the framework of Whole Warship simulation, the Vision (VIrtual Ship simulatION) Project is aimed at evaluating the behaviour of a ship in a complete synthetic environment during tactical operations. In the second release of VISION the federates' SOMs have been changed and converted to the standard RPR-FOM 2.0 and particular attention has been paid to the VS-FOM in order to guarantee future compatibility.As far as the ship sistem is concerned, modules relative to Damage Assessment, Surveillance, and Fighting Systems play a crucial role. Even if at an early stage, the ship simulation has the potential to provide feedbacks on the interoperablity of the involved systems. A Mission Planning Federate has been included with the aim of planning and organizing the mission of the ship both in term of manoeuvrability aspects and fighting system management.Actually, the correct integration of the considered modules is the key-point in understanding the limitations and the advantages of the ship, since the model has to be the most close to the real product as possible; nevertheless, it is crucial to consider test cases representative of the environment the ship will be operating in, both for validating the model correctness and for pointing out problematic aspects. In fact, the ship cannot be tested as a stand-alone entity only, since its operability and performance is definitely affected by the environment; this aspect is particularly evident in war scenarios, where simulation proves to be extremely useful.4. ConclusionsThis work has described an HLA federation composed of both newly-implementd and existing software modules, initially set up for stand alone simulations. The integration through an HLA distributed simulation has widened the scope of single simulations to the extent that a Ship System Simulation was implemented. This aspect is very important, since the reusability of previously developed simulators has been ensured, even if they were initially built up for different applications.Another aspect is that the exploited real time architecture can integrate simulations that are geographically distributed over the Earth. Because of this aspect, the realization of a complex simulator based on the HLA architecture allows to join to many national and international projects.Another advantage of this approach consists in the low costs and risks of virtual reality simulation instead of real tests; this approach allows to measure ship’s performance, limits and configuration parameters while it is still in the design phase: it is adviseable for this methodology to become in the next years an active part of the design phase, enabling the reduction of costs and risks, as well as the speed up of the building process.5. References[1]	Carta, A.; Zini, A.; Rocca, A.; Raffa, M. and Costa, R.. 2000. “An Actual Application of Virtual Prototyping in Ship Design”.  NAV 2000, Venice, Italy.[2]	Department of Defense, 1988. High Level Architecture. Available at  HYPERLINK "http://hla.dmso.mil/" http://hla.dmso.mil/.[3]	Kanerva, M. “Virtual Reality – 4D Product Modelling Tool for Efficient Shipbuilding Process”.[4]	Woodrow, I.J.; Carnie, P.K. and Daniel, A.W.G. 1998. “The Application of Simulation Based Design and Human Factors to Ship Safety Management”. WARSHIP’98, London.[5]	Ferrier, B. and Le Bihan, O. 1996. “The use of simulation tools in the calculation of aircraft-ship interface optional limits”. 20th Congress on the International Council of the Aeronautical Sciences, Italy.Author BiographiesALDO ZINI was born in Genoa in 1963 and graduated in electronics engineering at Genoa University in 1990, since 1991 he has been working in CETENA – Italian Ship Research Centre - dealing with information technologies problems. In particular he was involved in several project dealing with: CAD systems, Neural Networks, Ship Survivability Analysis, Virtual Prototyping, Expert Systems, Database, dynamic WEB sites, technical computational code, graphical interfaces.His present position is Head of the Information Technology Department of CETENA. In particular he participated to the NATO NG6 Specialist Team on Simulation Based Design and Virtual Prototyping and he is now member of the NATO NG6 Sub Group 61 on Virtual Ship. Moreover, he participated to the work of the NIAG Sub Group 60 on SBD & VP as National Focal Point.In his company, he was the founder and project manager of the VISLab, the Virtual Integrated Ship Laboratory.ANDREA LOMMI received the Laurea Degree in Telecommunications Engineering in 2001 from the  University of Genova. Since then he has been working for CETENA S.p.A., Information Technologies Department, for which he is in charge of the technical management for the ViSIR Project. Since the beginning, he has been applying Virtual Prototyping and stochastic optimizers to ship design, optimization and performance assessment.His main research interests are Virtual Prototyping, Virtual Reality based Simulations, Adaptive Antenna Arrays, Antenna Arrays Synthesis and Genetic Algorithms.DAVIDE TOZZI was born in 1977 and graduated in Electronic Engineering in 2001 at the University of Genova, discussing a Degree Thesis entitled “Design and Realization of an intelligent system for ship motion prediction for Landing Period Designator” (D. Sterpi, D. Tozzi). At present he works for CETENA S.p.A., Information Technology Department, where he is working on the application of Virtual Prototyping in ship design and Virtual Reality based Simulations.MASSIMO PEVERERO was born in 1971 and graduated in Mechanical Engineering in 1998 at Genoa University. He has been working for CETENA since 2000, from 2000 to 2002 he was involved in the Risk Analisys and Simulation Department and then for Information Technology Department. He is now involved in Virtual Prototyping and Mathematical Models for Ship Manouevrability Simulations.Figure 2.1 – Virtual Ship in a Virtual Environment FederationEquipmentFederatesGun FederateVisualization FederateSurveillanceFederateDamage Assessment FederateInteractionsFederateOtherSimulationFederatesRun-Time Input ParametersShip System Simulation FederateEnvironmentFederateRUN TIME INFRASTRUCTUREFigure 2.2 – 76/62 gun system from OtoMelara