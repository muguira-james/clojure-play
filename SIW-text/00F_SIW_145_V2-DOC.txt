JOANA - Joint Army-Navy-Air Force ModelDr. Thomas RiethDr. Klaus SattlerDr. Franz-Josef SchulzDr. Andreas TolkIndustrieanlagen-Betriebsgesellschaft mbH (IABG)Einsteinstr. 20D-85521 Ottobrunn, GermanyKeywords:JOINT Simulation, Command Agents, Simulation, Frame, HLAABSTRACT: JOANA is a joint and combined simulation system on the operational level used by the German Armed Forces and others. Its purpose / domain of application iseducation and exercises (current focus)analysis and planningdecision / mission supportsupport of system acquisitionThe main features of JOANA are the following:A simulation frame (SIMCONTROL / BASIN) which allows componentwise construction of the simulation and allows constructive simulations following this paradigm to be integrated into a JOANA-federation, following the HLA-rulesUsed at two military decision levels - the operational level and the tactical level - usually under tight exercise time constraints, JOANA is developing command agents such as the ATO-generator for Air Forces or the Task Group Generator for the NAVY to automate for the operational level tasks performed by e.g. players when exercising on the tactical level.  These agents are candidates for DSTs supposed to be well validated by the CAXES (preparation and execution) JOANA is going through over the year.JOANA is equipped with a JAVA based HLA/RTI interface and is taking part in various national and other federation experiments to gain experience in coupling simulation/real CCIS into meaningful federations. Experience hitherto shows the need for "reference" data models (FOM problem) and JOANA lends itself as experimentation testbed for DMF.The paper wants to give a first overview of this component based joint and combined simulation system and gives first findings and recommendations. 1	IntroductionJOANA is a simulation system that represents joint and combined operations at the levels RC, CC and Sub-CC.  It has been developed for the Airforce of the Federal Armed Forces of Germany to model the dynamics and feedback relationships between forces and systems in the areas ofcombatreconnaissanceintegrated air defencelogistics andcommand and controlin scenarios of crisis and conflict.The aim has been to combine proven and validated tools with technically and semantically advanced modules. The range of possible applications comprisestraining and exercisesanalysis and planningdecision support and support to operationssupport of system acquisitionAs future activities in most or all of these areas will evolve combined and in the frame of “Distributed Simulations” – and HLA will presumable be the standard architecture – one of the main objectives has been to make JOANA HLA compliant.  JOANA is now involved in manifold projects as well within NATO as nationally – with bilateral and multilateral characteristics, e.g. the NATO pre-pathfinder project DiMuNDS 2000 [5] – to develop federations of constructive simulations or to connect to real C4I systems.  JOANA has been used successfully in first joint and combined computer assisted exercises (CAX) at the German staff academy (Führungsakademie).First experiences have been made and future work will concentrate on the search for solutions of the well known main problems of federations such as reusability of FOMs, mappings between different aggregation levels, definition of distributed data bases and optimisation of performance.2	JOANA – The Model Components2.1	Model OverviewJOANA as it is currently used is composed of modules for the integrated joint assessment ofground forcesair forcesnavy forcesstrategic movementIn the domain of air operations e.g. the following missions are representedair attackair defenceoffensive air combatelectronic combatairborne early warning (AEW)air ground surveillance (JSARS)tactical reconnaissanceair refuellingair liftairborne operationsJOANA is an interactive stochastic and mainly event driven model that can also incorporate time sequenced components.JOANA uses graphical user interfaces forsituation displayplanning and ordersscenario generationanalysis and post processing (e.g. for after action review and analyses)monitoring and controlling of the entire systemA special feature of JOANA is the usage of command agents for different purposes such asthe ATO generator for Air Forces which is able to generate automatically whole composite air operations (COMAOs) orthe task group generator for the NAVY which gives automatically structure to NAVY task groups depending on a given situation or threatThese agents are candidates for decision support components supposed to be well validated by the CAXES (preparation and execution) JOANA is going through over the year.2.2	JOANA used to Support OperationsThe general idea is the following one:Within a CAX, the primary training audience is never in direct contact with the underlying simulation system. The secondary training audience is in task to understand the purpose of the superior command (i.e., the training audience) and has to generate the necessary inputs for the CAX systems fast, consistent, and unambiguously.  In other words: the secondary training audience is doing the same job as they have to do in their headquarters with the difference, that they are generating orders for a simulation system and not for real units, soldiers, or real entities of the battle space. Intelligent agents – the ATO-generator as well as the task group generator – are giving them direct support. If this agents are doing there task well in the exercises, and the trained operators are getting used to them and the interpretation of there results, why not to use them in the “real world”, i.e., as support to operation tools in the respective C4I systems?By doing so, the requirements for simulation systems or respective simulations components when being used as tools to support operations [4] are met quite well:The military users are well educated in the use of the tool, i.e., they know the abilities as well as the limitations, from their exercises (which themselves demands to do the “training as they fight”). The tool therefore is well known and can be seen as empirically validated by extensive use in CAX and analysis.The tool is highly efficient, as it had been optimized to generate the user wanted output in thousands of runs.The required effects concerning the operations to be supported are modelled and passed respective user evaluations and validations.The data to be computed (input and output) is user driven, well known, available and can be derived and send to the respective C4I systems.2.3	The Systems ArchitectureThe following figure depicts the overall architecture of the system JOANA comprising the various components to be described in a little bit more detail in the this section. EINBETTEN Word.Picture.8  Figure  SEQ figure \* ARABISCH 1: SIMCONTROL as Core for JOANAThe simulation system is based on the simulation language BASIN which allowsto define elements/objects with their attributes in class hierarchiesto define activities of elements/objects (actions, interactions etc.) in so-called event classesto manage time and that means the event calendar consistentlyto create or eliminate elements/objects at run time – that means to organise storage dynamically Like the JOANA assessment modules BASIN is written in ADA 95.Core of the simulation system is the SIMCONTROL process, the operating system of the JOANA federation. Besides others SIMCONTROL provides functionality for management of objects and ownershipmanagement of interactions and ownershipmanagement and synchronisation of timemanagement of informationSIMCONTROL implements the data exchange between the different simulation processes via a control message protocol (CMP). The transportation layer uses TCP/IP. The structure of the message protocol used to communicate between the components of JOANA is the following:the message header contains sender, receiver and time stampthe message parameter part contains the data type and the priority of the messagethe message group contains information to address the appropriate components at the receiverthe message action describes the initiated actionthe message data block contains the data needed for the actionThat means, contrary to RTI where a publish/subscribe mode is used for objects and interactions, in CMP the relevant information flows directly from the sender to a designated receiver.SIMCONTROL provides a broker for distributed simulations which are using constructive simulations as federates that have been developed on a BASIN basis or on the basis of a comparable simulation language. From the reduction of overhead compared to RTI that is gained out of this restriction results an essential improvement in performance, especially in more complex federations/simulations.These observations make clear, that the underlying concepts seem to be at least as mature as the HLA-RTI, offering additional features often demanded for a “next generation RTI” by respective users during the recent SISO workshops. Therefore, IABG has decided still to use the SIMCONTROL/BASIN family as the main JOANA kernel. In parallel the system will become HLA-compliant in the near future (first tests already have been passed). This will be done by implementing and extending a JOANA interface to HLA-RTI within SIMCONTROL. The necessary works are described in the following paragraph.3	Making JOANA HLA-compliant3.1	The JOANA HLA frameworkMain idea of the overall design is the following: To achieve HLA compliance, JOANA is extended by a gateway process (see figure 2) which handles the connection to the RTI. The JOANA-intern process “SIMCONTROL” acts like an information broker, which distributes the messages to and from the JOANA HLA federate and the simulation subsystems (i.e., ALICE, MEMO, SimoF).Figure 2:	Connection from JOANA to RTI via the Gateway-Process (JOANA HLA federate)To reach HLA compliance, the BASIN framework had to be extended. A boundary condition thereby has been to let the developers of the JOANA models uninfluenced by the HLA activities. They should not have to take care about the HLA ability of the system. The HLA should be seen as an add-on or additional interface to interact with other simulation systems of the family of advanced distributed simulation.The functional changes in JOANA’s code partly can be code generated and are partly fixed coded:During JOANA’s initialization the objects and interactions are published and/or subscribed. The objects are aligned with the other federates of the federation.Control of the time advance (synchronization of the JOANA-intern time schedule with the federation’s time).Call of the routines for sending and receiving the changes of objects (foreign and own objects are handled distinctly).Routines for the generation of the messages for exchanging/updating information on objects are generated according to the specification in JOANA’s data definition file. The implementation of the code generator is done in two steps. As a first step the generation is limited to special SOM’s: “COM ( SOM” (COM = comprehensive object model). In a second step the generator will accept arbitrary SOM’s, derived from arbitrary FOM’s.To be able to handle interactions properly, additional steps were necessary: In JOANA assessment routines (events) are handled in the following way: Objects not owned by JOANA but involved or changed in the assessment routines are restored at the end of an event. The new values of these object’s attributes are sent to the federation using the interaction of the type “status change”, which enforces the owner of the object to update it in the transmitted way. Due to his reflect-responsibility the federate publishes the new attributes of the object. This pattern of modeling the interaction between elements is always convenient (it is believed: the only useful one) when a simulation uses assessment routines in which values of several objects (own and foreign) are changed.To handle objects in the desired form, the following solution was implemented: Due to the amount and complexity of JOANA’s object classes, object attributes, enumeration-types and complex datatypes the omd-file – in which JOANA’s object- and interaction representation is published – is generated in a code consistent way by using a code generator, which uses JOANA’s central data definition file as input. This generator produces code for JOANA-intern access methods and (new) for the transformation of the SOM representation to the JOANA-intern object-representation and vice versa. For a pure JOANA JOANA coupling the SOM can be chosen in a convenient (trivial) way: “SOM = COM”. To join JOANA to an arbitrary federation (FOM) the transformation routines of JOANA have to be adapted to translate the intern COM objects to the extern SOM objects and vice versa. The interaction events have to be handled in a similar way.3.2	The JOANA HLA-federate:JOANA is equipped with a Java based HLA/RTI interface. This interface works as a gateway between an ASCII string based JOANA interface control document (ICD) message protocol and the RTI 1.3 NG services and callbacks. The interface is built by a separate component of the JOANA federation, the so-called JOANA HLA federate. It is started by the JOANA system operator GUI using Java's remote method invocation (RMI). Implemented in Java, the JOANA HLA federate can be used on every platform that supplies a Java virtual machine (JVM) and the RTI 1.3 NG Java binding.The gateway concept of the HLA/RTI interface provides the ability to adjust the interfaces to the JOANA simulation model and to the external communication software in an almost independent way. The JOANA HLA federate also provides access to HLA/RTI for other simulation models, especially when these simulation models are ALSP compliant or can simply implement the JOANA ICD message protocol. The external communication (to and from the RTI) can be exchanged without any impact on the JOANA internal communication (between the JOANA processes and to the JOANA HLA federate using the ICD message protocol).For the technically interested reader, the description of the JOANA HLA federate is detailed a little bit now. The JOANA HLA federate consists of the following basic components: two buffered TCP/IP socket applications for the JOANA internal communication, a HLA federation application interface and a conversion package to translate between JOANA ICD and the RTI. The server socket for receiving JOANA ICD messages and the socket for messages to JOANA simulation control are both equipped with a message buffer because the message rate - the number of translated messages per time interval - shows strong fluctuations during a HLA federation process. EINBETTEN Word.Picture.8  Figure 3:	“Remote Control” of the JOANA HLA FederateFigure 3 depicts the participating components and has to be interpreted as follows: SimControl calls the start-method of RemoteHlaFed-application (both running on the “left” host). This method is executed on the “right” host via RMI and initializes the JoanaParser (part of the JOANA HLA federate). One part of the initialization is to set up the TCP/IP connection between SIMCONTROL and the JOANA HLA federate.The advantages of the design are the following:The HLA federation application interface has been built to allow legacy simulation models a more convenient and suitable access to the HLA/RTI than the basic RTI services itself: The JOANA HLA federate is like a wrapper around the “RTI-library” and provides high level functionality for the simulation.Any simulation system that supports the ICD message protocol can use the JOANA HLA federate.The gateway process can be deployed and controlled (via RMI) on another host.Due to the fixed ICD message protocol JOANA is uninfluenced by any changes of the RTI or even the RTI itself. Only the JOANA HLA federate has to be adapted. In JOANA methods which send and receive data of objects in the ICD message protocol are automatically generated.This concept to make simulation system HLA compliant is as reusable and configurable like, e.g., the ADAPTOR solution having been developed by MITRE. It can be used to make every simulation system HLA compliant that fulfils the requirements for advanced distributed simulation systems, e.g., simulation systems that already have a DIS interface or an ALSP interface – or even a non-standard interface for distributed computing as in special federated solutions that are still in use today.4	Experiences, Problems, and the Way AheadA first step to HLA compliance of JOANA has been done. JOANA is currently taking part in several federationsJOANA to JOANA coupling within a national internal compliance testbedJOANA/ALICE as a federate in the NATO DiMuNDS federationJOANA to KORA coupling in the context of national activitiesThe problems that have to be dealt with are well known:Different federations usually need different FOMs. How can the necessary changes and updates of the federate and interface software be minimized? A universal reference FOM, either procedural or technical-algorithmic, does not seem to be a realistic possibility. We recommend a pragmatic process that develops “quasi” reference FOMs out of concrete projects/federations and does stepwise agreed enhancements/extensionsIn the aforementioned federation variants two and three the different federates use different levels of aggregation for objects and interactions. The objective which has not yet been reached is the definition of mappings between the different semantical levels of the federates within federations. These mappings mean as well aggregation as deaggregation.Distributed or centralized data bases? Federations in which JOANA takes part must be able to exercise “Current Operations”. That means each partner at each moment has to have the “joint situation” at his disposal. The question is where to position the data, centralized (as an own federate) or decentralized within the individual federates.Performance: Up to which detail/level is the resolution of objects and interactions within a FOM appropriate? Two factors at least drive the decision:Performance (RTI overhead)Code structure of the participating simulations which are normally not purely object orientedIn the federations with JOANA up to now a very flat hierarchy for SOMs/FOMs has been chosen as a rule.Methods to cope with the problems one to three have been dealt with in [1] to [3]:In [1] it has been shown, how different federates can be coupled using the ATCCIS Reference FOM as a common federation language. It has also been shown, that a data mediation component is able to translate well defined object models into the HLA-OMT and vice versa (for the necessary meta data modeling see [2]) JOANA is a strong candidate for DMF testing as it is possible to use the original model as well as the traditional HLA-version as a reference systems for the DMF-Version.The following figures show (in a simplifying block diagram) the differences and common components of possible approaches.Figure 4: HLA System StructureFigure 5: DMF System StructureIt should be pointed out that the benefit of the DMF-version is the possibility to interchange information directly with ATCCIS compliant C4I systems. Furthermore, it is possible to use a respective ATCCIS-C4I-Proxy, i.e., a federate translating the actual FOM via ATCCIS into the actual C4I message or data format and vice versa [3], which is the actual preferred German solution for coupling C4I systems and simulation systems.Especially the last remark points in the direction JOANA will be going in future as well in CAX as in support to operations: the coupling to real command posts and C4I systems.SummaryJOANA is a matured distributed simulation system comprising various components (themselves on system level), e.g., combining Army components, Navy components, and Air Force components.  It is therefore a real joint model being just for real joint exercises.Using concepts having been developed at IABG, JOANA is actually becoming HLA compliant. However, the inner structure of the JOANA system will not be remodeled to use the RTI, but the concepts having been chosen before are more convenient and practicable for the time being. Anyhow, the concepts to give JOANA an HLA shell can be adopted easily by any system that belongs to the family of advanced distributed simulation systems, e.g., DIS and ALSP simulation systems.Because the main use of JOANA is the CAX for joint operations, the system is used as a test and validation bed for decision support systems and tools to support operations. First products are the ATO-generator and the task force generator, both intelligent agents designed to support the secondary training audience in generating unambiguous and situation adequate orders for the simulation system but being so efficient that a user requirement to integrate them into real world C4I system emerged from the exercises. First tests are promising.Overall, the JOANA concept as well as the system itself can be seen as promising reference architecture implementations of open federated solutions. As long as respective components meet the requirements for distributed simulation systems (i.e., well defined, open, documented, and configurable interfaces), all components offering the needed functionality can be replaced or reconfigured. This makes it possible to use the JOANA ideas, architecture, and model to bring together several components to enable – on the mid scale – joint and combined CAX for NATO and for other friendly nations.6	ReferencesFollowing books and articles are referenced in this paper:[1]	Andreas Tolk: “Using ATCCIS as an Information Layer to couple CGF Federates and Closed Combat Simulations”, Paper 99F-SIW-008, Proceedings of the Simulation Interoperability Workshop Fall 1999 (SIW F99), Orlando, Florida, September 1999[2]	Andreas Tolk: „HLA-OMT versus Traditional Data and Object Modeling – Chance or Shoehorn“, Paper 00S-SIW-024, Proceedings of the Spring Simulation Interoperability Workshop, Orlando, Florida, March 2000[3]	Andreas Tolk: “Heterogeneous Synergy – A Vision for the Next Generation of Warfighter IT systems”, Paper 00F-SIW-013, Proceedings of the Fall Simulation Interoperability Workshop, Orlando, Florida, September 2000[4]	Andreas Tolk, Dietmar Kunde: “Decision Support Systems – Technical Prerequisites and Military Requirements”, Proceedings of the 2000 Command and Control Research and Technology Symposium (CCRTS), Naval Postgraduate School, Monterey, California, June 2000[5]	Richard Briggs: “Experiences in the NATO pre-pathfinder DiMuNDS 2000 Federation”, Paper 99F-SIW-189, Proceedings of the Simulation Interoperability Workshop Fall 1999 (SIW F99), Orlando, Florida, September 19997	Authors’ BiographyTHOMAS RIETH is project manager and simulation system developer at IABG, Ottobrunn, Germany. He works on the JOANA HLA compliance. He is an HLA expert as well as an expert for the HLA-gateway solution.KLAUS SATTLER is project manager and simulation system developer at IABG, Ottobrunn, Germany. He works on the JOANA HLA compliance. He is an expert in the HLA object and interaction requirements in distributed solutions.FRANZ-JOSEF SCHULZ is head of department for OR and CAX at Armed Forces Level, Air Force Navy at IABG, Ottobrunn, Germany and as such responsible for development of JOANA. He participated in numerous CAX of NATO as well Germany, gave presentations on the topic during the 50th Anniversary of NATO, and is an well known expert in the domain of CAX respective working and decision support groups.ANDREAS TOLK is Technical Advisor for the Head of the Military Information Technology Branch  at the IABG, Ottobrunn, Germany.  He gives lectures at the University of the Federal Armed Forces of Germany on the Use of Artificial Intelligence within Military Systems and on Data Modeling and Management in Command and Control Systems.  He is invited by NATO to give lessons as a Matter-of-Subject expert on interoperability issues within the PfP-Lecture Series.  Distributed Multi National Defense Simulation		2000 Fall Simulation Interoperability Workshop		Orlando, Florida, September 200000F-SIW-145		Page  SEITE 8 EINBETTEN SmartDraw.2  