Spacecraft Operator Training Using Infrastructure Developed in EDISON Project.Alexander VankovPeter ShlyaevD3 Group GmbHBonnerstrasse 21Grafschaft-Gelsdorf, D-53501, Germany+49 2225 911255{Alexander.Vankov, Peter.Shlyaev}@d3group.comDaniel Claude, Francois Dubuc, Daniel MichelAEROSPATIALE-MATRA Lanceurs66 Route de Verneuil - BP 3002Les Mureaux, F-78133,  France+33 1 39062357{daniel.claude, francois.dubuc, daniel.michel}@lanceurs.aeromatra.comLuis ArguelloEuropean Space Agency (ESA/ESTEC)Postbus 299, 2200 AG Noordwijk, The Netherlands+31 71 5653706larguell@estec.esa.nlKeywords:EDISON project, Man-in-the-loop, International Space Station, Training, ISDN, ATM. ABSTRACT: The paper presents the EDISON project (ESPRIT 26347), an initiative to implement a distributed simulation environment based on the HLA and interfacing various test facilities across Europe. The paper focuses on the EDISON Man-In-the-Loop (MIL) application domain and presents how the EDISON infrastructure supports this type of applications. EDISON (European Distributed Interactive Simulation Over Network) is a research project co-funded by the European Commission and involving nine companies and research laboratories in four countries.The objective of the MIL pilot application is to demonstrate that human operators can be provided with an adequate level of training in a distributed simulation environment based on the HLA and state-of-the-art communication technology (e.g. ATM-based network with Quality of Service Management).It is of special importance for the International Space Station development program, in the frame of which several simulation and training segments are now being implemented in Europe (France, Germany, Italy, The Netherlands, etc.), as well as in the USA, Canada, Japan and Russia. In order to effectively arrange integrated simulations and training and avoid duplication of facilities, several simulators, simulations and real hardware should be interconnected on a global basis. ATV spacecraft rendez-vous and docking (RVD) to the ISS and operations with the European robotic arm (ERA) are among of the most suitable tasks to be implemented in a distributed environment. Therefore, the initial part of the EDISON MIL application is based on the DIS-RVM project accomplished by Aerospatiale-Matra Lanceurs and D3 Group for the European Space Agency (ESA) in July 1999. EDISON architecture and infrastructure facilitates real-time interconnection of all simulators involved in ATV and ERA training operations and mission rehearsals, so that distributed resources can be shared remotely by astronauts and ground controllers and long collocations of experts can be limited or avoided.Simulation results acquired during test campaigns over ISDN and ATM cross-European networks are presented and discussed along with lessons learned.IntroductionEDISON is a research project co-funded by the European Commission and involving nine companies and research laboratories in four countries as follows: Aerospatiale-Matra Lanceurs (France) – Coordinator, Alenia Aerospazio (Italy), Italdesign-Giugiaro (Italy), D3 Group (Germany), Silicon Worlds (France), Fokker Space (The Netherlands), DLR (Germany), Supercomputer Centre (RUS) of University of Stuttgart (Germany), LIP6 research laboratory of University of Paris (France).  The main scope of the EDISON project is the design and development of a European platform that should enable different and currently stand-alone simulation and training facilities to be integrated and operated in a shared distributed environment [1].  Like EDISON Hardware-in-the-loop pilot application [2], the scenario for the EDISON MIL pilot application has been selected from the space domain and is based on a transport spacecraft rendezvous and docking (RVD) mission to the International Space Station (ISS).  The Automated Transfer Vehicle (ATV) is a spacecraft being developed by a consortium headed by Aerospatiale-Matra Lanceurs (AML) under the contract from the European Space Agency (ESA).  The ATV represents one of two major ESA contributions to the ISS programme.  Each ATV mission is designed on the basis of ISS required logistics and servicing needs.  These requirements are for a combination of cargo items, refuelling and reboost capabilities in a particular time frame that are described in the corresponding ISS flight and cargo manifests.  EMBED Word.Picture.8   Figure 1: Schematic representation of ATV-ISS RVDDuring the ATV missions, three major ground control facilities will be involved as follows: Mission Control Center in Houston (MCC-H) as the main supervising authority, Russian Mission Control Center (MCC-M) near Moscow (because the ATV will be docking to the Russian Segment of the ISS), ATV Control Center in Toulouse (France).  The “ground” will be in permanent contact with the ISS crew, the latter will also be provided with certain ATV control authority and capability especially in contingency situations.  European Robotic Arm (ERA) is a manipulator to be installed on the Russian Segment of the ISS for the purposes of supporting ISS assembly, handling external payloads, facilitating crew extravehicular activity, etc.  All the operations related to the ATV mission and ERA operations should be extremely well coordinated between the crew and ground controllers.  Therefore, extensive training of crews together with several groups of ground operators is required.  Due to geographical distribution of operators, it is quite feasible and desirable that the above groups could receive an adequate scope and quality of training on a distributed basis.  The work reported in the present paper is a continuation of the activity started in 1996 and first presented at the SIW-97F [3].EDISON architectureThe EDISON and its environment can be represented as a layered system depicted in Fig 2 and comprising of:The Application layer, which corresponds to specific user defined simulations that have to run on or be tested by means of the EDISON system and that are not part of it.The Simulation Framework providing the application with common simulation services (scheduling, real-time kernel, etc.). It reuses available products from the partners (EUROSIM, EGS, DCAP, etc).The Middleware containing the vital primitives and services necessary to the running simulation (time management, intelligent distribution mechanisms, extrapolation and prediction mechanisms to hide network latencies and jitter, etc).The Virtual Reality (VR) Framework comprising the Audio and Video rendering tool.The Communication Framework providing EDISON processes with the platform interface to the multi-site High Performance Network and with the needed services to guarantee the required Quality of Service.The Groupware layer providing this environment with the most effective co-operative working tools.The Supervisor tightly linked to the previous components (especially the communication) and in charge of preparing, monitoring, logging and controlling the simulation sessions.Figure 2: The EDISON layered architectureThe above architecture represents a part of the whole EDISON architecture (which can be found in [1,2]) only focusing on the MIL application and arranged “vertically” to generally reflect the OSI reference model.MiddlewareThe EDISON Middleware is a core element in the EDISON architecture as it lies in a central location between the Simulation Framework, Supervisor, and Communication Services.  The Middleware comprises the following components:The Run-Time Infrastructure respecting the HLA interface specification.The NTP synchronisation toolkit based on the RFC 1305 standard [4] and customised for EDISON purposes.The Dead-Reckoning Library implemented to provide services not provided by the RTI itself.The EDISON Base Object Models (BOM) providing a re-usable object model enabling all reusable components of the Middleware to communicate. Currently, 4 BOMs are supported by the EDISON components and can be used by EDISON applications.The Simulation Management Library providing some services in order to manage the EDISON federations.Communication frameworkThe communication services hide the wide-area network (WAN) from the middleware and groupware.  The control and monitoring of the communication services, and thus also the WAN, is done by the EDISON Supervisor.The communication services are using the TCP/IP protocol suite over the WAN and provide separated network services to the middleware and groupware. The EDISON communication framework provides the following:Quality of Service management based on “Differentiated Services” (according to the IETF terminology) [5].Network Monitoring and Configuration Access to the WAN edge devices.  It is provided by means of the SNMP protocol [6]. The SNMP application integrated with the Supervisor is used to monitor the network on the WAN termination devices.  QoS measurements (i.e. packet round trip time and packet loss) are provided by the communication framework through the ICMP protocol, which is used by a ping program prepared for the supervisor.  Implementation of end-to-end throughput measurements (i.e. available bandwidth) that are controlled by the supervisor is a work in progress.IP multicast.  The IP multicast service is provided by the communication framework by interfacing between the supervisor and the multicast configuration on the WAN edge devices, if these are Cisco routers, or by the configuration of the mbone daemon process on the end-systems.  The mtrace tool is provided to support monitoring of the IP multicast service.GroupwareThe MBONE tools such as VIC, RAT and WBD have been selected for providing video, audio and shared workspace functionality.  These tools have been prepared for EDISON usage and installed on the EDISON end-systems.   These tools are operable both in point-to-point and multicast modes, in the latter they are using the multicast service provided by the EDISON communication services.SupervisorThe EDISON Supervisor provides setting up the simulation environment, groupware and network management facilities and control mechanisms over the simulation. It incorporates the following components available for the EDISON operator:Configuration information panelNetwork topology viewNetwork status panelPing toolSNMP browserTraffic viewerSimulation control windowFederate status panel. The Supervisor GUI was developed in Java language, which facilitates easy development of platform-independent GUIs.Some tools included in the Supervisor, however, are external developments or cannot be implemented in Java due to limitations of the language.  In these cases, non-Java executables are included via the process execution API implemented in Java, the Java-Native-Interface (JNI), or a CORBA-interface to link the Java-GUI with C++ code.Virtual Reality FrameworkThe EDISON VR framework is intended for visualization and audio rendering of a distributed simulation scene.  It is implemented as an HLA compliant stand-alone application that can be a federate in any EDISON federation.  The scene can contain several objects, both static and dynamic.  Many types of objects can be integrated: simple geometrical objects, complex hierarchy of interrelated objects and lights.  The scene organizes these objects hierarchically and can attach dynamic attributes to these objects.  Various dynamic attributes are defined in the EDISON Visualisation BOM and come from the RTI. Once a connection to an HLA federation is established, any objects discovered through the RTI are automatically created in the scene, displayed and monitored.  Any change in its attributes (position, orientation, etc) becomes immediately apparent in the VR display.  Additionally, geographically distant users of the VR framework who are part of the same federation can share their virtual cameras.  The VR framework is thus an integrated part of the set of collaborative work tools provided by EDISON.MIL pilot application scenarioThe final MIL Federation will consist of the following simulators (federates):Automated Transfer Vehicle (ATV)International Space Station (ISS)Mission Control Center (MCC)ATV Control Center represented by the Ground Operator Assistance System (GOAS)European Robotic Arm (ERA)and the Federation Manager (FM).The Table 1 below illustrates data flows and interactions between the above federates.Table 1ATV (receives)ISS (receives)GOAS/ATV-CC (receives)MCC (receives)ERA (Receives)FM (receives)ATV(sends)( ATV telemetry (state vector, ongoing subphase of flight plan)( ATV state vector( ATV-ISS relative state vector( Federates status    (ready to start, executing, paused...)( Information on  main RVD milestonesISS(sends)( ISS state vector( Sun, Earth position( Parameters of ISS docking ports required for ATV GNC( Parameters of ISS stabilisation mode( ATV telecommands: - go/no-go - Collision Avoidance    Maneuver (CAM)  -manual control   commands (optional)( ISS state vector( ISS systems status( Sun, Earth position( RVD sequence control (go/no-go, CAM)( ISS state vector( ISS systems status( Sun, Earth position( RVD sequence control  (go/no-go, Wave-off, CAM)( authority transfer demand( ISS state vector( Sun, Earth positionGOAS/ATV-CC(sends)( ATV flight plan( ATV telecommand:  - Subsystems  control and  configuring   - go/no-go   -CAM ( ATV flight plan( ATV-CC status( ATV telecommands( ATV-CC status( ATV flight plan( Authority transfer demandNoneMCC(sends)( ATV telecommand:  - go/no-go  - CAM   - manual control commands (optional)( ATV telecommands( MCC status( Authority transfer   acceptance( MCC status( Authority transfer   acceptance( Authorisation to start/resume ERA operations( Command to stop ERA operationsERA(sends)None( ERA status( ERA state vectorFM(sends)( Initial  configuration (scenario ID, state vectors)( Introduction of contingency, failure and off-nominal situationsIn the simulation/training scenario selected as a baseline, it is assumed that the ATV initially has a problem with deployment of one of its solar arrays (panels).   To investigate how serious is the problem, and if RVD can be accomplished nominally, the failed panel and elements around it should be examined by means of a TV-camera.  However, a body-fixed ISS camera to be used to monitor ATV RVD in nominal conditions is not sufficient for this purpose because its field of view is aligned with the approach line.  Thus, the ATV panels, if not deployed nominally, are not visible enough in this case.  It is assumed that a TV-camera mounted on the ERA manipulator could be used for investigating the problem.  For example, as soon as the ATV is close enough to the ISS, its approach will be stopped, ERA deployed with one of its cameras pointing the spacecraft.  The latter, in turn, could be controlled so that to ensure appropriate visibility conditions for the crew and ground controllers. Therefore, the scenario implies cooperative control of ATV, ISS and ERA from two control centers and the crew control post. Implementation of the EDISON MIL Federation and pilot application is currently in progress and its accomplishment is scheduled for the fall of year 2000.  To reduce technical risk, it was decided to implement the above Federation in steps, effectively re-using the results of previous activities in this domain.  Therefore, it was feasible to start with a “precursor” MIL Federation based on the DIS-RVM project accomplished by Aerospatiale-Matra Lanceurs and D3 Group in July 1999 under a contract from the ESA.  Previously developed DIS-RVM federation consists of ATV, ISS and ground center federates which are being updated in the frame of the EDISON.  Therefore, all ERA-related functionality is not implemented yet and is not discussed further.To make DIS-RVM applications compliant with the EDISON architecture and, thus, take advantage of it, some significant modifications of the existing federates have already been done:Support of EDISON Simulation Management and Visualization BOMs was added.  This made it possible to use the VR renderer (see Figure 3) and the Supervisor with the applications. Transition to EDISON Dead Reckoning and NTP packages to provide on-wire compatibility with new federates and EDISON kernel components.Modification of the Federation Manager, since generic simulation control and management functionality can be provided by the Supervisor.Figure 3: ATV and ISS representation by the EDISON VR viewerImplementation and simulation resultsWAN test-bed topologyThe simulation sessions of the MIL application had been performed using both ISDN and ATM WANs interconnecting distant simulation and demonstration sites within Europe (see Figures 4 and 5 below).Figure 4: ISDN-based DIS-RVM WAN connectivityFigure 5: ATM-based WAN connectivity for EDISON “precursor”The WANs were built for this particular application and had the following characteristics.DIS-RVM ISDN WAN:64/128 kbps bandwidth30…200 ms latency depending on site-to-site connectionNo manageable quality of service for different data streamsOn-demand inter-site connectionsUsed only for simulation data.EDISON demo over an ATM-based WAN:1.5 Mbps bandwidth30 ms latencyManageable quality of service for different data streamsPermanent inter-site connectionsUsed both for simulation and groupware data.A configuration similar to the one shown in Fig.5 was used during the demonstration of the EDISON project at the Telecom ’99 world exhibition in Switzerland. The AML site in Les Mureaux was connected to the booth of KPN Dutch Telecom in Geneva, which hosted the EDISON applications.Test runs and simulation resultsEvaluation of MIL application simulation results was driven by the following objectives: ( to evaluate the suitability of the HLA technology for cosmonaut and ground operator training in a distributed environment:individual training to monitor RVD process and intervene into it with dynamic vehicle models/simulations (ATV, ISS) running remotelydeveloping team skills to jointly tackle contingencies (crew and several ground teams)( to evaluate possibility to perform mission rehearsal when several distributed sites are involved and their correct interactions are critical for mission rehearsal.The following issues had also to be clarified during the simulations:to what extent the transport delay between remote simulations impacts the human operator controlling the ATV and/or ERA ?could ownership transfer be provided quickly enough while switching from one control post (e.g. ground) to another (e.g. ISS crew) ?RUN №1: Reference case with only initial test of manual mode.To make sure that manual control mode is functioning properly, the ATV-CC takes the responsibility to test it while the ATV is at the hold point some 250 m away from the ISS.  Ground operator checks how the spacecraft reacts to his inputs control inputs along all 6 degrees of freedomAfter the above ATV-CC check is completed, the same test is repeated by the ISS crewATV is returned to the automatic modeATV Final Translation starts and goes on nominally until the docking contact.The RUN №1 demonstrated that ATV maneuverability and controllability in the manual mode is acceptable.  The recorded trajectories indicate that:ATV was manually controllable both in case when it was controlled from ground and from onboard the ISS.  Latency compensation based on linear extrapolation of manual control inputs was sufficient.Smooth transition from automatic mode to manual and back was ensured by the ATV GNC subsystem.RUN №2: ATV Rendezvous Sensor failure at a distance of 15 m from the ISS:At about 15 meters from docking, the ATV RVS failure (assumed undetected by the ATV fault-detection subsystem) has been introducedThe ATV-CC operators detect the failure indirectly, by using telemetry (TM) dataATV-CC switches ATV GNC to Manual Control ModeISS crew continues approach in manual mode and docks ATV to the ISS.The RUN №2 additionally demonstrated effectiveness of cooperative work of different groups of operators:After the ATV RVS failure has been introduced, ground controllers had quickly detected the failure and commanded the crew about taking over the controlISS crew completed the approach in the manual control mode.RUN №3: TV link shutdown at 15 m:At about 15 meters from docking, a TV link shutdown has been introducedMCC issues a command to an ATV-CC ground operator to stop the approach by nullifying the approach velocity using only TM data and maintain station keeping in manual mode until the ISS crew takes over the controlATV-CC switches ATV GNC to the manual control Mode.ATV-CC operator controls ATV by means of TM onlyMCC issues a command to the ISS crew to take over manual control of ATVISS crew resumes approach in manual modeISS crew completes the docking manually.The RUN №3 additionally demonstrated effectiveness of implementation of the ownership transfer functionality between different control posts:After the TV-link failure has been introduced, a ground controller was able to keep the ATV in the additional hold point by only using telemetry dataAfter the ATV-CC has released the control, the ISS crew took over the control and successfully completed the approach in the manual control mode.ConclusionPreliminary results of the EDISON project show that its architecture and components could be used for complex man-in-the-loop distributed simulations such as those purposed for international space programs.AcknowledgementsThe authors gratefully acknowledge support of the European Commission in the ESPRIT programme and express their thanks to all members of the EDISON team specially highlighting contribution of Alenia Aerospazio – Divison Spazio, Silicon Worlds S.A., RUS and LIP6.  Effort of the European Space Agency in the area of distributed simulation is also very much appreciated.References[1]	EDISON Web site: http://cec.to.alespazio.it/EDISON[2]	D. Michel, D. Claude, F. Dubuc, P. Shlyaev, A. Vankov: “ATV System Validation Using a Distributed Simulation Facility” 2000 Spring Simulation Interoperability Workshop.  Paper No. 00S-SIW-009.[3]  Distributed Interactive Simulation of Rendezvous and Docking with International Space Station, A. Vankov, P. Chliaev, A. Alyoshin, J.E. Miro – 97Fall Simulation Interoperability Workshop, Orlando FL, Sept. 97.[4]	Network Time Protocol, RFC 1305, http://www.eecis.udel.edu/~ntp/database.[5] An Architecture for Differentiated Services, RFC 2475, December 1998[6]	A Simple Network Management Protocol, RFC 1157, May 1990Author BiographiesALEXANDER VANKOV is the business development manager of D3 Group GmbH. Before joining D3 Group he worked at the Gagarin Cosmonaut Training Center for over 18 years and was involved in all major Russian manned aerospace programs doing research activities in the areas of vehicle guidance and control systems, man-in-the-loop simulation, in-flight simulators, distributed simulation.PETER SHLYAEV is the technical manager at D3 Group GmbH.   He has over 6 years research experience in simulation, information technology and computer science. He participated in several large international projects in the area of distributed interactive simulation and operator training, where he was responsible for the development of some critical middleware components and participated in integration of training facilities.DANIEL CLAUDE is the deputy manager for the Electrical Ground Systems Engineering Department at AEROSPATIALE-MATRA Lanceurs, Systems Business Unit. He graduated from Sup’Aero and INSEAD.  He is involved in distributed simulation activities for more than 5 years.DANIEL MICHEL is a systems engineer at AEROSPATIALE-MATRA Lanceurs.  He graduated both from Supelec (Paris) and from the Imperial College of Science (London).  He was actively involved in distributed simulations during the 5 last years.FRANÇOIS DUBUC is the project manager at the Electrical Ground Systems Engineering Department of AEROSPATIALE-MATRA Lanceurs.  He graduated both from ENSERG (Electronics) and ENSIMAG (Mathematics and Computer Science) in 1991.  He has over 8 years experience in software engineering and international projects management and manages distributed simulation projects for 3 years.LUIS ARGUELLO is a member of the Modelling and Simulation Section of the Technical and Operational Support Directorate of the European Space Agency.  He has over 10 years of international experience in simulation and software engineering.  He is actively involved in distributed simulation activities and simulations in support to the International Space Station program for the last 3 years. EMBED Word.Picture.8   EMBED Word.Picture.8  